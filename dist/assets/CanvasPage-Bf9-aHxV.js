import{a as Vc,g as Wh,b as Sd,r as bt,R as ne,j as Bt}from"./index-CJmd2Dlh.js";var Pl={exports:{}},ii={},xr={},Ar={},Lc;function Tt(){return Lc||(Lc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o._registerNode=o.Konva=o.glob=void 0;const r=Math.PI/180;function H(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}o.glob=typeof Vc<"u"?Vc:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},o.Konva={_global:o.glob,version:"9.3.22",isBrowser:H(),isUnminified:/param/.test((function(C){}).toString()),dblClickWindow:400,getAngle(C){return o.Konva.angleDeg?C*r:C},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return o.Konva.DD.isDragging},isTransforming(){var C;return(C=o.Konva.Transformer)===null||C===void 0?void 0:C.isTransforming()},isDragReady(){return!!o.Konva.DD.node},releaseCanvasOnDestroy:!0,document:o.glob.document,_injectGlobal(C){o.glob.Konva=C}};const U=C=>{o.Konva[C.prototype.getClassName()]=C};o._registerNode=U,o.Konva._injectGlobal(o.Konva)}(Ar)),Ar}var Rr={},qc;function wt(){return qc||(qc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Util=o.Transform=void 0;const r=Tt();class H{constructor(_=[1,0,0,1,0,0]){this.dirty=!1,this.m=_&&_.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new H(this.m)}copyInto(_){_.m[0]=this.m[0],_.m[1]=this.m[1],_.m[2]=this.m[2],_.m[3]=this.m[3],_.m[4]=this.m[4],_.m[5]=this.m[5]}point(_){const T=this.m;return{x:T[0]*_.x+T[2]*_.y+T[4],y:T[1]*_.x+T[3]*_.y+T[5]}}translate(_,T){return this.m[4]+=this.m[0]*_+this.m[2]*T,this.m[5]+=this.m[1]*_+this.m[3]*T,this}scale(_,T){return this.m[0]*=_,this.m[1]*=_,this.m[2]*=T,this.m[3]*=T,this}rotate(_){const T=Math.cos(_),G=Math.sin(_),Y=this.m[0]*T+this.m[2]*G,x=this.m[1]*T+this.m[3]*G,R=this.m[0]*-G+this.m[2]*T,O=this.m[1]*-G+this.m[3]*T;return this.m[0]=Y,this.m[1]=x,this.m[2]=R,this.m[3]=O,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(_,T){const G=this.m[0]+this.m[2]*T,Y=this.m[1]+this.m[3]*T,x=this.m[2]+this.m[0]*_,R=this.m[3]+this.m[1]*_;return this.m[0]=G,this.m[1]=Y,this.m[2]=x,this.m[3]=R,this}multiply(_){const T=this.m[0]*_.m[0]+this.m[2]*_.m[1],G=this.m[1]*_.m[0]+this.m[3]*_.m[1],Y=this.m[0]*_.m[2]+this.m[2]*_.m[3],x=this.m[1]*_.m[2]+this.m[3]*_.m[3],R=this.m[0]*_.m[4]+this.m[2]*_.m[5]+this.m[4],O=this.m[1]*_.m[4]+this.m[3]*_.m[5]+this.m[5];return this.m[0]=T,this.m[1]=G,this.m[2]=Y,this.m[3]=x,this.m[4]=R,this.m[5]=O,this}invert(){const _=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),T=this.m[3]*_,G=-this.m[1]*_,Y=-this.m[2]*_,x=this.m[0]*_,R=_*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),O=_*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=T,this.m[1]=G,this.m[2]=Y,this.m[3]=x,this.m[4]=R,this.m[5]=O,this}getMatrix(){return this.m}decompose(){const _=this.m[0],T=this.m[1],G=this.m[2],Y=this.m[3],x=this.m[4],R=this.m[5],O=_*Y-T*G,L={x,y:R,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(_!=0||T!=0){const F=Math.sqrt(_*_+T*T);L.rotation=T>0?Math.acos(_/F):-Math.acos(_/F),L.scaleX=F,L.scaleY=O/F,L.skewX=(_*G+T*Y)/O,L.skewY=0}else if(G!=0||Y!=0){const F=Math.sqrt(G*G+Y*Y);L.rotation=Math.PI/2-(Y>0?Math.acos(-G/F):-Math.acos(G/F)),L.scaleX=O/F,L.scaleY=F,L.skewX=0,L.skewY=(_*G+T*Y)/O}return L.rotation=o.Util._getRotation(L.rotation),L}}o.Transform=H;const U="[object Array]",C="[object Number]",S="[object String]",m="[object Boolean]",f=Math.PI/180,d=180/Math.PI,p="#",v="",E="0",g="Konva warning: ",c="Konva error: ",u="rgb(",b={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},N=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let D=[];const h=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(s){setTimeout(s,60)};o.Util={_isElement(s){return!!(s&&s.nodeType==1)},_isFunction(s){return!!(s&&s.constructor&&s.call&&s.apply)},_isPlainObject(s){return!!s&&s.constructor===Object},_isArray(s){return Object.prototype.toString.call(s)===U},_isNumber(s){return Object.prototype.toString.call(s)===C&&!isNaN(s)&&isFinite(s)},_isString(s){return Object.prototype.toString.call(s)===S},_isBoolean(s){return Object.prototype.toString.call(s)===m},isObject(s){return s instanceof Object},isValidSelector(s){if(typeof s!="string")return!1;const _=s[0];return _==="#"||_==="."||_===_.toUpperCase()},_sign(s){return s===0||s>0?1:-1},requestAnimFrame(s){D.push(s),D.length===1&&h(function(){const _=D;D=[],_.forEach(function(T){T()})})},createCanvasElement(){const s=document.createElement("canvas");try{s.style=s.style||{}}catch{}return s},createImageElement(){return document.createElement("img")},_isInDocument(s){for(;s=s.parentNode;)if(s==document)return!0;return!1},_urlToImage(s,_){const T=o.Util.createImageElement();T.onload=function(){_(T)},T.src=s},_rgbToHex(s,_,T){return((1<<24)+(s<<16)+(_<<8)+T).toString(16).slice(1)},_hexToRgb(s){s=s.replace(p,v);const _=parseInt(s,16);return{r:_>>16&255,g:_>>8&255,b:_&255}},getRandomColor(){let s=(Math.random()*16777215<<0).toString(16);for(;s.length<6;)s=E+s;return p+s},getRGB(s){let _;return s in b?(_=b[s],{r:_[0],g:_[1],b:_[2]}):s[0]===p?this._hexToRgb(s.substring(1)):s.substr(0,4)===u?(_=N.exec(s.replace(/ /g,"")),{r:parseInt(_[1],10),g:parseInt(_[2],10),b:parseInt(_[3],10)}):{r:0,g:0,b:0}},colorToRGBA(s){return s=s||"black",o.Util._namedColorToRBA(s)||o.Util._hex3ColorToRGBA(s)||o.Util._hex4ColorToRGBA(s)||o.Util._hex6ColorToRGBA(s)||o.Util._hex8ColorToRGBA(s)||o.Util._rgbColorToRGBA(s)||o.Util._rgbaColorToRGBA(s)||o.Util._hslColorToRGBA(s)},_namedColorToRBA(s){const _=b[s.toLowerCase()];return _?{r:_[0],g:_[1],b:_[2],a:1}:null},_rgbColorToRGBA(s){if(s.indexOf("rgb(")===0){s=s.match(/rgb\(([^)]+)\)/)[1];const _=s.split(/ *, */).map(Number);return{r:_[0],g:_[1],b:_[2],a:1}}},_rgbaColorToRGBA(s){if(s.indexOf("rgba(")===0){s=s.match(/rgba\(([^)]+)\)/)[1];const _=s.split(/ *, */).map((T,G)=>T.slice(-1)==="%"?G===3?parseInt(T)/100:parseInt(T)/100*255:Number(T));return{r:_[0],g:_[1],b:_[2],a:_[3]}}},_hex8ColorToRGBA(s){if(s[0]==="#"&&s.length===9)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:parseInt(s.slice(7,9),16)/255}},_hex6ColorToRGBA(s){if(s[0]==="#"&&s.length===7)return{r:parseInt(s.slice(1,3),16),g:parseInt(s.slice(3,5),16),b:parseInt(s.slice(5,7),16),a:1}},_hex4ColorToRGBA(s){if(s[0]==="#"&&s.length===5)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:parseInt(s[4]+s[4],16)/255}},_hex3ColorToRGBA(s){if(s[0]==="#"&&s.length===4)return{r:parseInt(s[1]+s[1],16),g:parseInt(s[2]+s[2],16),b:parseInt(s[3]+s[3],16),a:1}},_hslColorToRGBA(s){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(s)){const[_,...T]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(s),G=Number(T[0])/360,Y=Number(T[1])/100,x=Number(T[2])/100;let R,O,L;if(Y===0)return L=x*255,{r:Math.round(L),g:Math.round(L),b:Math.round(L),a:1};x<.5?R=x*(1+Y):R=x+Y-x*Y;const F=2*x-R,j=[0,0,0];for(let J=0;J<3;J++)O=G+1/3*-(J-1),O<0&&O++,O>1&&O--,6*O<1?L=F+(R-F)*6*O:2*O<1?L=R:3*O<2?L=F+(R-F)*(2/3-O)*6:L=F,j[J]=L*255;return{r:Math.round(j[0]),g:Math.round(j[1]),b:Math.round(j[2]),a:1}}},haveIntersection(s,_){return!(_.x>s.x+s.width||_.x+_.width<s.x||_.y>s.y+s.height||_.y+_.height<s.y)},cloneObject(s){const _={};for(const T in s)this._isPlainObject(s[T])?_[T]=this.cloneObject(s[T]):this._isArray(s[T])?_[T]=this.cloneArray(s[T]):_[T]=s[T];return _},cloneArray(s){return s.slice(0)},degToRad(s){return s*f},radToDeg(s){return s*d},_degToRad(s){return o.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),o.Util.degToRad(s)},_radToDeg(s){return o.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),o.Util.radToDeg(s)},_getRotation(s){return r.Konva.angleDeg?o.Util.radToDeg(s):s},_capitalize(s){return s.charAt(0).toUpperCase()+s.slice(1)},throw(s){throw new Error(c+s)},error(s){console.error(c+s)},warn(s){r.Konva.showWarnings&&console.warn(g+s)},each(s,_){for(const T in s)_(T,s[T])},_inRange(s,_,T){return _<=s&&s<T},_getProjectionToSegment(s,_,T,G,Y,x){let R,O,L;const F=(s-T)*(s-T)+(_-G)*(_-G);if(F==0)R=s,O=_,L=(Y-T)*(Y-T)+(x-G)*(x-G);else{const j=((Y-s)*(T-s)+(x-_)*(G-_))/F;j<0?(R=s,O=_,L=(s-Y)*(s-Y)+(_-x)*(_-x)):j>1?(R=T,O=G,L=(T-Y)*(T-Y)+(G-x)*(G-x)):(R=s+j*(T-s),O=_+j*(G-_),L=(R-Y)*(R-Y)+(O-x)*(O-x))}return[R,O,L]},_getProjectionToLine(s,_,T){const G=o.Util.cloneObject(s);let Y=Number.MAX_VALUE;return _.forEach(function(x,R){if(!T&&R===_.length-1)return;const O=_[(R+1)%_.length],L=o.Util._getProjectionToSegment(x.x,x.y,O.x,O.y,s.x,s.y),F=L[0],j=L[1],J=L[2];J<Y&&(G.x=F,G.y=j,Y=J)}),G},_prepareArrayForTween(s,_,T){const G=[],Y=[];if(s.length>_.length){const R=_;_=s,s=R}for(let R=0;R<s.length;R+=2)G.push({x:s[R],y:s[R+1]});for(let R=0;R<_.length;R+=2)Y.push({x:_[R],y:_[R+1]});const x=[];return Y.forEach(function(R){const O=o.Util._getProjectionToLine(R,G,T);x.push(O.x),x.push(O.y)}),x},_prepareToStringify(s){let _;s.visitedByCircularReferenceRemoval=!0;for(const T in s)if(s.hasOwnProperty(T)&&s[T]&&typeof s[T]=="object"){if(_=Object.getOwnPropertyDescriptor(s,T),s[T].visitedByCircularReferenceRemoval||o.Util._isElement(s[T]))if(_.configurable)delete s[T];else return null;else if(o.Util._prepareToStringify(s[T])===null)if(_.configurable)delete s[T];else return null}return delete s.visitedByCircularReferenceRemoval,s},_assign(s,_){for(const T in _)s[T]=_[T];return s},_getFirstPointerId(s){return s.touches?s.changedTouches[0].identifier:s.pointerId||999},releaseCanvas(...s){r.Konva.releaseCanvasOnDestroy&&s.forEach(_=>{_.width=0,_.height=0})},drawRoundedRectPath(s,_,T,G){let Y=0,x=0,R=0,O=0;typeof G=="number"?Y=x=R=O=Math.min(G,_/2,T/2):(Y=Math.min(G[0]||0,_/2,T/2),x=Math.min(G[1]||0,_/2,T/2),O=Math.min(G[2]||0,_/2,T/2),R=Math.min(G[3]||0,_/2,T/2)),s.moveTo(Y,0),s.lineTo(_-x,0),s.arc(_-x,x,x,Math.PI*3/2,0,!1),s.lineTo(_,T-O),s.arc(_-O,T-O,O,0,Math.PI/2,!1),s.lineTo(R,T),s.arc(R,T-R,R,Math.PI/2,Math.PI,!1),s.lineTo(0,Y),s.arc(Y,Y,Y,Math.PI,Math.PI*3/2,!1)}}}(Rr)),Rr}var li={},ca={},ha={},Pc;function Ih(){if(Pc)return ha;Pc=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.HitContext=ha.SceneContext=ha.Context=void 0;const o=wt(),r=Tt();function H(D){const h=[],s=D.length,_=o.Util;for(let T=0;T<s;T++){let G=D[T];_._isNumber(G)?G=Math.round(G*1e3)/1e3:_._isString(G)||(G=G+""),h.push(G)}return h}const U=",",C="(",S=")",m="([",f="])",d=";",p="()",v="=",E=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],g=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],c=100;let u=class{constructor(h){this.canvas=h,r.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(h){h.fillEnabled()&&this._fill(h)}_fill(h){}strokeShape(h){h.hasStroke()&&this._stroke(h)}_stroke(h){}fillStrokeShape(h){h.attrs.fillAfterStrokeEnabled?(this.strokeShape(h),this.fillShape(h)):(this.fillShape(h),this.strokeShape(h))}getTrace(h,s){let _=this.traceArr,T=_.length,G="",Y,x,R,O;for(Y=0;Y<T;Y++)x=_[Y],R=x.method,R?(O=x.args,G+=R,h?G+=p:o.Util._isArray(O[0])?G+=m+O.join(U)+f:(s&&(O=O.map(L=>typeof L=="number"?Math.floor(L):L)),G+=C+O.join(U)+S)):(G+=x.property,h||(G+=v+x.val)),G+=d;return G}clearTrace(){this.traceArr=[]}_trace(h){let s=this.traceArr,_;s.push(h),_=s.length,_>=c&&s.shift()}reset(){const h=this.getCanvas().getPixelRatio();this.setTransform(1*h,0,0,1*h,0,0)}getCanvas(){return this.canvas}clear(h){const s=this.getCanvas();h?this.clearRect(h.x||0,h.y||0,h.width||0,h.height||0):this.clearRect(0,0,s.getWidth()/s.pixelRatio,s.getHeight()/s.pixelRatio)}_applyLineCap(h){const s=h.attrs.lineCap;s&&this.setAttr("lineCap",s)}_applyOpacity(h){const s=h.getAbsoluteOpacity();s!==1&&this.setAttr("globalAlpha",s)}_applyLineJoin(h){const s=h.attrs.lineJoin;s&&this.setAttr("lineJoin",s)}setAttr(h,s){this._context[h]=s}arc(h,s,_,T,G,Y){this._context.arc(h,s,_,T,G,Y)}arcTo(h,s,_,T,G){this._context.arcTo(h,s,_,T,G)}beginPath(){this._context.beginPath()}bezierCurveTo(h,s,_,T,G,Y){this._context.bezierCurveTo(h,s,_,T,G,Y)}clearRect(h,s,_,T){this._context.clearRect(h,s,_,T)}clip(...h){this._context.clip.apply(this._context,h)}closePath(){this._context.closePath()}createImageData(h,s){const _=arguments;if(_.length===2)return this._context.createImageData(h,s);if(_.length===1)return this._context.createImageData(h)}createLinearGradient(h,s,_,T){return this._context.createLinearGradient(h,s,_,T)}createPattern(h,s){return this._context.createPattern(h,s)}createRadialGradient(h,s,_,T,G,Y){return this._context.createRadialGradient(h,s,_,T,G,Y)}drawImage(h,s,_,T,G,Y,x,R,O){const L=arguments,F=this._context;L.length===3?F.drawImage(h,s,_):L.length===5?F.drawImage(h,s,_,T,G):L.length===9&&F.drawImage(h,s,_,T,G,Y,x,R,O)}ellipse(h,s,_,T,G,Y,x,R){this._context.ellipse(h,s,_,T,G,Y,x,R)}isPointInPath(h,s,_,T){return _?this._context.isPointInPath(_,h,s,T):this._context.isPointInPath(h,s,T)}fill(...h){this._context.fill.apply(this._context,h)}fillRect(h,s,_,T){this._context.fillRect(h,s,_,T)}strokeRect(h,s,_,T){this._context.strokeRect(h,s,_,T)}fillText(h,s,_,T){T?this._context.fillText(h,s,_,T):this._context.fillText(h,s,_)}measureText(h){return this._context.measureText(h)}getImageData(h,s,_,T){return this._context.getImageData(h,s,_,T)}lineTo(h,s){this._context.lineTo(h,s)}moveTo(h,s){this._context.moveTo(h,s)}rect(h,s,_,T){this._context.rect(h,s,_,T)}roundRect(h,s,_,T,G){this._context.roundRect(h,s,_,T,G)}putImageData(h,s,_){this._context.putImageData(h,s,_)}quadraticCurveTo(h,s,_,T){this._context.quadraticCurveTo(h,s,_,T)}restore(){this._context.restore()}rotate(h){this._context.rotate(h)}save(){this._context.save()}scale(h,s){this._context.scale(h,s)}setLineDash(h){this._context.setLineDash?this._context.setLineDash(h):"mozDash"in this._context?this._context.mozDash=h:"webkitLineDash"in this._context&&(this._context.webkitLineDash=h)}getLineDash(){return this._context.getLineDash()}setTransform(h,s,_,T,G,Y){this._context.setTransform(h,s,_,T,G,Y)}stroke(h){h?this._context.stroke(h):this._context.stroke()}strokeText(h,s,_,T){this._context.strokeText(h,s,_,T)}transform(h,s,_,T,G,Y){this._context.transform(h,s,_,T,G,Y)}translate(h,s){this._context.translate(h,s)}_enableTrace(){let h=this,s=E.length,_=this.setAttr,T,G;const Y=function(x){let R=h[x],O;h[x]=function(){return G=H(Array.prototype.slice.call(arguments,0)),O=R.apply(h,arguments),h._trace({method:x,args:G}),O}};for(T=0;T<s;T++)Y(E[T]);h.setAttr=function(){_.apply(h,arguments);const x=arguments[0];let R=arguments[1];(x==="shadowOffsetX"||x==="shadowOffsetY"||x==="shadowBlur")&&(R=R/this.canvas.getPixelRatio()),h._trace({property:x,val:R})}}_applyGlobalCompositeOperation(h){const s=h.attrs.globalCompositeOperation;!s||s==="source-over"||this.setAttr("globalCompositeOperation",s)}};ha.Context=u,g.forEach(function(D){Object.defineProperty(u.prototype,D,{get(){return this._context[D]},set(h){this._context[D]=h}})});class b extends u{constructor(h,{willReadFrequently:s=!1}={}){super(h),this._context=h._canvas.getContext("2d",{willReadFrequently:s})}_fillColor(h){const s=h.fill();this.setAttr("fillStyle",s),h._fillFunc(this)}_fillPattern(h){this.setAttr("fillStyle",h._getFillPattern()),h._fillFunc(this)}_fillLinearGradient(h){const s=h._getLinearGradient();s&&(this.setAttr("fillStyle",s),h._fillFunc(this))}_fillRadialGradient(h){const s=h._getRadialGradient();s&&(this.setAttr("fillStyle",s),h._fillFunc(this))}_fill(h){const s=h.fill(),_=h.getFillPriority();if(s&&_==="color"){this._fillColor(h);return}const T=h.getFillPatternImage();if(T&&_==="pattern"){this._fillPattern(h);return}const G=h.getFillLinearGradientColorStops();if(G&&_==="linear-gradient"){this._fillLinearGradient(h);return}const Y=h.getFillRadialGradientColorStops();if(Y&&_==="radial-gradient"){this._fillRadialGradient(h);return}s?this._fillColor(h):T?this._fillPattern(h):G?this._fillLinearGradient(h):Y&&this._fillRadialGradient(h)}_strokeLinearGradient(h){const s=h.getStrokeLinearGradientStartPoint(),_=h.getStrokeLinearGradientEndPoint(),T=h.getStrokeLinearGradientColorStops(),G=this.createLinearGradient(s.x,s.y,_.x,_.y);if(T){for(let Y=0;Y<T.length;Y+=2)G.addColorStop(T[Y],T[Y+1]);this.setAttr("strokeStyle",G)}}_stroke(h){const s=h.dash(),_=h.getStrokeScaleEnabled();if(h.hasStroke()){if(!_){this.save();const G=this.getCanvas().getPixelRatio();this.setTransform(G,0,0,G,0,0)}this._applyLineCap(h),s&&h.dashEnabled()&&(this.setLineDash(s),this.setAttr("lineDashOffset",h.dashOffset())),this.setAttr("lineWidth",h.strokeWidth()),h.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),h.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(h):this.setAttr("strokeStyle",h.stroke()),h._strokeFunc(this),_||this.restore()}}_applyShadow(h){var s,_,T;const G=(s=h.getShadowRGBA())!==null&&s!==void 0?s:"black",Y=(_=h.getShadowBlur())!==null&&_!==void 0?_:5,x=(T=h.getShadowOffset())!==null&&T!==void 0?T:{x:0,y:0},R=h.getAbsoluteScale(),O=this.canvas.getPixelRatio(),L=R.x*O,F=R.y*O;this.setAttr("shadowColor",G),this.setAttr("shadowBlur",Y*Math.min(Math.abs(L),Math.abs(F))),this.setAttr("shadowOffsetX",x.x*L),this.setAttr("shadowOffsetY",x.y*F)}}ha.SceneContext=b;class N extends u{constructor(h){super(h),this._context=h._canvas.getContext("2d",{willReadFrequently:!0})}_fill(h){this.save(),this.setAttr("fillStyle",h.colorKey),h._fillFuncHit(this),this.restore()}strokeShape(h){h.hasHitStroke()&&this._stroke(h)}_stroke(h){if(h.hasHitStroke()){const s=h.getStrokeScaleEnabled();if(!s){this.save();const G=this.getCanvas().getPixelRatio();this.setTransform(G,0,0,G,0,0)}this._applyLineCap(h);const _=h.hitStrokeWidth(),T=_==="auto"?h.strokeWidth():_;this.setAttr("lineWidth",T),this.setAttr("strokeStyle",h.colorKey),h._strokeFuncHit(this),s||this.restore()}}}return ha.HitContext=N,ha}var Yc;function Kl(){if(Yc)return ca;Yc=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.HitCanvas=ca.SceneCanvas=ca.Canvas=void 0;const o=wt(),r=Ih(),H=Tt();let U;function C(){if(U)return U;const d=o.Util.createCanvasElement(),p=d.getContext("2d");return U=function(){const v=H.Konva._global.devicePixelRatio||1,E=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return v/E}(),o.Util.releaseCanvas(d),U}let S=class{constructor(p){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const E=(p||{}).pixelRatio||H.Konva.pixelRatio||C();this.pixelRatio=E,this._canvas=o.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(p){const v=this.pixelRatio;this.pixelRatio=p,this.setSize(this.getWidth()/v,this.getHeight()/v)}setWidth(p){this.width=this._canvas.width=p*this.pixelRatio,this._canvas.style.width=p+"px";const v=this.pixelRatio;this.getContext()._context.scale(v,v)}setHeight(p){this.height=this._canvas.height=p*this.pixelRatio,this._canvas.style.height=p+"px";const v=this.pixelRatio;this.getContext()._context.scale(v,v)}getWidth(){return this.width}getHeight(){return this.height}setSize(p,v){this.setWidth(p||0),this.setHeight(v||0)}toDataURL(p,v){try{return this._canvas.toDataURL(p,v)}catch{try{return this._canvas.toDataURL()}catch(g){return o.Util.error("Unable to get data URL. "+g.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}};ca.Canvas=S;class m extends S{constructor(p={width:0,height:0,willReadFrequently:!1}){super(p),this.context=new r.SceneContext(this,{willReadFrequently:p.willReadFrequently}),this.setSize(p.width,p.height)}}ca.SceneCanvas=m;class f extends S{constructor(p={width:0,height:0}){super(p),this.hitCanvas=!0,this.context=new r.HitContext(this),this.setSize(p.width,p.height)}}return ca.HitCanvas=f,ca}var Mr={},Fc;function wr(){return Fc||(Fc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.DD=void 0;const r=Tt(),H=wt();o.DD={get isDragging(){let U=!1;return o.DD._dragElements.forEach(C=>{C.dragStatus==="dragging"&&(U=!0)}),U},justDragged:!1,get node(){let U;return o.DD._dragElements.forEach(C=>{U=C.node}),U},_dragElements:new Map,_drag(U){const C=[];o.DD._dragElements.forEach((S,m)=>{const{node:f}=S,d=f.getStage();d.setPointersPositions(U),S.pointerId===void 0&&(S.pointerId=H.Util._getFirstPointerId(U));const p=d._changedPointerPositions.find(v=>v.id===S.pointerId);if(p){if(S.dragStatus!=="dragging"){const v=f.dragDistance();if(Math.max(Math.abs(p.x-S.startPointerPos.x),Math.abs(p.y-S.startPointerPos.y))<v||(f.startDrag({evt:U}),!f.isDragging()))return}f._setDragPosition(U,S),C.push(f)}}),C.forEach(S=>{S.fire("dragmove",{type:"dragmove",target:S,evt:U},!0)})},_endDragBefore(U){const C=[];o.DD._dragElements.forEach(S=>{const{node:m}=S,f=m.getStage();if(U&&f.setPointersPositions(U),!f._changedPointerPositions.find(v=>v.id===S.pointerId))return;(S.dragStatus==="dragging"||S.dragStatus==="stopped")&&(o.DD.justDragged=!0,r.Konva._mouseListenClick=!1,r.Konva._touchListenClick=!1,r.Konva._pointerListenClick=!1,S.dragStatus="stopped");const p=S.node.getLayer()||S.node instanceof r.Konva.Stage&&S.node;p&&C.indexOf(p)===-1&&C.push(p)}),C.forEach(S=>{S.draw()})},_endDragAfter(U){o.DD._dragElements.forEach((C,S)=>{C.dragStatus==="stopped"&&C.node.fire("dragend",{type:"dragend",target:C.node,evt:U},!0),C.dragStatus!=="dragging"&&o.DD._dragElements.delete(S)})}},r.Konva.isBrowser&&(window.addEventListener("mouseup",o.DD._endDragBefore,!0),window.addEventListener("touchend",o.DD._endDragBefore,!0),window.addEventListener("touchcancel",o.DD._endDragBefore,!0),window.addEventListener("mousemove",o.DD._drag),window.addEventListener("touchmove",o.DD._drag),window.addEventListener("mouseup",o.DD._endDragAfter,!1),window.addEventListener("touchend",o.DD._endDragAfter,!1),window.addEventListener("touchcancel",o.DD._endDragAfter,!1))}(Mr)),Mr}var Or={},Te={},Kc;function Rt(){if(Kc)return Te;Kc=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.RGBComponent=U,Te.alphaComponent=C,Te.getNumberValidator=S,Te.getNumberOrArrayOfNumbersValidator=m,Te.getNumberOrAutoValidator=f,Te.getStringValidator=d,Te.getStringOrGradientValidator=p,Te.getFunctionValidator=v,Te.getNumberArrayValidator=E,Te.getBooleanValidator=g,Te.getComponentValidator=c;const o=Tt(),r=wt();function H(u){return r.Util._isString(u)?'"'+u+'"':Object.prototype.toString.call(u)==="[object Number]"||r.Util._isBoolean(u)?u:Object.prototype.toString.call(u)}function U(u){return u>255?255:u<0?0:Math.round(u)}function C(u){return u>1?1:u<1e-4?1e-4:u}function S(){if(o.Konva.isUnminified)return function(u,b){return r.Util._isNumber(u)||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a number.'),u}}function m(u){if(o.Konva.isUnminified)return function(b,N){let D=r.Util._isNumber(b),h=r.Util._isArray(b)&&b.length==u;return!D&&!h&&r.Util.warn(H(b)+' is a not valid value for "'+N+'" attribute. The value should be a number or Array<number>('+u+")"),b}}function f(){if(o.Konva.isUnminified)return function(u,b){return r.Util._isNumber(u)||u==="auto"||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a number or "auto".'),u}}function d(){if(o.Konva.isUnminified)return function(u,b){return r.Util._isString(u)||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a string.'),u}}function p(){if(o.Konva.isUnminified)return function(u,b){const N=r.Util._isString(u),D=Object.prototype.toString.call(u)==="[object CanvasGradient]"||u&&u.addColorStop;return N||D||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a string or a native gradient.'),u}}function v(){if(o.Konva.isUnminified)return function(u,b){return r.Util._isFunction(u)||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a function.'),u}}function E(){if(o.Konva.isUnminified)return function(u,b){const N=Int8Array?Object.getPrototypeOf(Int8Array):null;return N&&u instanceof N||(r.Util._isArray(u)?u.forEach(function(D){r.Util._isNumber(D)||r.Util.warn('"'+b+'" attribute has non numeric element '+D+". Make sure that all elements are numbers.")}):r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a array of numbers.')),u}}function g(){if(o.Konva.isUnminified)return function(u,b){return u===!0||u===!1||r.Util.warn(H(u)+' is a not valid value for "'+b+'" attribute. The value should be a boolean.'),u}}function c(u){if(o.Konva.isUnminified)return function(b,N){return b==null||r.Util.isObject(b)||r.Util.warn(H(b)+' is a not valid value for "'+N+'" attribute. The value should be an object with properties '+u),b}}return Te}var wc;function At(){return wc||(wc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Factory=void 0;const r=wt(),H=Rt(),U="get",C="set";o.Factory={addGetterSetter(S,m,f,d,p){o.Factory.addGetter(S,m,f),o.Factory.addSetter(S,m,d,p),o.Factory.addOverloadedGetterSetter(S,m)},addGetter(S,m,f){const d=U+r.Util._capitalize(m);S.prototype[d]=S.prototype[d]||function(){const p=this.attrs[m];return p===void 0?f:p}},addSetter(S,m,f,d){const p=C+r.Util._capitalize(m);S.prototype[p]||o.Factory.overWriteSetter(S,m,f,d)},overWriteSetter(S,m,f,d){const p=C+r.Util._capitalize(m);S.prototype[p]=function(v){return f&&v!==void 0&&v!==null&&(v=f.call(this,v,m)),this._setAttr(m,v),d&&d.call(this),this}},addComponentsGetterSetter(S,m,f,d,p){const v=f.length,E=r.Util._capitalize,g=U+E(m),c=C+E(m);S.prototype[g]=function(){const b={};for(let N=0;N<v;N++){const D=f[N];b[D]=this.getAttr(m+E(D))}return b};const u=(0,H.getComponentValidator)(f);S.prototype[c]=function(b){const N=this.attrs[m];d&&(b=d.call(this,b,m)),u&&u.call(this,b,m);for(const D in b)b.hasOwnProperty(D)&&this._setAttr(m+E(D),b[D]);return b||f.forEach(D=>{this._setAttr(m+E(D),void 0)}),this._fireChangeEvent(m,N,b),p&&p.call(this),this},o.Factory.addOverloadedGetterSetter(S,m)},addOverloadedGetterSetter(S,m){const f=r.Util._capitalize(m),d=C+f,p=U+f;S.prototype[m]=function(){return arguments.length?(this[d](arguments[0]),this):this[p]()}},addDeprecatedGetterSetter(S,m,f,d){r.Util.error("Adding deprecated "+m);const p=U+r.Util._capitalize(m),v=m+" property is deprecated and will be removed soon. Look at Konva change log for more information.";S.prototype[p]=function(){r.Util.error(v);const E=this.attrs[m];return E===void 0?f:E},o.Factory.addSetter(S,m,d,function(){r.Util.error(v)}),o.Factory.addOverloadedGetterSetter(S,m)},backCompat(S,m){r.Util.each(m,function(f,d){const p=S.prototype[d],v=U+r.Util._capitalize(f),E=C+r.Util._capitalize(f);function g(){p.apply(this,arguments),r.Util.error('"'+f+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}S.prototype[f]=g,S.prototype[v]=g,S.prototype[E]=g})},afterSetFilter(){this._filterUpToDate=!1}}}(Or)),Or}var jc;function Qt(){if(jc)return li;jc=1,Object.defineProperty(li,"__esModule",{value:!0}),li.Node=void 0;const o=Kl(),r=wr(),H=At(),U=Tt(),C=wt(),S=Rt(),m="absoluteOpacity",f="allEventListeners",d="absoluteTransform",p="absoluteScale",v="canvas",E="Change",g="children",c="konva",u="listening",b="mouseenter",N="mouseleave",D="pointerenter",h="pointerleave",s="touchenter",_="touchleave",T="set",G="Shape",Y=" ",x="stage",R="transform",O="Stage",L="visible",F=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(Y);let j=1,J=class Fr{constructor(y){this._id=j++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(y),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(y){(y===R||y===d)&&this._cache.get(y)?this._cache.get(y).dirty=!0:y?this._cache.delete(y):this._cache.clear()}_getCache(y,A){let B=this._cache.get(y);return(B===void 0||(y===R||y===d)&&B.dirty===!0)&&(B=A.call(this),this._cache.set(y,B)),B}_calculate(y,A,B){if(!this._attachedDepsListeners.get(y)){const z=A.map(q=>q+"Change.konva").join(Y);this.on(z,()=>{this._clearCache(y)}),this._attachedDepsListeners.set(y,!0)}return this._getCache(y,B)}_getCanvasCache(){return this._cache.get(v)}_clearSelfAndDescendantCache(y){this._clearCache(y),y===d&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(v)){const{scene:y,filter:A,hit:B,buffer:z}=this._cache.get(v);C.Util.releaseCanvas(y,A,B,z),this._cache.delete(v)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(y){const A=y||{};let B={};(A.x===void 0||A.y===void 0||A.width===void 0||A.height===void 0)&&(B=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let z=Math.ceil(A.width||B.width),q=Math.ceil(A.height||B.height),at=A.pixelRatio,w=A.x===void 0?Math.floor(B.x):A.x,nt=A.y===void 0?Math.floor(B.y):A.y,rt=A.offset||0,tt=A.drawBorder||!1,V=A.hitCanvasPixelRatio||1;if(!z||!q){C.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const k=Math.abs(Math.round(B.x)-w)>.5?1:0,X=Math.abs(Math.round(B.y)-nt)>.5?1:0;z+=rt*2+k,q+=rt*2+X,w-=rt,nt-=rt;const I=new o.SceneCanvas({pixelRatio:at,width:z,height:q}),lt=new o.SceneCanvas({pixelRatio:at,width:0,height:0,willReadFrequently:!0}),ut=new o.HitCanvas({pixelRatio:V,width:z,height:q}),ht=I.getContext(),mt=ut.getContext(),dt=new o.SceneCanvas({width:I.width/I.pixelRatio+Math.abs(w),height:I.height/I.pixelRatio+Math.abs(nt),pixelRatio:I.pixelRatio}),vt=dt.getContext();return ut.isCache=!0,I.isCache=!0,this._cache.delete(v),this._filterUpToDate=!1,A.imageSmoothingEnabled===!1&&(I.getContext()._context.imageSmoothingEnabled=!1,lt.getContext()._context.imageSmoothingEnabled=!1),ht.save(),mt.save(),vt.save(),ht.translate(-w,-nt),mt.translate(-w,-nt),vt.translate(-w,-nt),dt.x=w,dt.y=nt,this._isUnderCache=!0,this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(p),this.drawScene(I,this,dt),this.drawHit(ut,this),this._isUnderCache=!1,ht.restore(),mt.restore(),tt&&(ht.save(),ht.beginPath(),ht.rect(0,0,z,q),ht.closePath(),ht.setAttr("strokeStyle","red"),ht.setAttr("lineWidth",5),ht.stroke(),ht.restore()),this._cache.set(v,{scene:I,filter:lt,hit:ut,buffer:dt,x:w,y:nt}),this._requestDraw(),this}isCached(){return this._cache.has(v)}getClientRect(y){throw new Error('abstract "getClientRect" method call')}_transformedRect(y,A){const B=[{x:y.x,y:y.y},{x:y.x+y.width,y:y.y},{x:y.x+y.width,y:y.y+y.height},{x:y.x,y:y.y+y.height}];let z=1/0,q=1/0,at=-1/0,w=-1/0;const nt=this.getAbsoluteTransform(A);return B.forEach(function(rt){const tt=nt.point(rt);z===void 0&&(z=at=tt.x,q=w=tt.y),z=Math.min(z,tt.x),q=Math.min(q,tt.y),at=Math.max(at,tt.x),w=Math.max(w,tt.y)}),{x:z,y:q,width:at-z,height:w-q}}_drawCachedSceneCanvas(y){y.save(),y._applyOpacity(this),y._applyGlobalCompositeOperation(this);const A=this._getCanvasCache();y.translate(A.x,A.y);const B=this._getCachedSceneCanvas(),z=B.pixelRatio;y.drawImage(B._canvas,0,0,B.width/z,B.height/z),y.restore()}_drawCachedHitCanvas(y){const A=this._getCanvasCache(),B=A.hit;y.save(),y.translate(A.x,A.y),y.drawImage(B._canvas,0,0,B.width/B.pixelRatio,B.height/B.pixelRatio),y.restore()}_getCachedSceneCanvas(){let y=this.filters(),A=this._getCanvasCache(),B=A.scene,z=A.filter,q=z.getContext(),at,w,nt,rt;if(y){if(!this._filterUpToDate){const tt=B.pixelRatio;z.setSize(B.width/B.pixelRatio,B.height/B.pixelRatio);try{for(at=y.length,q.clear(),q.drawImage(B._canvas,0,0,B.getWidth()/tt,B.getHeight()/tt),w=q.getImageData(0,0,z.getWidth(),z.getHeight()),nt=0;nt<at;nt++){if(rt=y[nt],typeof rt!="function"){C.Util.error("Filter should be type of function, but got "+typeof rt+" instead. Please check correct filters");continue}rt.call(this,w),q.putImageData(w,0,0)}}catch(V){C.Util.error("Unable to apply filter. "+V.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return z}return B}on(y,A){if(this._cache&&this._cache.delete(f),arguments.length===3)return this._delegate.apply(this,arguments);const B=y.split(Y);for(let z=0;z<B.length;z++){const at=B[z].split("."),w=at[0],nt=at[1]||"";this.eventListeners[w]||(this.eventListeners[w]=[]),this.eventListeners[w].push({name:nt,handler:A})}return this}off(y,A){let B=(y||"").split(Y),z=B.length,q,at,w,nt,rt,tt;if(this._cache&&this._cache.delete(f),!y)for(at in this.eventListeners)this._off(at);for(q=0;q<z;q++)if(w=B[q],nt=w.split("."),rt=nt[0],tt=nt[1],rt)this.eventListeners[rt]&&this._off(rt,tt,A);else for(at in this.eventListeners)this._off(at,tt,A);return this}dispatchEvent(y){const A={target:this,type:y.type,evt:y};return this.fire(y.type,A),this}addEventListener(y,A){return this.on(y,function(B){A.call(this,B.evt)}),this}removeEventListener(y){return this.off(y),this}_delegate(y,A,B){const z=this;this.on(y,function(q){const at=q.target.findAncestors(A,!0,z);for(let w=0;w<at.length;w++)q=C.Util.cloneObject(q),q.currentTarget=at[w],B.call(at[w],q)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(p),this._clearSelfAndDescendantCache(x),this._clearSelfAndDescendantCache(L),this._clearSelfAndDescendantCache(u)}_remove(){this._clearCaches();const y=this.getParent();y&&y.children&&(y.children.splice(this.index,1),y._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(y){const A="get"+C.Util._capitalize(y);return C.Util._isFunction(this[A])?this[A]():this.attrs[y]}getAncestors(){let y=this.getParent(),A=[];for(;y;)A.push(y),y=y.getParent();return A}getAttrs(){return this.attrs||{}}setAttrs(y){return this._batchTransformChanges(()=>{let A,B;if(!y)return this;for(A in y)A!==g&&(B=T+C.Util._capitalize(A),C.Util._isFunction(this[B])?this[B](y[A]):this._setAttr(A,y[A]))}),this}isListening(){return this._getCache(u,this._isListening)}_isListening(y){if(!this.listening())return!1;const B=this.getParent();return B&&B!==y&&this!==y?B._isListening(y):!0}isVisible(){return this._getCache(L,this._isVisible)}_isVisible(y){if(!this.visible())return!1;const B=this.getParent();return B&&B!==y&&this!==y?B._isVisible(y):!0}shouldDrawHit(y,A=!1){if(y)return this._isVisible(y)&&this._isListening(y);const B=this.getLayer();let z=!1;r.DD._dragElements.forEach(at=>{at.dragStatus==="dragging"&&(at.node.nodeType==="Stage"||at.node.getLayer()===B)&&(z=!0)});const q=!A&&!U.Konva.hitOnDragEnabled&&(z||U.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!q}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let y=this.getDepth(),A=this,B=0,z,q,at,w;function nt(tt){for(z=[],q=tt.length,at=0;at<q;at++)w=tt[at],B++,w.nodeType!==G&&(z=z.concat(w.getChildren().slice())),w._id===A._id&&(at=q);z.length>0&&z[0].getDepth()<=y&&nt(z)}const rt=this.getStage();return A.nodeType!==O&&rt&&nt(rt.getChildren()),B}getDepth(){let y=0,A=this.parent;for(;A;)y++,A=A.parent;return y}_batchTransformChanges(y){this._batchingTransformChange=!0,y(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(R),this._clearSelfAndDescendantCache(d)),this._needClearTransformCache=!1}setPosition(y){return this._batchTransformChanges(()=>{this.x(y.x),this.y(y.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const y=this.getStage();if(!y)return null;const A=y.getPointerPosition();if(!A)return null;const B=this.getAbsoluteTransform().copy();return B.invert(),B.point(A)}getAbsolutePosition(y){let A=!1,B=this.parent;for(;B;){if(B.isCached()){A=!0;break}B=B.parent}A&&!y&&(y=!0);const z=this.getAbsoluteTransform(y).getMatrix(),q=new C.Transform,at=this.offset();return q.m=z.slice(),q.translate(at.x,at.y),q.getTranslation()}setAbsolutePosition(y){const{x:A,y:B,...z}=this._clearTransform();this.attrs.x=A,this.attrs.y=B,this._clearCache(R);const q=this._getAbsoluteTransform().copy();return q.invert(),q.translate(y.x,y.y),y={x:this.attrs.x+q.getTranslation().x,y:this.attrs.y+q.getTranslation().y},this._setTransform(z),this.setPosition({x:y.x,y:y.y}),this._clearCache(R),this._clearSelfAndDescendantCache(d),this}_setTransform(y){let A;for(A in y)this.attrs[A]=y[A]}_clearTransform(){const y={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,y}move(y){let A=y.x,B=y.y,z=this.x(),q=this.y();return A!==void 0&&(z+=A),B!==void 0&&(q+=B),this.setPosition({x:z,y:q}),this}_eachAncestorReverse(y,A){let B=[],z=this.getParent(),q,at;if(!(A&&A._id===this._id)){for(B.unshift(this);z&&(!A||z._id!==A._id);)B.unshift(z),z=z.parent;for(q=B.length,at=0;at<q;at++)y(B[at])}}rotate(y){return this.rotation(this.rotation()+y),this}moveToTop(){if(!this.parent)return C.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const y=this.index,A=this.parent.getChildren().length;return y<A-1?(this.parent.children.splice(y,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return C.Util.warn("Node has no parent. moveUp function is ignored."),!1;const y=this.index,A=this.parent.getChildren().length;return y<A-1?(this.parent.children.splice(y,1),this.parent.children.splice(y+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return C.Util.warn("Node has no parent. moveDown function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.splice(y-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return C.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const y=this.index;return y>0?(this.parent.children.splice(y,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(y){if(!this.parent)return C.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(y<0||y>=this.parent.children.length)&&C.Util.warn("Unexpected value "+y+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const A=this.index;return this.parent.children.splice(A,1),this.parent.children.splice(y,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(m,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let y=this.opacity();const A=this.getParent();return A&&!A._isUnderCache&&(y*=A.getAbsoluteOpacity()),y}moveTo(y){return this.getParent()!==y&&(this._remove(),y.add(this)),this}toObject(){let y=this.getAttrs(),A,B,z,q,at;const w={attrs:{},className:this.getClassName()};for(A in y)B=y[A],at=C.Util.isObject(B)&&!C.Util._isPlainObject(B)&&!C.Util._isArray(B),!at&&(z=typeof this[A]=="function"&&this[A],delete y[A],q=z?z.call(this):null,y[A]=B,q!==B&&(w.attrs[A]=B));return C.Util._prepareToStringify(w)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(y,A,B){const z=[];A&&this._isMatch(y)&&z.push(this);let q=this.parent;for(;q;){if(q===B)return z;q._isMatch(y)&&z.push(q),q=q.parent}return z}isAncestorOf(y){return!1}findAncestor(y,A,B){return this.findAncestors(y,A,B)[0]}_isMatch(y){if(!y)return!1;if(typeof y=="function")return y(this);let A=y.replace(/ /g,"").split(","),B=A.length,z,q;for(z=0;z<B;z++)if(q=A[z],C.Util.isValidSelector(q)||(C.Util.warn('Selector "'+q+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),C.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),C.Util.warn("Konva is awesome, right?")),q.charAt(0)==="#"){if(this.id()===q.slice(1))return!0}else if(q.charAt(0)==="."){if(this.hasName(q.slice(1)))return!0}else if(this.className===q||this.nodeType===q)return!0;return!1}getLayer(){const y=this.getParent();return y?y.getLayer():null}getStage(){return this._getCache(x,this._getStage)}_getStage(){const y=this.getParent();return y?y.getStage():null}fire(y,A={},B){return A.target=A.target||this,B?this._fireAndBubble(y,A):this._fire(y,A),this}getAbsoluteTransform(y){return y?this._getAbsoluteTransform(y):this._getCache(d,this._getAbsoluteTransform)}_getAbsoluteTransform(y){let A;if(y)return A=new C.Transform,this._eachAncestorReverse(function(B){const z=B.transformsEnabled();z==="all"?A.multiply(B.getTransform()):z==="position"&&A.translate(B.x()-B.offsetX(),B.y()-B.offsetY())},y),A;{A=this._cache.get(d)||new C.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(A):A.reset();const B=this.transformsEnabled();if(B==="all")A.multiply(this.getTransform());else if(B==="position"){const z=this.attrs.x||0,q=this.attrs.y||0,at=this.attrs.offsetX||0,w=this.attrs.offsetY||0;A.translate(z-at,q-w)}return A.dirty=!1,A}}getAbsoluteScale(y){let A=this;for(;A;)A._isUnderCache&&(y=A),A=A.getParent();const z=this.getAbsoluteTransform(y).decompose();return{x:z.scaleX,y:z.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(R,this._getTransform)}_getTransform(){var y,A;const B=this._cache.get(R)||new C.Transform;B.reset();const z=this.x(),q=this.y(),at=U.Konva.getAngle(this.rotation()),w=(y=this.attrs.scaleX)!==null&&y!==void 0?y:1,nt=(A=this.attrs.scaleY)!==null&&A!==void 0?A:1,rt=this.attrs.skewX||0,tt=this.attrs.skewY||0,V=this.attrs.offsetX||0,k=this.attrs.offsetY||0;return(z!==0||q!==0)&&B.translate(z,q),at!==0&&B.rotate(at),(rt!==0||tt!==0)&&B.skew(rt,tt),(w!==1||nt!==1)&&B.scale(w,nt),(V!==0||k!==0)&&B.translate(-1*V,-1*k),B.dirty=!1,B}clone(y){let A=C.Util.cloneObject(this.attrs),B,z,q,at,w;for(B in y)A[B]=y[B];const nt=new this.constructor(A);for(B in this.eventListeners)for(z=this.eventListeners[B],q=z.length,at=0;at<q;at++)w=z[at],w.name.indexOf(c)<0&&(nt.eventListeners[B]||(nt.eventListeners[B]=[]),nt.eventListeners[B].push(w));return nt}_toKonvaCanvas(y){y=y||{};const A=this.getClientRect(),B=this.getStage(),z=y.x!==void 0?y.x:Math.floor(A.x),q=y.y!==void 0?y.y:Math.floor(A.y),at=y.pixelRatio||1,w=new o.SceneCanvas({width:y.width||Math.ceil(A.width)||(B?B.width():0),height:y.height||Math.ceil(A.height)||(B?B.height():0),pixelRatio:at}),nt=w.getContext(),rt=new o.SceneCanvas({width:w.width/w.pixelRatio+Math.abs(z),height:w.height/w.pixelRatio+Math.abs(q),pixelRatio:w.pixelRatio});return y.imageSmoothingEnabled===!1&&(nt._context.imageSmoothingEnabled=!1),nt.save(),(z||q)&&nt.translate(-1*z,-1*q),this.drawScene(w,void 0,rt),nt.restore(),w}toCanvas(y){return this._toKonvaCanvas(y)._canvas}toDataURL(y){y=y||{};const A=y.mimeType||null,B=y.quality||null,z=this._toKonvaCanvas(y).toDataURL(A,B);return y.callback&&y.callback(z),z}toImage(y){return new Promise((A,B)=>{try{const z=y?.callback;z&&delete y.callback,C.Util._urlToImage(this.toDataURL(y),function(q){A(q),z?.(q)})}catch(z){B(z)}})}toBlob(y){return new Promise((A,B)=>{try{const z=y?.callback;z&&delete y.callback,this.toCanvas(y).toBlob(q=>{A(q),z?.(q)},y?.mimeType,y?.quality)}catch(z){B(z)}})}setSize(y){return this.width(y.width),this.height(y.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():U.Konva.dragDistance}_off(y,A,B){let z=this.eventListeners[y],q,at,w;for(q=0;q<z.length;q++)if(at=z[q].name,w=z[q].handler,(at!=="konva"||A==="konva")&&(!A||at===A)&&(!B||B===w)){if(z.splice(q,1),z.length===0){delete this.eventListeners[y];break}q--}}_fireChangeEvent(y,A,B){this._fire(y+E,{oldVal:A,newVal:B})}addName(y){if(!this.hasName(y)){const A=this.name(),B=A?A+" "+y:y;this.name(B)}return this}hasName(y){if(!y)return!1;const A=this.name();return A?(A||"").split(/\s/g).indexOf(y)!==-1:!1}removeName(y){const A=(this.name()||"").split(/\s/g),B=A.indexOf(y);return B!==-1&&(A.splice(B,1),this.name(A.join(" "))),this}setAttr(y,A){const B=this[T+C.Util._capitalize(y)];return C.Util._isFunction(B)?B.call(this,A):this._setAttr(y,A),this}_requestDraw(){if(U.Konva.autoDrawEnabled){const y=this.getLayer()||this.getStage();y?.batchDraw()}}_setAttr(y,A){const B=this.attrs[y];B===A&&!C.Util.isObject(A)||(A==null?delete this.attrs[y]:this.attrs[y]=A,this._shouldFireChangeEvents&&this._fireChangeEvent(y,B,A),this._requestDraw())}_setComponentAttr(y,A,B){let z;B!==void 0&&(z=this.attrs[y],z||(this.attrs[y]=this.getAttr(y)),this.attrs[y][A]=B,this._fireChangeEvent(y,z,B))}_fireAndBubble(y,A,B){A&&this.nodeType===G&&(A.target=this);const z=[b,N,D,h,s,_];if(!(z.indexOf(y)!==-1&&(B&&(this===B||this.isAncestorOf&&this.isAncestorOf(B))||this.nodeType==="Stage"&&!B))){this._fire(y,A);const at=z.indexOf(y)!==-1&&B&&B.isAncestorOf&&B.isAncestorOf(this)&&!B.isAncestorOf(this.parent);(A&&!A.cancelBubble||!A)&&this.parent&&this.parent.isListening()&&!at&&(B&&B.parent?this._fireAndBubble.call(this.parent,y,A,B):this._fireAndBubble.call(this.parent,y,A))}}_getProtoListeners(y){var A,B,z;const q=(A=this._cache.get(f))!==null&&A!==void 0?A:{};let at=q?.[y];if(at===void 0){at=[];let w=Object.getPrototypeOf(this);for(;w;){const nt=(z=(B=w.eventListeners)===null||B===void 0?void 0:B[y])!==null&&z!==void 0?z:[];at.push(...nt),w=Object.getPrototypeOf(w)}q[y]=at,this._cache.set(f,q)}return at}_fire(y,A){A=A||{},A.currentTarget=this,A.type=y;const B=this._getProtoListeners(y);if(B)for(let q=0;q<B.length;q++)B[q].handler.call(this,A);const z=this.eventListeners[y];if(z)for(let q=0;q<z.length;q++)z[q].handler.call(this,A)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(y){const A=y?y.pointerId:void 0,B=this.getStage(),z=this.getAbsolutePosition();if(!B)return;const q=B._getPointerById(A)||B._changedPointerPositions[0]||z;r.DD._dragElements.set(this._id,{node:this,startPointerPos:q,offset:{x:q.x-z.x,y:q.y-z.y},dragStatus:"ready",pointerId:A})}startDrag(y,A=!0){r.DD._dragElements.has(this._id)||this._createDragElement(y);const B=r.DD._dragElements.get(this._id);B.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:y&&y.evt},A)}_setDragPosition(y,A){const B=this.getStage()._getPointerById(A.pointerId);if(!B)return;let z={x:B.x-A.offset.x,y:B.y-A.offset.y};const q=this.dragBoundFunc();if(q!==void 0){const at=q.call(this,z,y);at?z=at:C.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==z.x||this._lastPos.y!==z.y)&&(this.setAbsolutePosition(z),this._requestDraw()),this._lastPos=z}stopDrag(y){const A=r.DD._dragElements.get(this._id);A&&(A.dragStatus="stopped"),r.DD._endDragBefore(y),r.DD._endDragAfter(y)}setDraggable(y){this._setAttr("draggable",y),this._dragChange()}isDragging(){const y=r.DD._dragElements.get(this._id);return y?y.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(y){if(!(!(y.evt.button!==void 0)||U.Konva.dragButtons.indexOf(y.evt.button)>=0)||this.isDragging())return;let z=!1;r.DD._dragElements.forEach(q=>{this.isAncestorOf(q.node)&&(z=!0)}),z||this._createDragElement(y)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const A=r.DD._dragElements.get(this._id),B=A&&A.dragStatus==="dragging",z=A&&A.dragStatus==="ready";B?this.stopDrag():z&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(y={x:0,y:0}){const A=this.getStage();if(!A)return!1;const B={x:-y.x,y:-y.y,width:A.width()+2*y.x,height:A.height()+2*y.y};return C.Util.haveIntersection(B,this.getClientRect())}static create(y,A){return C.Util._isString(y)&&(y=JSON.parse(y)),this._createNode(y,A)}static _createNode(y,A){let B=Fr.prototype.getClassName.call(y),z=y.children,q,at,w;A&&(y.attrs.container=A),U.Konva[B]||(C.Util.warn('Can not find a node with class name "'+B+'". Fallback to "Shape".'),B="Shape");const nt=U.Konva[B];if(q=new nt(y.attrs),z)for(at=z.length,w=0;w<at;w++)q.add(Fr._createNode(z[w]));return q}};li.Node=J,J.prototype.nodeType="Node",J.prototype._attrsAffectingSize=[],J.prototype.eventListeners={},J.prototype.on.call(J.prototype,F,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(R),this._clearSelfAndDescendantCache(d)}),J.prototype.on.call(J.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(L)}),J.prototype.on.call(J.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(u)}),J.prototype.on.call(J.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(m)});const K=H.Factory.addGetterSetter;return K(J,"zIndex"),K(J,"absolutePosition"),K(J,"position"),K(J,"x",0,(0,S.getNumberValidator)()),K(J,"y",0,(0,S.getNumberValidator)()),K(J,"globalCompositeOperation","source-over",(0,S.getStringValidator)()),K(J,"opacity",1,(0,S.getNumberValidator)()),K(J,"name","",(0,S.getStringValidator)()),K(J,"id","",(0,S.getStringValidator)()),K(J,"rotation",0,(0,S.getNumberValidator)()),H.Factory.addComponentsGetterSetter(J,"scale",["x","y"]),K(J,"scaleX",1,(0,S.getNumberValidator)()),K(J,"scaleY",1,(0,S.getNumberValidator)()),H.Factory.addComponentsGetterSetter(J,"skew",["x","y"]),K(J,"skewX",0,(0,S.getNumberValidator)()),K(J,"skewY",0,(0,S.getNumberValidator)()),H.Factory.addComponentsGetterSetter(J,"offset",["x","y"]),K(J,"offsetX",0,(0,S.getNumberValidator)()),K(J,"offsetY",0,(0,S.getNumberValidator)()),K(J,"dragDistance",void 0,(0,S.getNumberValidator)()),K(J,"width",0,(0,S.getNumberValidator)()),K(J,"height",0,(0,S.getNumberValidator)()),K(J,"listening",!0,(0,S.getBooleanValidator)()),K(J,"preventDefault",!0,(0,S.getBooleanValidator)()),K(J,"filters",void 0,function(Z){return this._filterUpToDate=!1,Z}),K(J,"visible",!0,(0,S.getBooleanValidator)()),K(J,"transformsEnabled","all",(0,S.getStringValidator)()),K(J,"size"),K(J,"dragBoundFunc"),K(J,"draggable",!1,(0,S.getBooleanValidator)()),H.Factory.backCompat(J,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),li}var si={},Xc;function wl(){if(Xc)return si;Xc=1,Object.defineProperty(si,"__esModule",{value:!0}),si.Container=void 0;const o=At(),r=Qt(),H=Rt();let U=class extends r.Node{constructor(){super(...arguments),this.children=[]}getChildren(S){const m=this.children||[];return S?m.filter(S):m}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(S=>{S.parent=null,S.index=0,S.destroy()}),this.children=[],this._requestDraw(),this}add(...S){if(S.length===0)return this;if(S.length>1){for(let f=0;f<S.length;f++)this.add(S[f]);return this}const m=S[0];return m.getParent()?(m.moveTo(this),this):(this._validateAdd(m),m.index=this.getChildren().length,m.parent=this,m._clearCaches(),this.getChildren().push(m),this._fire("add",{child:m}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(S){return this._generalFind(S,!1)}findOne(S){const m=this._generalFind(S,!0);return m.length>0?m[0]:void 0}_generalFind(S,m){const f=[];return this._descendants(d=>{const p=d._isMatch(S);return p&&f.push(d),!!(p&&m)}),f}_descendants(S){let m=!1;const f=this.getChildren();for(const d of f){if(m=S(d),m)return!0;if(d.hasChildren()&&(m=d._descendants(S),m))return!0}return!1}toObject(){const S=r.Node.prototype.toObject.call(this);return S.children=[],this.getChildren().forEach(m=>{S.children.push(m.toObject())}),S}isAncestorOf(S){let m=S.getParent();for(;m;){if(m._id===this._id)return!0;m=m.getParent()}return!1}clone(S){const m=r.Node.prototype.clone.call(this,S);return this.getChildren().forEach(function(f){m.add(f.clone())}),m}getAllIntersections(S){const m=[];return this.find("Shape").forEach(f=>{f.isVisible()&&f.intersects(S)&&m.push(f)}),m}_clearSelfAndDescendantCache(S){var m;super._clearSelfAndDescendantCache(S),!this.isCached()&&((m=this.children)===null||m===void 0||m.forEach(function(f){f._clearSelfAndDescendantCache(S)}))}_setChildrenIndices(){var S;(S=this.children)===null||S===void 0||S.forEach(function(m,f){m.index=f}),this._requestDraw()}drawScene(S,m,f){const d=this.getLayer(),p=S||d&&d.getCanvas(),v=p&&p.getContext(),E=this._getCanvasCache(),g=E&&E.scene,c=p&&p.isCache;if(!this.isVisible()&&!c)return this;if(g){v.save();const u=this.getAbsoluteTransform(m).getMatrix();v.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedSceneCanvas(v),v.restore()}else this._drawChildren("drawScene",p,m,f);return this}drawHit(S,m){if(!this.shouldDrawHit(m))return this;const f=this.getLayer(),d=S||f&&f.hitCanvas,p=d&&d.getContext(),v=this._getCanvasCache();if(v&&v.hit){p.save();const g=this.getAbsoluteTransform(m).getMatrix();p.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",d,m);return this}_drawChildren(S,m,f,d){var p;const v=m&&m.getContext(),E=this.clipWidth(),g=this.clipHeight(),c=this.clipFunc(),u=typeof E=="number"&&typeof g=="number"||c,b=f===this;if(u){v.save();const D=this.getAbsoluteTransform(f);let h=D.getMatrix();v.transform(h[0],h[1],h[2],h[3],h[4],h[5]),v.beginPath();let s;if(c)s=c.call(this,v,this);else{const _=this.clipX(),T=this.clipY();v.rect(_||0,T||0,E,g)}v.clip.apply(v,s),h=D.copy().invert().getMatrix(),v.transform(h[0],h[1],h[2],h[3],h[4],h[5])}const N=!b&&this.globalCompositeOperation()!=="source-over"&&S==="drawScene";N&&(v.save(),v._applyGlobalCompositeOperation(this)),(p=this.children)===null||p===void 0||p.forEach(function(D){D[S](m,f,d)}),N&&v.restore(),u&&v.restore()}getClientRect(S={}){var m;const f=S.skipTransform,d=S.relativeTo;let p,v,E,g,c={x:1/0,y:1/0,width:0,height:0};const u=this;(m=this.children)===null||m===void 0||m.forEach(function(D){if(!D.visible())return;const h=D.getClientRect({relativeTo:u,skipShadow:S.skipShadow,skipStroke:S.skipStroke});h.width===0&&h.height===0||(p===void 0?(p=h.x,v=h.y,E=h.x+h.width,g=h.y+h.height):(p=Math.min(p,h.x),v=Math.min(v,h.y),E=Math.max(E,h.x+h.width),g=Math.max(g,h.y+h.height)))});const b=this.find("Shape");let N=!1;for(let D=0;D<b.length;D++)if(b[D]._isVisible(this)){N=!0;break}return N&&p!==void 0?c={x:p,y:v,width:E-p,height:g-v}:c={x:0,y:0,width:0,height:0},f?c:this._transformedRect(c,d)}};return si.Container=U,o.Factory.addComponentsGetterSetter(U,"clip",["x","y","width","height"]),o.Factory.addGetterSetter(U,"clipX",void 0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(U,"clipY",void 0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(U,"clipWidth",void 0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(U,"clipHeight",void 0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(U,"clipFunc"),si}var Dr={},Ua={},Qc;function $h(){if(Qc)return Ua;Qc=1,Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.getCapturedShape=U,Ua.createEvent=C,Ua.hasPointerCapture=S,Ua.setPointerCapture=m,Ua.releaseCapture=f;const o=Tt(),r=new Map,H=o.Konva._global.PointerEvent!==void 0;function U(d){return r.get(d)}function C(d){return{evt:d,pointerId:d.pointerId}}function S(d,p){return r.get(d)===p}function m(d,p){f(d),p.getStage()&&(r.set(d,p),H&&p._fire("gotpointercapture",C(new PointerEvent("gotpointercapture"))))}function f(d,p){const v=r.get(d);if(!v)return;const E=v.getStage();E&&E.content,r.delete(d),H&&v._fire("lostpointercapture",C(new PointerEvent("lostpointercapture")))}return Ua}var Zc;function bd(){return Zc||(Zc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Stage=o.stages=void 0;const r=wt(),H=At(),U=wl(),C=Tt(),S=Kl(),m=wr(),f=Tt(),d=$h(),p="Stage",v="string",E="px",g="mouseout",c="mouseleave",u="mouseover",b="mouseenter",N="mousemove",D="mousedown",h="mouseup",s="pointermove",_="pointerdown",T="pointerup",G="pointercancel",Y="lostpointercapture",x="pointerout",R="pointerleave",O="pointerover",L="pointerenter",F="contextmenu",j="touchstart",J="touchend",K="touchmove",Z="touchcancel",y="wheel",A=5,B=[[b,"_pointerenter"],[D,"_pointerdown"],[N,"_pointermove"],[h,"_pointerup"],[c,"_pointerleave"],[j,"_pointerdown"],[K,"_pointermove"],[J,"_pointerup"],[Z,"_pointercancel"],[u,"_pointerover"],[y,"_wheel"],[F,"_contextmenu"],[_,"_pointerdown"],[s,"_pointermove"],[T,"_pointerup"],[G,"_pointercancel"],[R,"_pointerleave"],[Y,"_lostpointercapture"]],z={mouse:{[x]:g,[R]:c,[O]:u,[L]:b,[s]:N,[_]:D,[T]:h,[G]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[x]:"touchout",[R]:"touchleave",[O]:"touchover",[L]:"touchenter",[s]:K,[_]:j,[T]:J,[G]:Z,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[x]:x,[R]:R,[O]:O,[L]:L,[s]:s,[_]:_,[T]:T,[G]:G,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},q=tt=>tt.indexOf("pointer")>=0?"pointer":tt.indexOf("touch")>=0?"touch":"mouse",at=tt=>{const V=q(tt);if(V==="pointer")return C.Konva.pointerEventsEnabled&&z.pointer;if(V==="touch")return z.touch;if(V==="mouse")return z.mouse};function w(tt={}){return(tt.clipFunc||tt.clipWidth||tt.clipHeight)&&r.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),tt}const nt="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";o.stages=[];class rt extends U.Container{constructor(V){super(w(V)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),o.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{w(this.attrs)}),this._checkVisibility()}_validateAdd(V){const k=V.getType()==="Layer",X=V.getType()==="FastLayer";k||X||r.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const V=this.visible()?"":"none";this.content.style.display=V}setContainer(V){if(typeof V===v){let k;if(V.charAt(0)==="."){const X=V.slice(1);V=document.getElementsByClassName(X)[0]}else V.charAt(0)!=="#"?k=V:k=V.slice(1),V=document.getElementById(k);if(!V)throw"Can not find container in document with id "+k}return this._setAttr("container",V),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),V.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const V=this.children,k=V.length;for(let X=0;X<k;X++)V[X].clear();return this}clone(V){return V||(V={}),V.container=typeof document<"u"&&document.createElement("div"),U.Container.prototype.clone.call(this,V)}destroy(){super.destroy();const V=this.content;V&&r.Util._isInDocument(V)&&this.container().removeChild(V);const k=o.stages.indexOf(this);return k>-1&&o.stages.splice(k,1),r.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const V=this._pointerPositions[0]||this._changedPointerPositions[0];return V?{x:V.x,y:V.y}:(r.Util.warn(nt),null)}_getPointerById(V){return this._pointerPositions.find(k=>k.id===V)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(V){V=V||{},V.x=V.x||0,V.y=V.y||0,V.width=V.width||this.width(),V.height=V.height||this.height();const k=new S.SceneCanvas({width:V.width,height:V.height,pixelRatio:V.pixelRatio||1}),X=k.getContext()._context,I=this.children;return(V.x||V.y)&&X.translate(-1*V.x,-1*V.y),I.forEach(function(lt){if(!lt.isVisible())return;const ut=lt._toKonvaCanvas(V);X.drawImage(ut._canvas,V.x,V.y,ut.getWidth()/ut.getPixelRatio(),ut.getHeight()/ut.getPixelRatio())}),k}getIntersection(V){if(!V)return null;const k=this.children,X=k.length,I=X-1;for(let lt=I;lt>=0;lt--){const ut=k[lt].getIntersection(V);if(ut)return ut}return null}_resizeDOM(){const V=this.width(),k=this.height();this.content&&(this.content.style.width=V+E,this.content.style.height=k+E),this.bufferCanvas.setSize(V,k),this.bufferHitCanvas.setSize(V,k),this.children.forEach(X=>{X.setSize({width:V,height:k}),X.draw()})}add(V,...k){if(arguments.length>1){for(let I=0;I<arguments.length;I++)this.add(arguments[I]);return this}super.add(V);const X=this.children.length;return X>A&&r.Util.warn("The stage has "+X+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),V.setSize({width:this.width(),height:this.height()}),V.draw(),C.Konva.isBrowser&&this.content.appendChild(V.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(V){return d.hasPointerCapture(V,this)}setPointerCapture(V){d.setPointerCapture(V,this)}releaseCapture(V){d.releaseCapture(V,this)}getLayers(){return this.children}_bindContentEvents(){C.Konva.isBrowser&&B.forEach(([V,k])=>{this.content.addEventListener(V,X=>{this[k](X)},{passive:!1})})}_pointerenter(V){this.setPointersPositions(V);const k=at(V.type);k&&this._fire(k.pointerenter,{evt:V,target:this,currentTarget:this})}_pointerover(V){this.setPointersPositions(V);const k=at(V.type);k&&this._fire(k.pointerover,{evt:V,target:this,currentTarget:this})}_getTargetShape(V){let k=this[V+"targetShape"];return k&&!k.getStage()&&(k=null),k}_pointerleave(V){const k=at(V.type),X=q(V.type);if(!k)return;this.setPointersPositions(V);const I=this._getTargetShape(X),lt=!(C.Konva.isDragging()||C.Konva.isTransforming())||C.Konva.hitOnDragEnabled;I&&lt?(I._fireAndBubble(k.pointerout,{evt:V}),I._fireAndBubble(k.pointerleave,{evt:V}),this._fire(k.pointerleave,{evt:V,target:this,currentTarget:this}),this[X+"targetShape"]=null):lt&&(this._fire(k.pointerleave,{evt:V,target:this,currentTarget:this}),this._fire(k.pointerout,{evt:V,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(V){const k=at(V.type),X=q(V.type);if(!k)return;this.setPointersPositions(V);let I=!1;this._changedPointerPositions.forEach(lt=>{const ut=this.getIntersection(lt);if(m.DD.justDragged=!1,C.Konva["_"+X+"ListenClick"]=!0,!ut||!ut.isListening()){this[X+"ClickStartShape"]=void 0;return}C.Konva.capturePointerEventsEnabled&&ut.setPointerCapture(lt.id),this[X+"ClickStartShape"]=ut,ut._fireAndBubble(k.pointerdown,{evt:V,pointerId:lt.id}),I=!0;const ht=V.type.indexOf("touch")>=0;ut.preventDefault()&&V.cancelable&&ht&&V.preventDefault()}),I||this._fire(k.pointerdown,{evt:V,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(V){const k=at(V.type),X=q(V.type);if(!k||(C.Konva.isDragging()&&m.DD.node.preventDefault()&&V.cancelable&&V.preventDefault(),this.setPointersPositions(V),!(!(C.Konva.isDragging()||C.Konva.isTransforming())||C.Konva.hitOnDragEnabled)))return;const lt={};let ut=!1;const ht=this._getTargetShape(X);this._changedPointerPositions.forEach(mt=>{const dt=d.getCapturedShape(mt.id)||this.getIntersection(mt),vt=mt.id,Ct={evt:V,pointerId:vt},Dt=ht!==dt;if(Dt&&ht&&(ht._fireAndBubble(k.pointerout,{...Ct},dt),ht._fireAndBubble(k.pointerleave,{...Ct},dt)),dt){if(lt[dt._id])return;lt[dt._id]=!0}dt&&dt.isListening()?(ut=!0,Dt&&(dt._fireAndBubble(k.pointerover,{...Ct},ht),dt._fireAndBubble(k.pointerenter,{...Ct},ht),this[X+"targetShape"]=dt),dt._fireAndBubble(k.pointermove,{...Ct})):ht&&(this._fire(k.pointerover,{evt:V,target:this,currentTarget:this,pointerId:vt}),this[X+"targetShape"]=null)}),ut||this._fire(k.pointermove,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(V){const k=at(V.type),X=q(V.type);if(!k)return;this.setPointersPositions(V);const I=this[X+"ClickStartShape"],lt=this[X+"ClickEndShape"],ut={};let ht=!1;this._changedPointerPositions.forEach(mt=>{const dt=d.getCapturedShape(mt.id)||this.getIntersection(mt);if(dt){if(dt.releaseCapture(mt.id),ut[dt._id])return;ut[dt._id]=!0}const vt=mt.id,Ct={evt:V,pointerId:vt};let Dt=!1;C.Konva["_"+X+"InDblClickWindow"]?(Dt=!0,clearTimeout(this[X+"DblTimeout"])):m.DD.justDragged||(C.Konva["_"+X+"InDblClickWindow"]=!0,clearTimeout(this[X+"DblTimeout"])),this[X+"DblTimeout"]=setTimeout(function(){C.Konva["_"+X+"InDblClickWindow"]=!1},C.Konva.dblClickWindow),dt&&dt.isListening()?(ht=!0,this[X+"ClickEndShape"]=dt,dt._fireAndBubble(k.pointerup,{...Ct}),C.Konva["_"+X+"ListenClick"]&&I&&I===dt&&(dt._fireAndBubble(k.pointerclick,{...Ct}),Dt&&lt&&lt===dt&&dt._fireAndBubble(k.pointerdblclick,{...Ct}))):(this[X+"ClickEndShape"]=null,C.Konva["_"+X+"ListenClick"]&&this._fire(k.pointerclick,{evt:V,target:this,currentTarget:this,pointerId:vt}),Dt&&this._fire(k.pointerdblclick,{evt:V,target:this,currentTarget:this,pointerId:vt}))}),ht||this._fire(k.pointerup,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),C.Konva["_"+X+"ListenClick"]=!1,V.cancelable&&X!=="touch"&&X!=="pointer"&&V.preventDefault()}_contextmenu(V){this.setPointersPositions(V);const k=this.getIntersection(this.getPointerPosition());k&&k.isListening()?k._fireAndBubble(F,{evt:V}):this._fire(F,{evt:V,target:this,currentTarget:this})}_wheel(V){this.setPointersPositions(V);const k=this.getIntersection(this.getPointerPosition());k&&k.isListening()?k._fireAndBubble(y,{evt:V}):this._fire(y,{evt:V,target:this,currentTarget:this})}_pointercancel(V){this.setPointersPositions(V);const k=d.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());k&&k._fireAndBubble(T,d.createEvent(V)),d.releaseCapture(V.pointerId)}_lostpointercapture(V){d.releaseCapture(V.pointerId)}setPointersPositions(V){const k=this._getContentPosition();let X=null,I=null;V=V||window.event,V.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(V.touches,lt=>{this._pointerPositions.push({id:lt.identifier,x:(lt.clientX-k.left)/k.scaleX,y:(lt.clientY-k.top)/k.scaleY})}),Array.prototype.forEach.call(V.changedTouches||V.touches,lt=>{this._changedPointerPositions.push({id:lt.identifier,x:(lt.clientX-k.left)/k.scaleX,y:(lt.clientY-k.top)/k.scaleY})})):(X=(V.clientX-k.left)/k.scaleX,I=(V.clientY-k.top)/k.scaleY,this.pointerPos={x:X,y:I},this._pointerPositions=[{x:X,y:I,id:r.Util._getFirstPointerId(V)}],this._changedPointerPositions=[{x:X,y:I,id:r.Util._getFirstPointerId(V)}])}_setPointerPosition(V){r.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(V)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const V=this.content.getBoundingClientRect();return{top:V.top,left:V.left,scaleX:V.width/this.content.clientWidth||1,scaleY:V.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new S.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new S.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!C.Konva.isBrowser)return;const V=this.container();if(!V)throw"Stage has no container. A container is required.";V.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),V.appendChild(this.content),this._resizeDOM()}cache(){return r.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(V){V.batchDraw()}),this}}o.Stage=rt,rt.prototype.nodeType=p,(0,f._registerNode)(rt),H.Factory.addGetterSetter(rt,"container"),C.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{o.stages.forEach(tt=>{tt.batchDraw()})})}(Dr)),Dr}var ri={},Gr={},Jc;function ue(){return Jc||(Jc=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Shape=o.shapes=void 0;const r=Tt(),H=wt(),U=At(),C=Qt(),S=Rt(),m=Tt(),f=$h(),d="hasShadow",p="shadowRGBA",v="patternImage",E="linearGradient",g="radialGradient";let c;function u(){return c||(c=H.Util.createCanvasElement().getContext("2d"),c)}o.shapes={};function b(R){const O=this.attrs.fillRule;O?R.fill(O):R.fill()}function N(R){R.stroke()}function D(R){const O=this.attrs.fillRule;O?R.fill(O):R.fill()}function h(R){R.stroke()}function s(){this._clearCache(d)}function _(){this._clearCache(p)}function T(){this._clearCache(v)}function G(){this._clearCache(E)}function Y(){this._clearCache(g)}class x extends C.Node{constructor(O){super(O);let L;for(;L=H.Util.getRandomColor(),!(L&&!(L in o.shapes)););this.colorKey=L,o.shapes[L]=this}getContext(){return H.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return H.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(d,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(v,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const L=u().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(L&&L.setTransform){const F=new H.Transform;F.translate(this.fillPatternX(),this.fillPatternY()),F.rotate(r.Konva.getAngle(this.fillPatternRotation())),F.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),F.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const j=F.getMatrix(),J=typeof DOMMatrix>"u"?{a:j[0],b:j[1],c:j[2],d:j[3],e:j[4],f:j[5]}:new DOMMatrix(j);L.setTransform(J)}return L}}_getLinearGradient(){return this._getCache(E,this.__getLinearGradient)}__getLinearGradient(){const O=this.fillLinearGradientColorStops();if(O){const L=u(),F=this.fillLinearGradientStartPoint(),j=this.fillLinearGradientEndPoint(),J=L.createLinearGradient(F.x,F.y,j.x,j.y);for(let K=0;K<O.length;K+=2)J.addColorStop(O[K],O[K+1]);return J}}_getRadialGradient(){return this._getCache(g,this.__getRadialGradient)}__getRadialGradient(){const O=this.fillRadialGradientColorStops();if(O){const L=u(),F=this.fillRadialGradientStartPoint(),j=this.fillRadialGradientEndPoint(),J=L.createRadialGradient(F.x,F.y,this.fillRadialGradientStartRadius(),j.x,j.y,this.fillRadialGradientEndRadius());for(let K=0;K<O.length;K+=2)J.addColorStop(O[K],O[K+1]);return J}}getShadowRGBA(){return this._getCache(p,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const O=H.Util.colorToRGBA(this.shadowColor());if(O)return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O}intersects(O){const L=this.getStage();if(!L)return!1;const F=L.bufferHitCanvas;return F.getContext().clear(),this.drawHit(F,void 0,!0),F.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data[3]>0}destroy(){return C.Node.prototype.destroy.call(this),delete o.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(O){var L;if(!((L=this.attrs.perfectDrawEnabled)!==null&&L!==void 0?L:!0))return!1;const j=O||this.hasFill(),J=this.hasStroke(),K=this.getAbsoluteOpacity()!==1;if(j&&J&&K)return!0;const Z=this.hasShadow(),y=this.shadowForStrokeEnabled();return!!(j&&J&&Z&&y)}setStrokeHitEnabled(O){H.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}}getClientRect(O={}){let L=!1,F=this.getParent();for(;F;){if(F.isCached()){L=!0;break}F=F.getParent()}const j=O.skipTransform,J=O.relativeTo||L&&this.getStage()||void 0,K=this.getSelfRect(),y=!O.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,A=K.width+y,B=K.height+y,z=!O.skipShadow&&this.hasShadow(),q=z?this.shadowOffsetX():0,at=z?this.shadowOffsetY():0,w=A+Math.abs(q),nt=B+Math.abs(at),rt=z&&this.shadowBlur()||0,tt=w+rt*2,V=nt+rt*2,k={width:tt,height:V,x:-(y/2+rt)+Math.min(q,0)+K.x,y:-(y/2+rt)+Math.min(at,0)+K.y};return j?k:this._transformedRect(k,J)}drawScene(O,L,F){const j=this.getLayer(),J=O||j.getCanvas(),K=J.getContext(),Z=this._getCanvasCache(),y=this.getSceneFunc(),A=this.hasShadow();let B;const z=L===this;if(!this.isVisible()&&!z)return this;if(Z){K.save();const q=this.getAbsoluteTransform(L).getMatrix();return K.transform(q[0],q[1],q[2],q[3],q[4],q[5]),this._drawCachedSceneCanvas(K),K.restore(),this}if(!y)return this;if(K.save(),this._useBufferCanvas()){B=this.getStage();const q=F||B.bufferCanvas,at=q.getContext();at.clear(),at.save(),at._applyLineJoin(this);const w=this.getAbsoluteTransform(L).getMatrix();at.transform(w[0],w[1],w[2],w[3],w[4],w[5]),y.call(this,at,this),at.restore();const nt=q.pixelRatio;A&&K._applyShadow(this),K._applyOpacity(this),K._applyGlobalCompositeOperation(this),K.drawImage(q._canvas,q.x||0,q.y||0,q.width/nt,q.height/nt)}else{if(K._applyLineJoin(this),!z){const q=this.getAbsoluteTransform(L).getMatrix();K.transform(q[0],q[1],q[2],q[3],q[4],q[5]),K._applyOpacity(this),K._applyGlobalCompositeOperation(this)}A&&K._applyShadow(this),y.call(this,K,this)}return K.restore(),this}drawHit(O,L,F=!1){if(!this.shouldDrawHit(L,F))return this;const j=this.getLayer(),J=O||j.hitCanvas,K=J&&J.getContext(),Z=this.hitFunc()||this.sceneFunc(),y=this._getCanvasCache(),A=y&&y.hit;if(this.colorKey||H.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),A){K.save();const z=this.getAbsoluteTransform(L).getMatrix();return K.transform(z[0],z[1],z[2],z[3],z[4],z[5]),this._drawCachedHitCanvas(K),K.restore(),this}if(!Z)return this;if(K.save(),K._applyLineJoin(this),!(this===L)){const z=this.getAbsoluteTransform(L).getMatrix();K.transform(z[0],z[1],z[2],z[3],z[4],z[5])}return Z.call(this,K,this),K.restore(),this}drawHitFromCache(O=0){const L=this._getCanvasCache(),F=this._getCachedSceneCanvas(),j=L.hit,J=j.getContext(),K=j.getWidth(),Z=j.getHeight();J.clear(),J.drawImage(F._canvas,0,0,K,Z);try{const y=J.getImageData(0,0,K,Z),A=y.data,B=A.length,z=H.Util._hexToRgb(this.colorKey);for(let q=0;q<B;q+=4)A[q+3]>O?(A[q]=z.r,A[q+1]=z.g,A[q+2]=z.b,A[q+3]=255):A[q+3]=0;J.putImageData(y,0,0)}catch(y){H.Util.error("Unable to draw hit graph from cached scene canvas. "+y.message)}return this}hasPointerCapture(O){return f.hasPointerCapture(O,this)}setPointerCapture(O){f.setPointerCapture(O,this)}releaseCapture(O){f.releaseCapture(O,this)}}o.Shape=x,x.prototype._fillFunc=b,x.prototype._strokeFunc=N,x.prototype._fillFuncHit=D,x.prototype._strokeFuncHit=h,x.prototype._centroid=!1,x.prototype.nodeType="Shape",(0,m._registerNode)(x),x.prototype.eventListeners={},x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",s),x.prototype.on.call(x.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",T),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",G),x.prototype.on.call(x.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",Y),U.Factory.addGetterSetter(x,"stroke",void 0,(0,S.getStringOrGradientValidator)()),U.Factory.addGetterSetter(x,"strokeWidth",2,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillAfterStrokeEnabled",!1),U.Factory.addGetterSetter(x,"hitStrokeWidth","auto",(0,S.getNumberOrAutoValidator)()),U.Factory.addGetterSetter(x,"strokeHitEnabled",!0,(0,S.getBooleanValidator)()),U.Factory.addGetterSetter(x,"perfectDrawEnabled",!0,(0,S.getBooleanValidator)()),U.Factory.addGetterSetter(x,"shadowForStrokeEnabled",!0,(0,S.getBooleanValidator)()),U.Factory.addGetterSetter(x,"lineJoin"),U.Factory.addGetterSetter(x,"lineCap"),U.Factory.addGetterSetter(x,"sceneFunc"),U.Factory.addGetterSetter(x,"hitFunc"),U.Factory.addGetterSetter(x,"dash"),U.Factory.addGetterSetter(x,"dashOffset",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"shadowColor",void 0,(0,S.getStringValidator)()),U.Factory.addGetterSetter(x,"shadowBlur",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"shadowOpacity",1,(0,S.getNumberValidator)()),U.Factory.addComponentsGetterSetter(x,"shadowOffset",["x","y"]),U.Factory.addGetterSetter(x,"shadowOffsetX",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"shadowOffsetY",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillPatternImage"),U.Factory.addGetterSetter(x,"fill",void 0,(0,S.getStringOrGradientValidator)()),U.Factory.addGetterSetter(x,"fillPatternX",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillPatternY",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillLinearGradientColorStops"),U.Factory.addGetterSetter(x,"strokeLinearGradientColorStops"),U.Factory.addGetterSetter(x,"fillRadialGradientStartRadius",0),U.Factory.addGetterSetter(x,"fillRadialGradientEndRadius",0),U.Factory.addGetterSetter(x,"fillRadialGradientColorStops"),U.Factory.addGetterSetter(x,"fillPatternRepeat","repeat"),U.Factory.addGetterSetter(x,"fillEnabled",!0),U.Factory.addGetterSetter(x,"strokeEnabled",!0),U.Factory.addGetterSetter(x,"shadowEnabled",!0),U.Factory.addGetterSetter(x,"dashEnabled",!0),U.Factory.addGetterSetter(x,"strokeScaleEnabled",!0),U.Factory.addGetterSetter(x,"fillPriority","color"),U.Factory.addComponentsGetterSetter(x,"fillPatternOffset",["x","y"]),U.Factory.addGetterSetter(x,"fillPatternOffsetX",0,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillPatternOffsetY",0,(0,S.getNumberValidator)()),U.Factory.addComponentsGetterSetter(x,"fillPatternScale",["x","y"]),U.Factory.addGetterSetter(x,"fillPatternScaleX",1,(0,S.getNumberValidator)()),U.Factory.addGetterSetter(x,"fillPatternScaleY",1,(0,S.getNumberValidator)()),U.Factory.addComponentsGetterSetter(x,"fillLinearGradientStartPoint",["x","y"]),U.Factory.addComponentsGetterSetter(x,"strokeLinearGradientStartPoint",["x","y"]),U.Factory.addGetterSetter(x,"fillLinearGradientStartPointX",0),U.Factory.addGetterSetter(x,"strokeLinearGradientStartPointX",0),U.Factory.addGetterSetter(x,"fillLinearGradientStartPointY",0),U.Factory.addGetterSetter(x,"strokeLinearGradientStartPointY",0),U.Factory.addComponentsGetterSetter(x,"fillLinearGradientEndPoint",["x","y"]),U.Factory.addComponentsGetterSetter(x,"strokeLinearGradientEndPoint",["x","y"]),U.Factory.addGetterSetter(x,"fillLinearGradientEndPointX",0),U.Factory.addGetterSetter(x,"strokeLinearGradientEndPointX",0),U.Factory.addGetterSetter(x,"fillLinearGradientEndPointY",0),U.Factory.addGetterSetter(x,"strokeLinearGradientEndPointY",0),U.Factory.addComponentsGetterSetter(x,"fillRadialGradientStartPoint",["x","y"]),U.Factory.addGetterSetter(x,"fillRadialGradientStartPointX",0),U.Factory.addGetterSetter(x,"fillRadialGradientStartPointY",0),U.Factory.addComponentsGetterSetter(x,"fillRadialGradientEndPoint",["x","y"]),U.Factory.addGetterSetter(x,"fillRadialGradientEndPointX",0),U.Factory.addGetterSetter(x,"fillRadialGradientEndPointY",0),U.Factory.addGetterSetter(x,"fillPatternRotation",0),U.Factory.addGetterSetter(x,"fillRule",void 0,(0,S.getStringValidator)()),U.Factory.backCompat(x,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})}(Gr)),Gr}var kc;function t0(){if(kc)return ri;kc=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.Layer=void 0;const o=wt(),r=wl(),H=Qt(),U=At(),C=Kl(),S=Rt(),m=ue(),f=Tt(),d="#",p="beforeDraw",v="draw",E=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],g=E.length;class c extends r.Container{constructor(b){super(b),this.canvas=new C.SceneCanvas,this.hitCanvas=new C.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(b){return this.getContext().clear(b),this.getHitCanvas().getContext().clear(b),this}setZIndex(b){super.setZIndex(b);const N=this.getStage();return N&&N.content&&(N.content.removeChild(this.getNativeCanvasElement()),b<N.children.length-1?N.content.insertBefore(this.getNativeCanvasElement(),N.children[b+1].getCanvas()._canvas):N.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){H.Node.prototype.moveToTop.call(this);const b=this.getStage();return b&&b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!H.Node.prototype.moveUp.call(this))return!1;const N=this.getStage();return!N||!N.content?!1:(N.content.removeChild(this.getNativeCanvasElement()),this.index<N.children.length-1?N.content.insertBefore(this.getNativeCanvasElement(),N.children[this.index+1].getCanvas()._canvas):N.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(H.Node.prototype.moveDown.call(this)){const b=this.getStage();if(b){const N=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),N[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(H.Node.prototype.moveToBottom.call(this)){const b=this.getStage();if(b){const N=b.children;b.content&&(b.content.removeChild(this.getNativeCanvasElement()),b.content.insertBefore(this.getNativeCanvasElement(),N[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const b=this.getNativeCanvasElement();return H.Node.prototype.remove.call(this),b&&b.parentNode&&o.Util._isInDocument(b)&&b.parentNode.removeChild(b),this}getStage(){return this.parent}setSize({width:b,height:N}){return this.canvas.setSize(b,N),this.hitCanvas.setSize(b,N),this._setSmoothEnabled(),this}_validateAdd(b){const N=b.getType();N!=="Group"&&N!=="Shape"&&o.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(b){return b=b||{},b.width=b.width||this.getWidth(),b.height=b.height||this.getHeight(),b.x=b.x!==void 0?b.x:this.x(),b.y=b.y!==void 0?b.y:this.y(),H.Node.prototype._toKonvaCanvas.call(this,b)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){o.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){o.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,o.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(b){if(!this.isListening()||!this.isVisible())return null;let N=1,D=!1;for(;;){for(let h=0;h<g;h++){const s=E[h],_=this._getIntersection({x:b.x+s.x*N,y:b.y+s.y*N}),T=_.shape;if(T)return T;if(D=!!_.antialiased,!_.antialiased)break}if(D)N+=1;else return null}}_getIntersection(b){const N=this.hitCanvas.pixelRatio,D=this.hitCanvas.context.getImageData(Math.round(b.x*N),Math.round(b.y*N),1,1).data,h=D[3];if(h===255){const s=o.Util._rgbToHex(D[0],D[1],D[2]),_=m.shapes[d+s];return _?{shape:_}:{antialiased:!0}}else if(h>0)return{antialiased:!0};return{}}drawScene(b,N,D){const h=this.getLayer(),s=b||h&&h.getCanvas();return this._fire(p,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),r.Container.prototype.drawScene.call(this,s,N,D),this._fire(v,{node:this}),this}drawHit(b,N){const D=this.getLayer(),h=b||D&&D.hitCanvas;return D&&D.clearBeforeDraw()&&D.getHitCanvas().getContext().clear(),r.Container.prototype.drawHit.call(this,h,N),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(b){o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(b)}getHitGraphEnabled(b){return o.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const b=this.parent;!!this.hitCanvas._canvas.parentNode?b.content.removeChild(this.hitCanvas._canvas):b.content.appendChild(this.hitCanvas._canvas)}destroy(){return o.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}return ri.Layer=c,c.prototype.nodeType="Layer",(0,f._registerNode)(c),U.Factory.addGetterSetter(c,"imageSmoothingEnabled",!0),U.Factory.addGetterSetter(c,"clearBeforeDraw",!0),U.Factory.addGetterSetter(c,"hitGraphEnabled",!0,(0,S.getBooleanValidator)()),ri}var oi={},Wc;function Cd(){if(Wc)return oi;Wc=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.FastLayer=void 0;const o=wt(),r=t0(),H=Tt();let U=class extends r.Layer{constructor(S){super(S),this.listening(!1),o.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}};return oi.FastLayer=U,U.prototype.nodeType="FastLayer",(0,H._registerNode)(U),oi}var ui={},Ic;function jr(){if(Ic)return ui;Ic=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.Group=void 0;const o=wt(),r=wl(),H=Tt();class U extends r.Container{_validateAdd(S){const m=S.getType();m!=="Group"&&m!=="Shape"&&o.Util.throw("You may only add groups and shapes to groups.")}}return ui.Group=U,U.prototype.nodeType="Group",(0,H._registerNode)(U),ui}var ci={},$c;function Xr(){if($c)return ci;$c=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.Animation=void 0;const o=Tt(),r=wt(),H=function(){return o.glob.performance&&o.glob.performance.now?function(){return o.glob.performance.now()}:function(){return new Date().getTime()}}();let U=class An{constructor(S,m){this.id=An.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:H(),frameRate:0},this.func=S,this.setLayers(m)}setLayers(S){let m=[];return S&&(m=Array.isArray(S)?S:[S]),this.layers=m,this}getLayers(){return this.layers}addLayer(S){const m=this.layers,f=m.length;for(let d=0;d<f;d++)if(m[d]._id===S._id)return!1;return this.layers.push(S),!0}isRunning(){const m=An.animations,f=m.length;for(let d=0;d<f;d++)if(m[d].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=H(),An._addAnimation(this),this}stop(){return An._removeAnimation(this),this}_updateFrameObject(S){this.frame.timeDiff=S-this.frame.lastTime,this.frame.lastTime=S,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(S){this.animations.push(S),this._handleAnimation()}static _removeAnimation(S){const m=S.id,f=this.animations,d=f.length;for(let p=0;p<d;p++)if(f[p].id===m){this.animations.splice(p,1);break}}static _runFrames(){const S={},m=this.animations;for(let f=0;f<m.length;f++){const d=m[f],p=d.layers,v=d.func;d._updateFrameObject(H());const E=p.length;let g;if(v?g=v.call(d,d.frame)!==!1:g=!0,!!g)for(let c=0;c<E;c++){const u=p[c];u._id!==void 0&&(S[u._id]=u)}}for(const f in S)S.hasOwnProperty(f)&&S[f].batchDraw()}static _animationLoop(){const S=An;S.animations.length?(S._runFrames(),r.Util.requestAnimFrame(S._animationLoop)):S.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,r.Util.requestAnimFrame(this._animationLoop))}};return ci.Animation=U,U.animations=[],U.animIdCounter=0,U.animRunning=!1,ci}var Ur={},th;function Ed(){return th||(th=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Easings=o.Tween=void 0;const r=wt(),H=Xr(),U=Qt(),C=Tt(),S={node:1,duration:1,easing:1,onFinish:1,yoyo:1},m=1,f=2,d=3,p=["fill","stroke","shadowColor"];let v=0;class E{constructor(u,b,N,D,h,s,_){this.prop=u,this.propFunc=b,this.begin=D,this._pos=D,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=_,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=N,this._change=h-this.begin,this.pause()}fire(u){const b=this[u];b&&b()}setTime(u){u>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():u<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=u,this.update())}getTime(){return this._time}setPosition(u){this.prevPos=this._pos,this.propFunc(u),this._pos=u}getPosition(u){return u===void 0&&(u=this._time),this.func(u,this.begin,this._change,this.duration)}play(){this.state=f,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=d,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(u){this.pause(),this._time=u,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const u=this.getTimer()-this._startTime;this.state===f?this.setTime(u):this.state===d&&this.setTime(this.duration-u)}pause(){this.state=m,this.fire("onPause")}getTimer(){return new Date().getTime()}}class g{constructor(u){const b=this,N=u.node,D=N._id,h=u.easing||o.Easings.Linear,s=!!u.yoyo;let _,T;typeof u.duration>"u"?_=.3:u.duration===0?_=.001:_=u.duration,this.node=N,this._id=v++;const G=N.getLayer()||(N instanceof C.Konva.Stage?N.getLayers():null);G||r.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new H.Animation(function(){b.tween.onEnterFrame()},G),this.tween=new E(T,function(Y){b._tweenFunc(Y)},h,0,1,_*1e3,s),this._addListeners(),g.attrs[D]||(g.attrs[D]={}),g.attrs[D][this._id]||(g.attrs[D][this._id]={}),g.tweens[D]||(g.tweens[D]={});for(T in u)S[T]===void 0&&this._addAttr(T,u[T]);this.reset(),this.onFinish=u.onFinish,this.onReset=u.onReset,this.onUpdate=u.onUpdate}_addAttr(u,b){const N=this.node,D=N._id;let h,s,_,T,G;const Y=g.tweens[D][u];Y&&delete g.attrs[D][Y][u];let x=N.getAttr(u);if(r.Util._isArray(b))if(h=[],s=Math.max(b.length,x.length),u==="points"&&b.length!==x.length&&(b.length>x.length?(T=x,x=r.Util._prepareArrayForTween(x,b,N.closed())):(_=b,b=r.Util._prepareArrayForTween(b,x,N.closed()))),u.indexOf("fill")===0)for(let R=0;R<s;R++)if(R%2===0)h.push(b[R]-x[R]);else{const O=r.Util.colorToRGBA(x[R]);G=r.Util.colorToRGBA(b[R]),x[R]=O,h.push({r:G.r-O.r,g:G.g-O.g,b:G.b-O.b,a:G.a-O.a})}else for(let R=0;R<s;R++)h.push(b[R]-x[R]);else p.indexOf(u)!==-1?(x=r.Util.colorToRGBA(x),G=r.Util.colorToRGBA(b),h={r:G.r-x.r,g:G.g-x.g,b:G.b-x.b,a:G.a-x.a}):h=b-x;g.attrs[D][this._id][u]={start:x,diff:h,end:b,trueEnd:_,trueStart:T},g.tweens[D][u]=this._id}_tweenFunc(u){const b=this.node,N=g.attrs[b._id][this._id];let D,h,s,_,T,G,Y,x;for(D in N){if(h=N[D],s=h.start,_=h.diff,x=h.end,r.Util._isArray(s))if(T=[],Y=Math.max(s.length,x.length),D.indexOf("fill")===0)for(G=0;G<Y;G++)G%2===0?T.push((s[G]||0)+_[G]*u):T.push("rgba("+Math.round(s[G].r+_[G].r*u)+","+Math.round(s[G].g+_[G].g*u)+","+Math.round(s[G].b+_[G].b*u)+","+(s[G].a+_[G].a*u)+")");else for(G=0;G<Y;G++)T.push((s[G]||0)+_[G]*u);else p.indexOf(D)!==-1?T="rgba("+Math.round(s.r+_.r*u)+","+Math.round(s.g+_.g*u)+","+Math.round(s.b+_.b*u)+","+(s.a+_.a*u)+")":T=s+_*u;b.setAttr(D,T)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const u=this.node,b=g.attrs[u._id][this._id];b.points&&b.points.trueEnd&&u.setAttr("points",b.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const u=this.node,b=g.attrs[u._id][this._id];b.points&&b.points.trueStart&&u.points(b.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(u){return this.tween.seek(u*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const u=this.node._id,b=this._id,N=g.tweens[u];this.pause(),this.anim&&this.anim.stop();for(const D in N)delete g.tweens[u][D];delete g.attrs[u][b],g.tweens[u]&&(Object.keys(g.tweens[u]).length===0&&delete g.tweens[u],Object.keys(g.attrs[u]).length===0&&delete g.attrs[u])}}o.Tween=g,g.attrs={},g.tweens={},U.Node.prototype.to=function(c){const u=c.onFinish;c.node=this,c.onFinish=function(){this.destroy(),u&&u()},new g(c).play()},o.Easings={BackEaseIn(c,u,b,N){return b*(c/=N)*c*((1.70158+1)*c-1.70158)+u},BackEaseOut(c,u,b,N){return b*((c=c/N-1)*c*((1.70158+1)*c+1.70158)+1)+u},BackEaseInOut(c,u,b,N){let D=1.70158;return(c/=N/2)<1?b/2*(c*c*(((D*=1.525)+1)*c-D))+u:b/2*((c-=2)*c*(((D*=1.525)+1)*c+D)+2)+u},ElasticEaseIn(c,u,b,N,D,h){let s=0;return c===0?u:(c/=N)===1?u+b:(h||(h=N*.3),!D||D<Math.abs(b)?(D=b,s=h/4):s=h/(2*Math.PI)*Math.asin(b/D),-(D*Math.pow(2,10*(c-=1))*Math.sin((c*N-s)*(2*Math.PI)/h))+u)},ElasticEaseOut(c,u,b,N,D,h){let s=0;return c===0?u:(c/=N)===1?u+b:(h||(h=N*.3),!D||D<Math.abs(b)?(D=b,s=h/4):s=h/(2*Math.PI)*Math.asin(b/D),D*Math.pow(2,-10*c)*Math.sin((c*N-s)*(2*Math.PI)/h)+b+u)},ElasticEaseInOut(c,u,b,N,D,h){let s=0;return c===0?u:(c/=N/2)===2?u+b:(h||(h=N*(.3*1.5)),!D||D<Math.abs(b)?(D=b,s=h/4):s=h/(2*Math.PI)*Math.asin(b/D),c<1?-.5*(D*Math.pow(2,10*(c-=1))*Math.sin((c*N-s)*(2*Math.PI)/h))+u:D*Math.pow(2,-10*(c-=1))*Math.sin((c*N-s)*(2*Math.PI)/h)*.5+b+u)},BounceEaseOut(c,u,b,N){return(c/=N)<1/2.75?b*(7.5625*c*c)+u:c<2/2.75?b*(7.5625*(c-=1.5/2.75)*c+.75)+u:c<2.5/2.75?b*(7.5625*(c-=2.25/2.75)*c+.9375)+u:b*(7.5625*(c-=2.625/2.75)*c+.984375)+u},BounceEaseIn(c,u,b,N){return b-o.Easings.BounceEaseOut(N-c,0,b,N)+u},BounceEaseInOut(c,u,b,N){return c<N/2?o.Easings.BounceEaseIn(c*2,0,b,N)*.5+u:o.Easings.BounceEaseOut(c*2-N,0,b,N)*.5+b*.5+u},EaseIn(c,u,b,N){return b*(c/=N)*c+u},EaseOut(c,u,b,N){return-b*(c/=N)*(c-2)+u},EaseInOut(c,u,b,N){return(c/=N/2)<1?b/2*c*c+u:-b/2*(--c*(c-2)-1)+u},StrongEaseIn(c,u,b,N){return b*(c/=N)*c*c*c*c+u},StrongEaseOut(c,u,b,N){return b*((c=c/N-1)*c*c*c*c+1)+u},StrongEaseInOut(c,u,b,N){return(c/=N/2)<1?b/2*c*c*c*c*c+u:b/2*((c-=2)*c*c*c*c+2)+u},Linear(c,u,b,N){return b*c/N+u}}}(Ur)),Ur}var eh;function Kr(){return eh||(eh=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.Konva=void 0;const r=Tt(),H=wt(),U=Qt(),C=wl(),S=bd(),m=t0(),f=Cd(),d=jr(),p=wr(),v=ue(),E=Xr(),g=Ed(),c=Ih(),u=Kl();o.Konva=H.Util._assign(r.Konva,{Util:H.Util,Transform:H.Transform,Node:U.Node,Container:C.Container,Stage:S.Stage,stages:S.stages,Layer:m.Layer,FastLayer:f.FastLayer,Group:d.Group,DD:p.DD,Shape:v.Shape,shapes:v.shapes,Animation:E.Animation,Tween:g.Tween,Easings:g.Easings,Context:c.Context,Canvas:u.Canvas}),o.default=o.Konva}(xr)),xr}var hi={},ah;function Td(){if(ah)return hi;ah=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.Arc=void 0;const o=At(),r=ue(),H=Tt(),U=Rt(),C=Tt();let S=class extends r.Shape{_sceneFunc(f){const d=H.Konva.getAngle(this.angle()),p=this.clockwise();f.beginPath(),f.arc(0,0,this.outerRadius(),0,d,p),f.arc(0,0,this.innerRadius(),d,0,!p),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}getSelfRect(){const f=this.innerRadius(),d=this.outerRadius(),p=this.clockwise(),v=H.Konva.getAngle(p?360-this.angle():this.angle()),E=Math.cos(Math.min(v,Math.PI)),g=1,c=Math.sin(Math.min(Math.max(Math.PI,v),3*Math.PI/2)),u=Math.sin(Math.min(v,Math.PI/2)),b=E*(E>0?f:d),N=g*d,D=c*(c>0?f:d),h=u*(u>0?d:f);return{x:b,y:p?-1*h:D,width:N-b,height:h-D}}};return hi.Arc=S,S.prototype._centroid=!0,S.prototype.className="Arc",S.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"],(0,C._registerNode)(S),o.Factory.addGetterSetter(S,"innerRadius",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"outerRadius",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"angle",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"clockwise",!1,(0,U.getBooleanValidator)()),hi}var fi={},di={},nh;function e0(){if(nh)return di;nh=1,Object.defineProperty(di,"__esModule",{value:!0}),di.Line=void 0;const o=At(),r=Tt(),H=ue(),U=Rt();function C(f,d,p,v,E,g,c){const u=Math.sqrt(Math.pow(p-f,2)+Math.pow(v-d,2)),b=Math.sqrt(Math.pow(E-p,2)+Math.pow(g-v,2)),N=c*u/(u+b),D=c*b/(u+b),h=p-N*(E-f),s=v-N*(g-d),_=p+D*(E-f),T=v+D*(g-d);return[h,s,_,T]}function S(f,d){const p=f.length,v=[];for(let E=2;E<p-2;E+=2){const g=C(f[E-2],f[E-1],f[E],f[E+1],f[E+2],f[E+3],d);isNaN(g[0])||(v.push(g[0]),v.push(g[1]),v.push(f[E]),v.push(f[E+1]),v.push(g[2]),v.push(g[3]))}return v}class m extends H.Shape{constructor(d){super(d),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(d){const p=this.points(),v=p.length,E=this.tension(),g=this.closed(),c=this.bezier();if(!v)return;let u=0;if(d.beginPath(),d.moveTo(p[0],p[1]),E!==0&&v>4){const b=this.getTensionPoints(),N=b.length;for(u=g?0:4,g||d.quadraticCurveTo(b[0],b[1],b[2],b[3]);u<N-2;)d.bezierCurveTo(b[u++],b[u++],b[u++],b[u++],b[u++],b[u++]);g||d.quadraticCurveTo(b[N-2],b[N-1],p[v-2],p[v-1])}else if(c)for(u=2;u<v;)d.bezierCurveTo(p[u++],p[u++],p[u++],p[u++],p[u++],p[u++]);else for(u=2;u<v;u+=2)d.lineTo(p[u],p[u+1]);g?(d.closePath(),d.fillStrokeShape(this)):d.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():S(this.points(),this.tension())}_getTensionPointsClosed(){const d=this.points(),p=d.length,v=this.tension(),E=C(d[p-2],d[p-1],d[0],d[1],d[2],d[3],v),g=C(d[p-4],d[p-3],d[p-2],d[p-1],d[0],d[1],v),c=S(d,v);return[E[2],E[3]].concat(c).concat([g[0],g[1],d[p-2],d[p-1],g[2],g[3],E[0],E[1],d[0],d[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let d=this.points();if(d.length<4)return{x:d[0]||0,y:d[1]||0,width:0,height:0};this.tension()!==0?d=[d[0],d[1],...this._getTensionPoints(),d[d.length-2],d[d.length-1]]:d=this.points();let p=d[0],v=d[0],E=d[1],g=d[1],c,u;for(let b=0;b<d.length/2;b++)c=d[b*2],u=d[b*2+1],p=Math.min(p,c),v=Math.max(v,c),E=Math.min(E,u),g=Math.max(g,u);return{x:p,y:E,width:v-p,height:g-E}}}return di.Line=m,m.prototype.className="Line",m.prototype._attrsAffectingSize=["points","bezier","tension"],(0,r._registerNode)(m),o.Factory.addGetterSetter(m,"closed",!1),o.Factory.addGetterSetter(m,"bezier",!1),o.Factory.addGetterSetter(m,"tension",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(m,"points",[],(0,U.getNumberArrayValidator)()),di}var gi={},zr={},ih;function Nd(){return ih||(ih=1,function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.t2length=o.getQuadraticArcLength=o.getCubicArcLength=o.binomialCoefficients=o.cValues=o.tValues=void 0,o.tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],o.cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],o.binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]];const r=(m,f,d)=>{let p,v;const g=d/2;p=0;for(let c=0;c<20;c++)v=g*o.tValues[20][c]+g,p+=o.cValues[20][c]*U(m,f,v);return g*p};o.getCubicArcLength=r;const H=(m,f,d)=>{d===void 0&&(d=1);const p=m[0]-2*m[1]+m[2],v=f[0]-2*f[1]+f[2],E=2*m[1]-2*m[0],g=2*f[1]-2*f[0],c=4*(p*p+v*v),u=4*(p*E+v*g),b=E*E+g*g;if(c===0)return d*Math.sqrt(Math.pow(m[2]-m[0],2)+Math.pow(f[2]-f[0],2));const N=u/(2*c),D=b/c,h=d+N,s=D-N*N,_=h*h+s>0?Math.sqrt(h*h+s):0,T=N*N+s>0?Math.sqrt(N*N+s):0,G=N+Math.sqrt(N*N+s)!==0?s*Math.log(Math.abs((h+_)/(N+T))):0;return Math.sqrt(c)/2*(h*_-N*T+G)};o.getQuadraticArcLength=H;function U(m,f,d){const p=C(1,d,m),v=C(1,d,f),E=p*p+v*v;return Math.sqrt(E)}const C=(m,f,d)=>{const p=d.length-1;let v,E;if(p===0)return 0;if(m===0){E=0;for(let g=0;g<=p;g++)E+=o.binomialCoefficients[p][g]*Math.pow(1-f,p-g)*Math.pow(f,g)*d[g];return E}else{v=new Array(p);for(let g=0;g<p;g++)v[g]=p*(d[g+1]-d[g]);return C(m-1,f,v)}},S=(m,f,d)=>{let p=1,v=m/f,E=(m-d(v))/f,g=0;for(;p>.001;){const c=d(v+E),u=Math.abs(m-c)/f;if(u<p)p=u,v+=E;else{const b=d(v-E),N=Math.abs(m-b)/f;N<p?(p=N,v-=E):E/=2}if(g++,g>500)break}return v};o.t2length=S}(zr)),zr}var lh;function Qr(){if(lh)return gi;lh=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.Path=void 0;const o=At(),r=Tt(),H=ue(),U=Nd();let C=class Ne extends H.Shape{constructor(m){super(m),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Ne.parsePathData(this.data()),this.pathLength=Ne.getPathLength(this.dataArray)}_sceneFunc(m){const f=this.dataArray;m.beginPath();let d=!1;for(let p=0;p<f.length;p++){const v=f[p].command,E=f[p].points;switch(v){case"L":m.lineTo(E[0],E[1]);break;case"M":m.moveTo(E[0],E[1]);break;case"C":m.bezierCurveTo(E[0],E[1],E[2],E[3],E[4],E[5]);break;case"Q":m.quadraticCurveTo(E[0],E[1],E[2],E[3]);break;case"A":const g=E[0],c=E[1],u=E[2],b=E[3],N=E[4],D=E[5],h=E[6],s=E[7],_=u>b?u:b,T=u>b?1:u/b,G=u>b?b/u:1;m.translate(g,c),m.rotate(h),m.scale(T,G),m.arc(0,0,_,N,N+D,1-s),m.scale(1/T,1/G),m.rotate(-h),m.translate(-g,-c);break;case"z":d=!0,m.closePath();break}}!d&&!this.hasFill()?m.strokeShape(this):m.fillStrokeShape(this)}getSelfRect(){let m=[];this.dataArray.forEach(function(c){if(c.command==="A"){const u=c.points[4],b=c.points[5],N=c.points[4]+b;let D=Math.PI/180;if(Math.abs(u-N)<D&&(D=Math.abs(u-N)),b<0)for(let h=u-D;h>N;h-=D){const s=Ne.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],h,0);m.push(s.x,s.y)}else for(let h=u+D;h<N;h+=D){const s=Ne.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],h,0);m.push(s.x,s.y)}}else if(c.command==="C")for(let u=0;u<=1;u+=.01){const b=Ne.getPointOnCubicBezier(u,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);m.push(b.x,b.y)}else m=m.concat(c.points)});let f=m[0],d=m[0],p=m[1],v=m[1],E,g;for(let c=0;c<m.length/2;c++)E=m[c*2],g=m[c*2+1],isNaN(E)||(f=Math.min(f,E),d=Math.max(d,E)),isNaN(g)||(p=Math.min(p,g),v=Math.max(v,g));return{x:f,y:p,width:d-f,height:v-p}}getLength(){return this.pathLength}getPointAtLength(m){return Ne.getPointAtLengthOfDataArray(m,this.dataArray)}static getLineLength(m,f,d,p){return Math.sqrt((d-m)*(d-m)+(p-f)*(p-f))}static getPathLength(m){let f=0;for(let d=0;d<m.length;++d)f+=m[d].pathLength;return f}static getPointAtLengthOfDataArray(m,f){let d,p=0,v=f.length;if(!v)return null;for(;p<v&&m>f[p].pathLength;)m-=f[p].pathLength,++p;if(p===v)return d=f[p-1].points.slice(-2),{x:d[0],y:d[1]};if(m<.01)return f[p].command==="M"?(d=f[p].points.slice(0,2),{x:d[0],y:d[1]}):{x:f[p].start.x,y:f[p].start.y};const E=f[p],g=E.points;switch(E.command){case"L":return Ne.getPointOnLine(m,E.start.x,E.start.y,g[0],g[1]);case"C":return Ne.getPointOnCubicBezier((0,U.t2length)(m,Ne.getPathLength(f),_=>(0,U.getCubicArcLength)([E.start.x,g[0],g[2],g[4]],[E.start.y,g[1],g[3],g[5]],_)),E.start.x,E.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return Ne.getPointOnQuadraticBezier((0,U.t2length)(m,Ne.getPathLength(f),_=>(0,U.getQuadraticArcLength)([E.start.x,g[0],g[2]],[E.start.y,g[1],g[3]],_)),E.start.x,E.start.y,g[0],g[1],g[2],g[3]);case"A":const c=g[0],u=g[1],b=g[2],N=g[3],D=g[5],h=g[6];let s=g[4];return s+=D*m/E.pathLength,Ne.getPointOnEllipticalArc(c,u,b,N,s,h)}return null}static getPointOnLine(m,f,d,p,v,E,g){E=E??f,g=g??d;const c=this.getLineLength(f,d,p,v);if(c<1e-10)return{x:f,y:d};if(p===f)return{x:E,y:g+(v>d?m:-m)};const u=(v-d)/(p-f),b=Math.sqrt(m*m/(1+u*u))*(p<f?-1:1),N=u*b;if(Math.abs(g-d-u*(E-f))<1e-10)return{x:E+b,y:g+N};const D=((E-f)*(p-f)+(g-d)*(v-d))/(c*c),h=f+D*(p-f),s=d+D*(v-d),_=this.getLineLength(E,g,h,s),T=Math.sqrt(m*m-_*_),G=Math.sqrt(T*T/(1+u*u))*(p<f?-1:1),Y=u*G;return{x:h+G,y:s+Y}}static getPointOnCubicBezier(m,f,d,p,v,E,g,c,u){function b(T){return T*T*T}function N(T){return 3*T*T*(1-T)}function D(T){return 3*T*(1-T)*(1-T)}function h(T){return(1-T)*(1-T)*(1-T)}const s=c*b(m)+E*N(m)+p*D(m)+f*h(m),_=u*b(m)+g*N(m)+v*D(m)+d*h(m);return{x:s,y:_}}static getPointOnQuadraticBezier(m,f,d,p,v,E,g){function c(h){return h*h}function u(h){return 2*h*(1-h)}function b(h){return(1-h)*(1-h)}const N=E*c(m)+p*u(m)+f*b(m),D=g*c(m)+v*u(m)+d*b(m);return{x:N,y:D}}static getPointOnEllipticalArc(m,f,d,p,v,E){const g=Math.cos(E),c=Math.sin(E),u={x:d*Math.cos(v),y:p*Math.sin(v)};return{x:m+(u.x*g-u.y*c),y:f+(u.x*c+u.y*g)}}static parsePathData(m){if(!m)return[];let f=m;const d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];f=f.replace(new RegExp(" ","g"),",");for(let N=0;N<d.length;N++)f=f.replace(new RegExp(d[N],"g"),"|"+d[N]);const p=f.split("|"),v=[],E=[];let g=0,c=0;const u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let b;for(let N=1;N<p.length;N++){let D=p[N],h=D.charAt(0);for(D=D.slice(1),E.length=0;b=u.exec(D);)E.push(b[0]);const s=[];for(let _=0,T=E.length;_<T;_++){if(E[_]==="00"){s.push(0,0);continue}const G=parseFloat(E[_]);isNaN(G)?s.push(0):s.push(G)}for(;s.length>0&&!isNaN(s[0]);){let _="",T=[];const G=g,Y=c;let x,R,O,L,F,j,J,K,Z,y;switch(h){case"l":g+=s.shift(),c+=s.shift(),_="L",T.push(g,c);break;case"L":g=s.shift(),c=s.shift(),T.push(g,c);break;case"m":const A=s.shift(),B=s.shift();if(g+=A,c+=B,_="M",v.length>2&&v[v.length-1].command==="z"){for(let z=v.length-2;z>=0;z--)if(v[z].command==="M"){g=v[z].points[0]+A,c=v[z].points[1]+B;break}}T.push(g,c),h="l";break;case"M":g=s.shift(),c=s.shift(),_="M",T.push(g,c),h="L";break;case"h":g+=s.shift(),_="L",T.push(g,c);break;case"H":g=s.shift(),_="L",T.push(g,c);break;case"v":c+=s.shift(),_="L",T.push(g,c);break;case"V":c=s.shift(),_="L",T.push(g,c);break;case"C":T.push(s.shift(),s.shift(),s.shift(),s.shift()),g=s.shift(),c=s.shift(),T.push(g,c);break;case"c":T.push(g+s.shift(),c+s.shift(),g+s.shift(),c+s.shift()),g+=s.shift(),c+=s.shift(),_="C",T.push(g,c);break;case"S":R=g,O=c,x=v[v.length-1],x.command==="C"&&(R=g+(g-x.points[2]),O=c+(c-x.points[3])),T.push(R,O,s.shift(),s.shift()),g=s.shift(),c=s.shift(),_="C",T.push(g,c);break;case"s":R=g,O=c,x=v[v.length-1],x.command==="C"&&(R=g+(g-x.points[2]),O=c+(c-x.points[3])),T.push(R,O,g+s.shift(),c+s.shift()),g+=s.shift(),c+=s.shift(),_="C",T.push(g,c);break;case"Q":T.push(s.shift(),s.shift()),g=s.shift(),c=s.shift(),T.push(g,c);break;case"q":T.push(g+s.shift(),c+s.shift()),g+=s.shift(),c+=s.shift(),_="Q",T.push(g,c);break;case"T":R=g,O=c,x=v[v.length-1],x.command==="Q"&&(R=g+(g-x.points[0]),O=c+(c-x.points[1])),g=s.shift(),c=s.shift(),_="Q",T.push(R,O,g,c);break;case"t":R=g,O=c,x=v[v.length-1],x.command==="Q"&&(R=g+(g-x.points[0]),O=c+(c-x.points[1])),g+=s.shift(),c+=s.shift(),_="Q",T.push(R,O,g,c);break;case"A":L=s.shift(),F=s.shift(),j=s.shift(),J=s.shift(),K=s.shift(),Z=g,y=c,g=s.shift(),c=s.shift(),_="A",T=this.convertEndpointToCenterParameterization(Z,y,g,c,J,K,L,F,j);break;case"a":L=s.shift(),F=s.shift(),j=s.shift(),J=s.shift(),K=s.shift(),Z=g,y=c,g+=s.shift(),c+=s.shift(),_="A",T=this.convertEndpointToCenterParameterization(Z,y,g,c,J,K,L,F,j);break}v.push({command:_||h,points:T,start:{x:G,y:Y},pathLength:this.calcLength(G,Y,_||h,T)})}(h==="z"||h==="Z")&&v.push({command:"z",points:[],start:void 0,pathLength:0})}return v}static calcLength(m,f,d,p){let v,E,g,c;const u=Ne;switch(d){case"L":return u.getLineLength(m,f,p[0],p[1]);case"C":return(0,U.getCubicArcLength)([m,p[0],p[2],p[4]],[f,p[1],p[3],p[5]],1);case"Q":return(0,U.getQuadraticArcLength)([m,p[0],p[2]],[f,p[1],p[3]],1);case"A":v=0;const b=p[4],N=p[5],D=p[4]+N;let h=Math.PI/180;if(Math.abs(b-D)<h&&(h=Math.abs(b-D)),E=u.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],b,0),N<0)for(c=b-h;c>D;c-=h)g=u.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],c,0),v+=u.getLineLength(E.x,E.y,g.x,g.y),E=g;else for(c=b+h;c<D;c+=h)g=u.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],c,0),v+=u.getLineLength(E.x,E.y,g.x,g.y),E=g;return g=u.getPointOnEllipticalArc(p[0],p[1],p[2],p[3],D,0),v+=u.getLineLength(E.x,E.y,g.x,g.y),v}return 0}static convertEndpointToCenterParameterization(m,f,d,p,v,E,g,c,u){const b=u*(Math.PI/180),N=Math.cos(b)*(m-d)/2+Math.sin(b)*(f-p)/2,D=-1*Math.sin(b)*(m-d)/2+Math.cos(b)*(f-p)/2,h=N*N/(g*g)+D*D/(c*c);h>1&&(g*=Math.sqrt(h),c*=Math.sqrt(h));let s=Math.sqrt((g*g*(c*c)-g*g*(D*D)-c*c*(N*N))/(g*g*(D*D)+c*c*(N*N)));v===E&&(s*=-1),isNaN(s)&&(s=0);const _=s*g*D/c,T=s*-c*N/g,G=(m+d)/2+Math.cos(b)*_-Math.sin(b)*T,Y=(f+p)/2+Math.sin(b)*_+Math.cos(b)*T,x=function(K){return Math.sqrt(K[0]*K[0]+K[1]*K[1])},R=function(K,Z){return(K[0]*Z[0]+K[1]*Z[1])/(x(K)*x(Z))},O=function(K,Z){return(K[0]*Z[1]<K[1]*Z[0]?-1:1)*Math.acos(R(K,Z))},L=O([1,0],[(N-_)/g,(D-T)/c]),F=[(N-_)/g,(D-T)/c],j=[(-1*N-_)/g,(-1*D-T)/c];let J=O(F,j);return R(F,j)<=-1&&(J=Math.PI),R(F,j)>=1&&(J=0),E===0&&J>0&&(J=J-2*Math.PI),E===1&&J<0&&(J=J+2*Math.PI),[G,Y,g,c,L,J,b,E]}};return gi.Path=C,C.prototype.className="Path",C.prototype._attrsAffectingSize=["data"],(0,r._registerNode)(C),o.Factory.addGetterSetter(C,"data"),gi}var sh;function xd(){if(sh)return fi;sh=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.Arrow=void 0;const o=At(),r=e0(),H=Rt(),U=Tt(),C=Qr();class S extends r.Line{_sceneFunc(f){super._sceneFunc(f);const d=Math.PI*2,p=this.points();let v=p;const E=this.tension()!==0&&p.length>4;E&&(v=this.getTensionPoints());const g=this.pointerLength(),c=p.length;let u,b;if(E){const h=[v[v.length-4],v[v.length-3],v[v.length-2],v[v.length-1],p[c-2],p[c-1]],s=C.Path.calcLength(v[v.length-4],v[v.length-3],"C",h),_=C.Path.getPointOnQuadraticBezier(Math.min(1,1-g/s),h[0],h[1],h[2],h[3],h[4],h[5]);u=p[c-2]-_.x,b=p[c-1]-_.y}else u=p[c-2]-p[c-4],b=p[c-1]-p[c-3];const N=(Math.atan2(b,u)+d)%d,D=this.pointerWidth();this.pointerAtEnding()&&(f.save(),f.beginPath(),f.translate(p[c-2],p[c-1]),f.rotate(N),f.moveTo(0,0),f.lineTo(-g,D/2),f.lineTo(-g,-D/2),f.closePath(),f.restore(),this.__fillStroke(f)),this.pointerAtBeginning()&&(f.save(),f.beginPath(),f.translate(p[0],p[1]),E?(u=(v[0]+v[2])/2-p[0],b=(v[1]+v[3])/2-p[1]):(u=p[2]-p[0],b=p[3]-p[1]),f.rotate((Math.atan2(-b,-u)+d)%d),f.moveTo(0,0),f.lineTo(-g,D/2),f.lineTo(-g,-D/2),f.closePath(),f.restore(),this.__fillStroke(f))}__fillStroke(f){const d=this.dashEnabled();d&&(this.attrs.dashEnabled=!1,f.setLineDash([])),f.fillStrokeShape(this),d&&(this.attrs.dashEnabled=!0)}getSelfRect(){const f=super.getSelfRect(),d=this.pointerWidth()/2;return{x:f.x,y:f.y-d,width:f.width,height:f.height+d*2}}}return fi.Arrow=S,S.prototype.className="Arrow",(0,U._registerNode)(S),o.Factory.addGetterSetter(S,"pointerLength",10,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(S,"pointerWidth",10,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(S,"pointerAtBeginning",!1),o.Factory.addGetterSetter(S,"pointerAtEnding",!0),fi}var mi={},rh;function Ad(){if(rh)return mi;rh=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.Circle=void 0;const o=At(),r=ue(),H=Rt(),U=Tt();class C extends r.Shape{_sceneFunc(m){m.beginPath(),m.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius()!==m/2&&this.radius(m/2)}setHeight(m){this.radius()!==m/2&&this.radius(m/2)}}return mi.Circle=C,C.prototype._centroid=!0,C.prototype.className="Circle",C.prototype._attrsAffectingSize=["radius"],(0,U._registerNode)(C),o.Factory.addGetterSetter(C,"radius",0,(0,H.getNumberValidator)()),mi}var pi={},oh;function Rd(){if(oh)return pi;oh=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.Ellipse=void 0;const o=At(),r=ue(),H=Rt(),U=Tt();let C=class extends r.Shape{_sceneFunc(m){const f=this.radiusX(),d=this.radiusY();m.beginPath(),m.save(),f!==d&&m.scale(1,d/f),m.arc(0,0,f,0,Math.PI*2,!1),m.restore(),m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(m){this.radiusX(m/2)}setHeight(m){this.radiusY(m/2)}};return pi.Ellipse=C,C.prototype.className="Ellipse",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["radiusX","radiusY"],(0,U._registerNode)(C),o.Factory.addComponentsGetterSetter(C,"radius",["x","y"]),o.Factory.addGetterSetter(C,"radiusX",0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(C,"radiusY",0,(0,H.getNumberValidator)()),pi}var yi={},uh;function Md(){if(uh)return yi;uh=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.Image=void 0;const o=wt(),r=At(),H=ue(),U=Tt(),C=Rt();class S extends H.Shape{constructor(f){super(f),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",d=>{this._removeImageLoad(d.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const f=this.image();f&&f.complete||f&&f.readyState===4||f&&f.addEventListener&&f.addEventListener("load",this._loadListener)}_removeImageLoad(f){f&&f.removeEventListener&&f.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const f=!!this.cornerRadius(),d=this.hasShadow();return f&&d?!0:super._useBufferCanvas(!0)}_sceneFunc(f){const d=this.getWidth(),p=this.getHeight(),v=this.cornerRadius(),E=this.attrs.image;let g;if(E){const c=this.attrs.cropWidth,u=this.attrs.cropHeight;c&&u?g=[E,this.cropX(),this.cropY(),c,u,0,0,d,p]:g=[E,0,0,d,p]}(this.hasFill()||this.hasStroke()||v)&&(f.beginPath(),v?o.Util.drawRoundedRectPath(f,d,p,v):f.rect(0,0,d,p),f.closePath(),f.fillStrokeShape(this)),E&&(v&&f.clip(),f.drawImage.apply(f,g))}_hitFunc(f){const d=this.width(),p=this.height(),v=this.cornerRadius();f.beginPath(),v?o.Util.drawRoundedRectPath(f,d,p,v):f.rect(0,0,d,p),f.closePath(),f.fillStrokeShape(this)}getWidth(){var f,d;return(f=this.attrs.width)!==null&&f!==void 0?f:(d=this.image())===null||d===void 0?void 0:d.width}getHeight(){var f,d;return(f=this.attrs.height)!==null&&f!==void 0?f:(d=this.image())===null||d===void 0?void 0:d.height}static fromURL(f,d,p=null){const v=o.Util.createImageElement();v.onload=function(){const E=new S({image:v});d(E)},v.onerror=p,v.crossOrigin="Anonymous",v.src=f}}return yi.Image=S,S.prototype.className="Image",(0,U._registerNode)(S),r.Factory.addGetterSetter(S,"cornerRadius",0,(0,C.getNumberOrArrayOfNumbersValidator)(4)),r.Factory.addGetterSetter(S,"image"),r.Factory.addComponentsGetterSetter(S,"crop",["x","y","width","height"]),r.Factory.addGetterSetter(S,"cropX",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(S,"cropY",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(S,"cropWidth",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(S,"cropHeight",0,(0,C.getNumberValidator)()),yi}var Za={},ch;function Od(){if(ch)return Za;ch=1,Object.defineProperty(Za,"__esModule",{value:!0}),Za.Tag=Za.Label=void 0;const o=At(),r=ue(),H=jr(),U=Rt(),C=Tt(),S=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],m="Change.konva",f="none",d="up",p="right",v="down",E="left",g=S.length;let c=class extends H.Group{constructor(N){super(N),this.on("add.konva",function(D){this._addListeners(D.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(N){let D=this,h;const s=function(){D._sync()};for(h=0;h<g;h++)N.on(S[h]+m,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let N=this.getText(),D=this.getTag(),h,s,_,T,G,Y,x;if(N&&D){switch(h=N.width(),s=N.height(),_=D.pointerDirection(),T=D.pointerWidth(),x=D.pointerHeight(),G=0,Y=0,_){case d:G=h/2,Y=-1*x;break;case p:G=h+T,Y=s/2;break;case v:G=h/2,Y=s+x;break;case E:G=-1*T,Y=s/2;break}D.setAttrs({x:-1*G,y:-1*Y,width:h,height:s}),N.setAttrs({x:-1*G,y:-1*Y})}}};Za.Label=c,c.prototype.className="Label",(0,C._registerNode)(c);class u extends r.Shape{_sceneFunc(N){const D=this.width(),h=this.height(),s=this.pointerDirection(),_=this.pointerWidth(),T=this.pointerHeight(),G=this.cornerRadius();let Y=0,x=0,R=0,O=0;typeof G=="number"?Y=x=R=O=Math.min(G,D/2,h/2):(Y=Math.min(G[0]||0,D/2,h/2),x=Math.min(G[1]||0,D/2,h/2),O=Math.min(G[2]||0,D/2,h/2),R=Math.min(G[3]||0,D/2,h/2)),N.beginPath(),N.moveTo(Y,0),s===d&&(N.lineTo((D-_)/2,0),N.lineTo(D/2,-1*T),N.lineTo((D+_)/2,0)),N.lineTo(D-x,0),N.arc(D-x,x,x,Math.PI*3/2,0,!1),s===p&&(N.lineTo(D,(h-T)/2),N.lineTo(D+_,h/2),N.lineTo(D,(h+T)/2)),N.lineTo(D,h-O),N.arc(D-O,h-O,O,0,Math.PI/2,!1),s===v&&(N.lineTo((D+_)/2,h),N.lineTo(D/2,h+T),N.lineTo((D-_)/2,h)),N.lineTo(R,h),N.arc(R,h-R,R,Math.PI/2,Math.PI,!1),s===E&&(N.lineTo(0,(h+T)/2),N.lineTo(-1*_,h/2),N.lineTo(0,(h-T)/2)),N.lineTo(0,Y),N.arc(Y,Y,Y,Math.PI,Math.PI*3/2,!1),N.closePath(),N.fillStrokeShape(this)}getSelfRect(){let N=0,D=0,h=this.pointerWidth(),s=this.pointerHeight(),_=this.pointerDirection(),T=this.width(),G=this.height();return _===d?(D-=s,G+=s):_===v?G+=s:_===E?(N-=h*1.5,T+=h):_===p&&(T+=h*1.5),{x:N,y:D,width:T,height:G}}}return Za.Tag=u,u.prototype.className="Tag",(0,C._registerNode)(u),o.Factory.addGetterSetter(u,"pointerDirection",f),o.Factory.addGetterSetter(u,"pointerWidth",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(u,"pointerHeight",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(u,"cornerRadius",0,(0,U.getNumberOrArrayOfNumbersValidator)(4)),Za}var vi={},hh;function a0(){if(hh)return vi;hh=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.Rect=void 0;const o=At(),r=ue(),H=Tt(),U=wt(),C=Rt();class S extends r.Shape{_sceneFunc(f){const d=this.cornerRadius(),p=this.width(),v=this.height();f.beginPath(),d?U.Util.drawRoundedRectPath(f,p,v,d):f.rect(0,0,p,v),f.closePath(),f.fillStrokeShape(this)}}return vi.Rect=S,S.prototype.className="Rect",(0,H._registerNode)(S),o.Factory.addGetterSetter(S,"cornerRadius",0,(0,C.getNumberOrArrayOfNumbersValidator)(4)),vi}var _i={},fh;function Dd(){if(fh)return _i;fh=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.RegularPolygon=void 0;const o=At(),r=ue(),H=Rt(),U=Tt();let C=class extends r.Shape{_sceneFunc(m){const f=this._getPoints();m.beginPath(),m.moveTo(f[0].x,f[0].y);for(let d=1;d<f.length;d++)m.lineTo(f[d].x,f[d].y);m.closePath(),m.fillStrokeShape(this)}_getPoints(){const m=this.attrs.sides,f=this.attrs.radius||0,d=[];for(let p=0;p<m;p++)d.push({x:f*Math.sin(p*2*Math.PI/m),y:-1*f*Math.cos(p*2*Math.PI/m)});return d}getSelfRect(){const m=this._getPoints();let f=m[0].x,d=m[0].y,p=m[0].x,v=m[0].y;return m.forEach(E=>{f=Math.min(f,E.x),d=Math.max(d,E.x),p=Math.min(p,E.y),v=Math.max(v,E.y)}),{x:f,y:p,width:d-f,height:v-p}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(m){this.radius(m/2)}setHeight(m){this.radius(m/2)}};return _i.RegularPolygon=C,C.prototype.className="RegularPolygon",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["radius"],(0,U._registerNode)(C),o.Factory.addGetterSetter(C,"radius",0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(C,"sides",0,(0,H.getNumberValidator)()),_i}var Si={},dh;function Gd(){if(dh)return Si;dh=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.Ring=void 0;const o=At(),r=ue(),H=Rt(),U=Tt(),C=Math.PI*2;let S=class extends r.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.innerRadius(),0,C,!1),f.moveTo(this.outerRadius(),0),f.arc(0,0,this.outerRadius(),C,0,!0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(f){this.outerRadius(f/2)}setHeight(f){this.outerRadius(f/2)}};return Si.Ring=S,S.prototype.className="Ring",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,U._registerNode)(S),o.Factory.addGetterSetter(S,"innerRadius",0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(S,"outerRadius",0,(0,H.getNumberValidator)()),Si}var bi={},gh;function Ud(){if(gh)return bi;gh=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.Sprite=void 0;const o=At(),r=ue(),H=Xr(),U=Rt(),C=Tt();let S=class extends r.Shape{constructor(f){super(f),this._updated=!0,this.anim=new H.Animation(()=>{const d=this._updated;return this._updated=!1,d}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(f){const d=this.animation(),p=this.frameIndex(),v=p*4,E=this.animations()[d],g=this.frameOffsets(),c=E[v+0],u=E[v+1],b=E[v+2],N=E[v+3],D=this.image();if((this.hasFill()||this.hasStroke())&&(f.beginPath(),f.rect(0,0,b,N),f.closePath(),f.fillStrokeShape(this)),D)if(g){const h=g[d],s=p*2;f.drawImage(D,c,u,b,N,h[s+0],h[s+1],b,N)}else f.drawImage(D,c,u,b,N,0,0,b,N)}_hitFunc(f){const d=this.animation(),p=this.frameIndex(),v=p*4,E=this.animations()[d],g=this.frameOffsets(),c=E[v+2],u=E[v+3];if(f.beginPath(),g){const b=g[d],N=p*2;f.rect(b[N+0],b[N+1],c,u)}else f.rect(0,0,c,u);f.closePath(),f.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const f=this;this.interval=setInterval(function(){f._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const f=this.getLayer();this.anim.setLayers(f),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const f=this.frameIndex(),d=this.animation(),p=this.animations(),v=p[d],E=v.length/4;f<E-1?this.frameIndex(f+1):this.frameIndex(0)}};return bi.Sprite=S,S.prototype.className="Sprite",(0,C._registerNode)(S),o.Factory.addGetterSetter(S,"animation"),o.Factory.addGetterSetter(S,"animations"),o.Factory.addGetterSetter(S,"frameOffsets"),o.Factory.addGetterSetter(S,"image"),o.Factory.addGetterSetter(S,"frameIndex",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"frameRate",17,(0,U.getNumberValidator)()),o.Factory.backCompat(S,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),bi}var Ci={},mh;function zd(){if(mh)return Ci;mh=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.Star=void 0;const o=At(),r=ue(),H=Rt(),U=Tt();let C=class extends r.Shape{_sceneFunc(m){const f=this.innerRadius(),d=this.outerRadius(),p=this.numPoints();m.beginPath(),m.moveTo(0,0-d);for(let v=1;v<p*2;v++){const E=v%2===0?d:f,g=E*Math.sin(v*Math.PI/p),c=-1*E*Math.cos(v*Math.PI/p);m.lineTo(g,c)}m.closePath(),m.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(m){this.outerRadius(m/2)}setHeight(m){this.outerRadius(m/2)}};return Ci.Star=C,C.prototype.className="Star",C.prototype._centroid=!0,C.prototype._attrsAffectingSize=["innerRadius","outerRadius"],(0,U._registerNode)(C),o.Factory.addGetterSetter(C,"numPoints",5,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(C,"innerRadius",0,(0,H.getNumberValidator)()),o.Factory.addGetterSetter(C,"outerRadius",0,(0,H.getNumberValidator)()),Ci}var xn={},ph;function n0(){if(ph)return xn;ph=1,Object.defineProperty(xn,"__esModule",{value:!0}),xn.Text=void 0,xn.stringToArray=m;const o=wt(),r=At(),H=ue(),U=Tt(),C=Rt(),S=Tt();function m(at){return[...at].reduce((w,nt,rt,tt)=>{if(new RegExp("\\p{Emoji}","u").test(nt)){const V=tt[rt+1];V&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(V)?(w.push(nt+V),tt[rt+1]=""):w.push(nt)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(nt+(tt[rt+1]||""))?w.push(nt+tt[rt+1]):rt>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(nt)?w[w.length-1]+=nt:nt&&w.push(nt);return w},[])}const f="auto",d="center",p="inherit",v="justify",E="Change.konva",g="2d",c="-",u="left",b="text",N="Text",D="top",h="bottom",s="middle",_="normal",T="px ",G=" ",Y="right",x="rtl",R="word",O="char",L="none",F="",j=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],J=j.length;function K(at){return at.split(",").map(w=>{w=w.trim();const nt=w.indexOf(" ")>=0,rt=w.indexOf('"')>=0||w.indexOf("'")>=0;return nt&&!rt&&(w=`"${w}"`),w}).join(", ")}let Z;function y(){return Z||(Z=o.Util.createCanvasElement().getContext(g),Z)}function A(at){at.fillText(this._partialText,this._partialTextX,this._partialTextY)}function B(at){at.setAttr("miterLimit",2),at.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function z(at){return at=at||{},!at.fillLinearGradientColorStops&&!at.fillRadialGradientColorStops&&!at.fillPatternImage&&(at.fill=at.fill||"black"),at}class q extends H.Shape{constructor(w){super(z(w)),this._partialTextX=0,this._partialTextY=0;for(let nt=0;nt<J;nt++)this.on(j[nt]+E,this._setTextData);this._setTextData()}_sceneFunc(w){const nt=this.textArr,rt=nt.length;if(!this.text())return;let tt=this.padding(),V=this.fontSize(),k=this.lineHeight()*V,X=this.verticalAlign(),I=this.direction(),lt=0,ut=this.align(),ht=this.getWidth(),mt=this.letterSpacing(),dt=this.fill(),vt=this.textDecoration(),Ct=vt.indexOf("underline")!==-1,Dt=vt.indexOf("line-through")!==-1,me;I=I===p?w.direction:I;let It=k/2,xe=s;if(U.Konva._fixTextRendering){const _t=this.measureSize("M");xe="alphabetic",It=(_t.fontBoundingBoxAscent-_t.fontBoundingBoxDescent)/2+k/2}for(I===x&&w.setAttr("direction",I),w.setAttr("font",this._getContextFont()),w.setAttr("textBaseline",xe),w.setAttr("textAlign",u),X===s?lt=(this.getHeight()-rt*k-tt*2)/2:X===h&&(lt=this.getHeight()-rt*k-tt*2),w.translate(tt,lt+tt),me=0;me<rt;me++){let _t=0,pe=0;const Ae=nt[me],we=Ae.text,Zt=Ae.width,$t=Ae.lastInParagraph;if(w.save(),ut===Y?_t+=ht-Zt-tt*2:ut===d&&(_t+=(ht-Zt-tt*2)/2),Ct){w.save(),w.beginPath();const ie=U.Konva._fixTextRendering?Math.round(V/4):Math.round(V/2),Re=_t,ce=It+pe+ie;w.moveTo(Re,ce);const he=ut===v&&!$t?ht-tt*2:Zt;w.lineTo(Re+Math.round(he),ce),w.lineWidth=V/15;const da=this._getLinearGradient();w.strokeStyle=da||dt,w.stroke(),w.restore()}if(Dt){w.save(),w.beginPath();const ie=U.Konva._fixTextRendering?-Math.round(V/4):0;w.moveTo(_t,It+pe+ie);const Re=ut===v&&!$t?ht-tt*2:Zt;w.lineTo(_t+Math.round(Re),It+pe+ie),w.lineWidth=V/15;const ce=this._getLinearGradient();w.strokeStyle=ce||dt,w.stroke(),w.restore()}if(I!==x&&(mt!==0||ut===v)){const ie=we.split(" ").length-1,Re=m(we);for(let ce=0;ce<Re.length;ce++){const he=Re[ce];he===" "&&!$t&&ut===v&&(_t+=(ht-tt*2-Zt)/ie),this._partialTextX=_t,this._partialTextY=It+pe,this._partialText=he,w.fillStrokeShape(this),_t+=this.measureSize(he).width+mt}}else mt!==0&&w.setAttr("letterSpacing",`${mt}px`),this._partialTextX=_t,this._partialTextY=It+pe,this._partialText=we,w.fillStrokeShape(this);w.restore(),rt>1&&(It+=k)}}_hitFunc(w){const nt=this.getWidth(),rt=this.getHeight();w.beginPath(),w.rect(0,0,nt,rt),w.closePath(),w.fillStrokeShape(this)}setText(w){const nt=o.Util._isString(w)?w:w==null?"":w+"";return this._setAttr(b,nt),this}getWidth(){return this.attrs.width===f||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===f||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(w){var nt,rt,tt,V,k,X,I,lt,ut,ht,mt;let dt=y(),vt=this.fontSize(),Ct;dt.save(),dt.font=this._getContextFont(),Ct=dt.measureText(w),dt.restore();const Dt=vt/100;return{actualBoundingBoxAscent:(nt=Ct.actualBoundingBoxAscent)!==null&&nt!==void 0?nt:71.58203125*Dt,actualBoundingBoxDescent:(rt=Ct.actualBoundingBoxDescent)!==null&&rt!==void 0?rt:0,actualBoundingBoxLeft:(tt=Ct.actualBoundingBoxLeft)!==null&&tt!==void 0?tt:-7.421875*Dt,actualBoundingBoxRight:(V=Ct.actualBoundingBoxRight)!==null&&V!==void 0?V:75.732421875*Dt,alphabeticBaseline:(k=Ct.alphabeticBaseline)!==null&&k!==void 0?k:0,emHeightAscent:(X=Ct.emHeightAscent)!==null&&X!==void 0?X:100*Dt,emHeightDescent:(I=Ct.emHeightDescent)!==null&&I!==void 0?I:-20*Dt,fontBoundingBoxAscent:(lt=Ct.fontBoundingBoxAscent)!==null&&lt!==void 0?lt:91*Dt,fontBoundingBoxDescent:(ut=Ct.fontBoundingBoxDescent)!==null&&ut!==void 0?ut:21*Dt,hangingBaseline:(ht=Ct.hangingBaseline)!==null&&ht!==void 0?ht:72.80000305175781*Dt,ideographicBaseline:(mt=Ct.ideographicBaseline)!==null&&mt!==void 0?mt:-21*Dt,width:Ct.width,height:vt}}_getContextFont(){return this.fontStyle()+G+this.fontVariant()+G+(this.fontSize()+T)+K(this.fontFamily())}_addTextLine(w){this.align()===v&&(w=w.trim());const rt=this._getTextWidth(w);return this.textArr.push({text:w,width:rt,lastInParagraph:!1})}_getTextWidth(w){const nt=this.letterSpacing(),rt=w.length;return y().measureText(w).width+nt*rt}_setTextData(){let w=this.text().split(`
`),nt=+this.fontSize(),rt=0,tt=this.lineHeight()*nt,V=this.attrs.width,k=this.attrs.height,X=V!==f&&V!==void 0,I=k!==f&&k!==void 0,lt=this.padding(),ut=V-lt*2,ht=k-lt*2,mt=0,dt=this.wrap(),vt=dt!==L,Ct=dt!==O&&vt,Dt=this.ellipsis();this.textArr=[],y().font=this._getContextFont();const me=Dt?this._getTextWidth(F):0;for(let It=0,xe=w.length;It<xe;++It){let _t=w[It],pe=this._getTextWidth(_t);if(X&&pe>ut)for(;_t.length>0;){let Ae=0,we=m(_t).length,Zt="",$t=0;for(;Ae<we;){const ie=Ae+we>>>1,Re=m(_t),ce=Re.slice(0,ie+1).join(""),he=this._getTextWidth(ce);(Dt&&I&&mt+tt>ht?he+me:he)<=ut?(Ae=ie+1,Zt=ce,$t=he):we=ie}if(Zt){if(Ct){const ce=m(_t),he=m(Zt),da=ce[he.length],Mn=da===G||da===c;let Ja;if(Mn&&$t<=ut)Ja=he.length;else{const On=he.lastIndexOf(G),Ql=he.lastIndexOf(c);Ja=Math.max(On,Ql)+1}Ja>0&&(Ae=Ja,Zt=ce.slice(0,Ae).join(""),$t=this._getTextWidth(Zt))}if(Zt=Zt.trimRight(),this._addTextLine(Zt),rt=Math.max(rt,$t),mt+=tt,this._shouldHandleEllipsis(mt)){this._tryToAddEllipsisToLastLine();break}if(_t=m(_t).slice(Ae).join("").trimLeft(),_t.length>0&&(pe=this._getTextWidth(_t),pe<=ut)){this._addTextLine(_t),mt+=tt,rt=Math.max(rt,pe);break}}else break}else this._addTextLine(_t),mt+=tt,rt=Math.max(rt,pe),this._shouldHandleEllipsis(mt)&&It<xe-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),I&&mt+tt>ht)break}this.textHeight=nt,this.textWidth=rt}_shouldHandleEllipsis(w){const nt=+this.fontSize(),rt=this.lineHeight()*nt,tt=this.attrs.height,V=tt!==f&&tt!==void 0,k=this.padding(),X=tt-k*2;return!(this.wrap()!==L)||V&&w+rt>X}_tryToAddEllipsisToLastLine(){const w=this.attrs.width,nt=w!==f&&w!==void 0,rt=this.padding(),tt=w-rt*2,V=this.ellipsis(),k=this.textArr[this.textArr.length-1];!k||!V||(nt&&(this._getTextWidth(k.text+F)<tt||(k.text=k.text.slice(0,k.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(k.text+F))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const w=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,nt=this.hasShadow();return w&&nt?!0:super._useBufferCanvas()}}return xn.Text=q,q.prototype._fillFunc=A,q.prototype._strokeFunc=B,q.prototype.className=N,q.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,S._registerNode)(q),r.Factory.overWriteSetter(q,"width",(0,C.getNumberOrAutoValidator)()),r.Factory.overWriteSetter(q,"height",(0,C.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(q,"direction",p),r.Factory.addGetterSetter(q,"fontFamily","Arial"),r.Factory.addGetterSetter(q,"fontSize",12,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(q,"fontStyle",_),r.Factory.addGetterSetter(q,"fontVariant",_),r.Factory.addGetterSetter(q,"padding",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(q,"align",u),r.Factory.addGetterSetter(q,"verticalAlign",D),r.Factory.addGetterSetter(q,"lineHeight",1,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(q,"wrap",R),r.Factory.addGetterSetter(q,"ellipsis",!1,(0,C.getBooleanValidator)()),r.Factory.addGetterSetter(q,"letterSpacing",0,(0,C.getNumberValidator)()),r.Factory.addGetterSetter(q,"text","",(0,C.getStringValidator)()),r.Factory.addGetterSetter(q,"textDecoration",""),xn}var Ei={},yh;function Bd(){if(yh)return Ei;yh=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.TextPath=void 0;const o=wt(),r=At(),H=ue(),U=Qr(),C=n0(),S=Rt(),m=Tt(),f="",d="normal";function p(g){g.fillText(this.partialText,0,0)}function v(g){g.strokeText(this.partialText,0,0)}let E=class extends H.Shape{constructor(c){super(c),this.dummyCanvas=o.Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return U.Path.getPathLength(this.dataArray)}_getPointAtLength(c){if(!this.attrs.data)return null;const u=this.pathLength;return c-1>u?null:U.Path.getPointAtLengthOfDataArray(c,this.dataArray)}_readDataAttribute(){this.dataArray=U.Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(c){c.setAttr("font",this._getContextFont()),c.setAttr("textBaseline",this.textBaseline()),c.setAttr("textAlign","left"),c.save();const u=this.textDecoration(),b=this.fill(),N=this.fontSize(),D=this.glyphInfo;u==="underline"&&c.beginPath();for(let h=0;h<D.length;h++){c.save();const s=D[h].p0;c.translate(s.x,s.y),c.rotate(D[h].rotation),this.partialText=D[h].text,c.fillStrokeShape(this),u==="underline"&&(h===0&&c.moveTo(0,N/2+1),c.lineTo(N,N/2+1)),c.restore()}u==="underline"&&(c.strokeStyle=b,c.lineWidth=N/20,c.stroke()),c.restore()}_hitFunc(c){c.beginPath();const u=this.glyphInfo;if(u.length>=1){const b=u[0].p0;c.moveTo(b.x,b.y)}for(let b=0;b<u.length;b++){const N=u[b].p1;c.lineTo(N.x,N.y)}c.setAttr("lineWidth",this.fontSize()),c.setAttr("strokeStyle",this.colorKey),c.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return o.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(c){return C.Text.prototype.setText.call(this,c)}_getContextFont(){return C.Text.prototype._getContextFont.call(this)}_getTextSize(c){const b=this.dummyCanvas.getContext("2d");b.save(),b.font=this._getContextFont();const N=b.measureText(c);return b.restore(),{width:N.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const{width:c,height:u}=this._getTextSize(this.attrs.text);if(this.textWidth=c,this.textHeight=u,this.glyphInfo=[],!this.attrs.data)return null;const b=this.letterSpacing(),N=this.align(),D=this.kerningFunc(),h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*b,0);let s=0;N==="center"&&(s=Math.max(0,this.pathLength/2-h/2)),N==="right"&&(s=Math.max(0,this.pathLength-h));const _=(0,C.stringToArray)(this.text());let T=s;for(let G=0;G<_.length;G++){const Y=this._getPointAtLength(T);if(!Y)return;let x=this._getTextSize(_[G]).width+b;if(_[G]===" "&&N==="justify"){const J=this.text().split(" ").length-1;x+=(this.pathLength-h)/J}const R=this._getPointAtLength(T+x);if(!R)return;const O=U.Path.getLineLength(Y.x,Y.y,R.x,R.y);let L=0;if(D)try{L=D(_[G-1],_[G])*this.fontSize()}catch{L=0}Y.x+=L,R.x+=L,this.textWidth+=L;const F=U.Path.getPointOnLine(L+O/2,Y.x,Y.y,R.x,R.y),j=Math.atan2(R.y-Y.y,R.x-Y.x);this.glyphInfo.push({transposeX:F.x,transposeY:F.y,text:_[G],rotation:j,p0:Y,p1:R}),T+=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const c=[];this.glyphInfo.forEach(function(T){c.push(T.p0.x),c.push(T.p0.y),c.push(T.p1.x),c.push(T.p1.y)});let u=c[0]||0,b=c[0]||0,N=c[1]||0,D=c[1]||0,h,s;for(let T=0;T<c.length/2;T++)h=c[T*2],s=c[T*2+1],u=Math.min(u,h),b=Math.max(b,h),N=Math.min(N,s),D=Math.max(D,s);const _=this.fontSize();return{x:u-_/2,y:N-_/2,width:b-u+_,height:D-N+_}}destroy(){return o.Util.releaseCanvas(this.dummyCanvas),super.destroy()}};return Ei.TextPath=E,E.prototype._fillFunc=p,E.prototype._strokeFunc=v,E.prototype._fillFuncHit=p,E.prototype._strokeFuncHit=v,E.prototype.className="TextPath",E.prototype._attrsAffectingSize=["text","fontSize","data"],(0,m._registerNode)(E),r.Factory.addGetterSetter(E,"data"),r.Factory.addGetterSetter(E,"fontFamily","Arial"),r.Factory.addGetterSetter(E,"fontSize",12,(0,S.getNumberValidator)()),r.Factory.addGetterSetter(E,"fontStyle",d),r.Factory.addGetterSetter(E,"align","left"),r.Factory.addGetterSetter(E,"letterSpacing",0,(0,S.getNumberValidator)()),r.Factory.addGetterSetter(E,"textBaseline","middle"),r.Factory.addGetterSetter(E,"fontVariant",d),r.Factory.addGetterSetter(E,"text",f),r.Factory.addGetterSetter(E,"textDecoration",""),r.Factory.addGetterSetter(E,"kerningFunc",void 0),Ei}var Ti={},vh;function Hd(){if(vh)return Ti;vh=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.Transformer=void 0;const o=wt(),r=At(),H=Qt(),U=ue(),C=a0(),S=jr(),m=Tt(),f=Rt(),d=Tt(),p="tr-konva",v=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(x=>x+`.${p}`).join(" "),E="nodesRect",g=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],c={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},u="ontouchstart"in m.Konva._global;function b(x,R,O){if(x==="rotater")return O;R+=o.Util.degToRad(c[x]||0);const L=(o.Util.radToDeg(R)%360+360)%360;return o.Util._inRange(L,315+22.5,360)||o.Util._inRange(L,0,22.5)?"ns-resize":o.Util._inRange(L,45-22.5,45+22.5)?"nesw-resize":o.Util._inRange(L,90-22.5,90+22.5)?"ew-resize":o.Util._inRange(L,135-22.5,135+22.5)?"nwse-resize":o.Util._inRange(L,180-22.5,180+22.5)?"ns-resize":o.Util._inRange(L,225-22.5,225+22.5)?"nesw-resize":o.Util._inRange(L,270-22.5,270+22.5)?"ew-resize":o.Util._inRange(L,315-22.5,315+22.5)?"nwse-resize":(o.Util.error("Transformer has unknown angle for cursor detection: "+L),"pointer")}const N=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function D(x){return{x:x.x+x.width/2*Math.cos(x.rotation)+x.height/2*Math.sin(-x.rotation),y:x.y+x.height/2*Math.cos(x.rotation)+x.width/2*Math.sin(x.rotation)}}function h(x,R,O){const L=O.x+(x.x-O.x)*Math.cos(R)-(x.y-O.y)*Math.sin(R),F=O.y+(x.x-O.x)*Math.sin(R)+(x.y-O.y)*Math.cos(R);return{...x,rotation:x.rotation+R,x:L,y:F}}function s(x,R){const O=D(x);return h(x,R,O)}function _(x,R,O){let L=R;for(let F=0;F<x.length;F++){const j=m.Konva.getAngle(x[F]),J=Math.abs(j-R)%(Math.PI*2);Math.min(J,Math.PI*2-J)<O&&(L=j)}return L}let T=0,G=class extends S.Group{constructor(R){super(R),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(v,this.update),this.getNode()&&this.update()}attachTo(R){return this.setNode(R),this}setNode(R){return o.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([R])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return p+this._id}setNodes(R=[]){this._nodes&&this._nodes.length&&this.detach();const O=R.filter(F=>F.isAncestorOf(this)?(o.Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=R=O,R.length===1&&this.useSingleNodeRotation()?this.rotation(R[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(F=>{const j=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(F._attrsAffectingSize.length){const J=F._attrsAffectingSize.map(K=>K+"Change."+this._getEventNamespace()).join(" ");F.on(J,j)}F.on(g.map(J=>J+`.${this._getEventNamespace()}`).join(" "),j),F.on(`absoluteTransformChange.${this._getEventNamespace()}`,j),this._proxyDrag(F)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(R){let O;R.on(`dragstart.${this._getEventNamespace()}`,L=>{O=R.getAbsolutePosition(),!this.isDragging()&&R!==this.findOne(".back")&&this.startDrag(L,!1)}),R.on(`dragmove.${this._getEventNamespace()}`,L=>{if(!O)return;const F=R.getAbsolutePosition(),j=F.x-O.x,J=F.y-O.y;this.nodes().forEach(K=>{if(K===R||K.isDragging())return;const Z=K.getAbsolutePosition();K.setAbsolutePosition({x:Z.x+j,y:Z.y+J}),K.startDrag(L)}),O=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(R=>{R.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(E),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(E,this.__getNodeRect)}__getNodeShape(R,O=this.rotation(),L){const F=R.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),j=R.getAbsoluteScale(L),J=R.getAbsolutePosition(L),K=F.x*j.x-R.offsetX()*j.x,Z=F.y*j.y-R.offsetY()*j.y,y=(m.Konva.getAngle(R.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),A={x:J.x+K*Math.cos(y)+Z*Math.sin(-y),y:J.y+Z*Math.cos(y)+K*Math.sin(y),width:F.width*j.x,height:F.height*j.y,rotation:y};return h(A,-m.Konva.getAngle(O),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const O=[];this.nodes().map(y=>{const A=y.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),B=[{x:A.x,y:A.y},{x:A.x+A.width,y:A.y},{x:A.x+A.width,y:A.y+A.height},{x:A.x,y:A.y+A.height}],z=y.getAbsoluteTransform();B.forEach(function(q){const at=z.point(q);O.push(at)})});const L=new o.Transform;L.rotate(-m.Konva.getAngle(this.rotation()));let F=1/0,j=1/0,J=-1/0,K=-1/0;O.forEach(function(y){const A=L.point(y);F===void 0&&(F=J=A.x,j=K=A.y),F=Math.min(F,A.x),j=Math.min(j,A.y),J=Math.max(J,A.x),K=Math.max(K,A.y)}),L.invert();const Z=L.point({x:F,y:j});return{x:Z.x,y:Z.y,width:J-F,height:K-j,rotation:m.Konva.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),N.forEach(R=>{this._createAnchor(R)}),this._createAnchor("rotater")}_createAnchor(R){const O=new C.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:R+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:u?10:"auto"}),L=this;O.on("mousedown touchstart",function(F){L._handleMouseDown(F)}),O.on("dragstart",F=>{O.stopDrag(),F.cancelBubble=!0}),O.on("dragend",F=>{F.cancelBubble=!0}),O.on("mouseenter",()=>{const F=m.Konva.getAngle(this.rotation()),j=this.rotateAnchorCursor(),J=b(R,F,j);O.getStage().content&&(O.getStage().content.style.cursor=J),this._cursorChange=!0}),O.on("mouseout",()=>{O.getStage().content&&(O.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(O)}_createBack(){const R=new U.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc(O,L){const F=L.getParent(),j=F.padding();O.beginPath(),O.rect(-j,-j,L.width()+j*2,L.height()+j*2),O.moveTo(L.width()/2,-j),F.rotateEnabled()&&F.rotateLineVisible()&&O.lineTo(L.width()/2,-F.rotateAnchorOffset()*o.Util._sign(L.height())-j),O.fillStrokeShape(L)},hitFunc:(O,L)=>{if(!this.shouldOverdrawWholeArea())return;const F=this.padding();O.beginPath(),O.rect(-F,-F,L.width()+F*2,L.height()+F*2),O.fillStrokeShape(L)}});this.add(R),this._proxyDrag(R),R.on("dragstart",O=>{O.cancelBubble=!0}),R.on("dragmove",O=>{O.cancelBubble=!0}),R.on("dragend",O=>{O.cancelBubble=!0}),this.on("dragmove",O=>{this.update()})}_handleMouseDown(R){if(this._transforming)return;this._movingAnchorName=R.target.name().split(" ")[0];const O=this._getNodeRect(),L=O.width,F=O.height,j=Math.sqrt(Math.pow(L,2)+Math.pow(F,2));this.sin=Math.abs(F/j),this.cos=Math.abs(L/j),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const J=R.target.getAbsolutePosition(),K=R.target.getStage().getPointerPosition();this._anchorDragOffset={x:K.x-J.x,y:K.y-J.y},T++,this._fire("transformstart",{evt:R.evt,target:this.getNode()}),this._nodes.forEach(Z=>{Z._fire("transformstart",{evt:R.evt,target:Z})})}_handleMouseMove(R){let O,L,F;const j=this.findOne("."+this._movingAnchorName),J=j.getStage();J.setPointersPositions(R);const K=J.getPointerPosition();let Z={x:K.x-this._anchorDragOffset.x,y:K.y-this._anchorDragOffset.y};const y=j.getAbsolutePosition();this.anchorDragBoundFunc()&&(Z=this.anchorDragBoundFunc()(y,Z,R)),j.setAbsolutePosition(Z);const A=j.getAbsolutePosition();if(y.x===A.x&&y.y===A.y)return;if(this._movingAnchorName==="rotater"){const tt=this._getNodeRect();O=j.x()-tt.width/2,L=-j.y()+tt.height/2;let V=Math.atan2(-L,O)+Math.PI/2;tt.height<0&&(V-=Math.PI);const X=m.Konva.getAngle(this.rotation())+V,I=m.Konva.getAngle(this.rotationSnapTolerance()),ut=_(this.rotationSnaps(),X,I)-tt.rotation,ht=s(tt,ut);this._fitNodesInto(ht,R);return}const B=this.shiftBehavior();let z;B==="inverted"?z=this.keepRatio()&&!R.shiftKey:B==="none"?z=this.keepRatio():z=this.keepRatio()||R.shiftKey;let q=this.centeredScaling()||R.altKey;if(this._movingAnchorName==="top-left"){if(z){const tt=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};F=Math.sqrt(Math.pow(tt.x-j.x(),2)+Math.pow(tt.y-j.y(),2));const V=this.findOne(".top-left").x()>tt.x?-1:1,k=this.findOne(".top-left").y()>tt.y?-1:1;O=F*this.cos*V,L=F*this.sin*k,this.findOne(".top-left").x(tt.x-O),this.findOne(".top-left").y(tt.y-L)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(j.y());else if(this._movingAnchorName==="top-right"){if(z){const tt=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};F=Math.sqrt(Math.pow(j.x()-tt.x,2)+Math.pow(tt.y-j.y(),2));const V=this.findOne(".top-right").x()<tt.x?-1:1,k=this.findOne(".top-right").y()>tt.y?-1:1;O=F*this.cos*V,L=F*this.sin*k,this.findOne(".top-right").x(tt.x+O),this.findOne(".top-right").y(tt.y-L)}var at=j.position();this.findOne(".top-left").y(at.y),this.findOne(".bottom-right").x(at.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(j.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(j.x());else if(this._movingAnchorName==="bottom-left"){if(z){const tt=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};F=Math.sqrt(Math.pow(tt.x-j.x(),2)+Math.pow(j.y()-tt.y,2));const V=tt.x<j.x()?-1:1,k=j.y()<tt.y?-1:1;O=F*this.cos*V,L=F*this.sin*k,j.x(tt.x-O),j.y(tt.y+L)}at=j.position(),this.findOne(".top-left").x(at.x),this.findOne(".bottom-right").y(at.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(j.y());else if(this._movingAnchorName==="bottom-right"){if(z){const tt=q?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};F=Math.sqrt(Math.pow(j.x()-tt.x,2)+Math.pow(j.y()-tt.y,2));const V=this.findOne(".bottom-right").x()<tt.x?-1:1,k=this.findOne(".bottom-right").y()<tt.y?-1:1;O=F*this.cos*V,L=F*this.sin*k,this.findOne(".bottom-right").x(tt.x+O),this.findOne(".bottom-right").y(tt.y+L)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(q=this.centeredScaling()||R.altKey,q){const tt=this.findOne(".top-left"),V=this.findOne(".bottom-right"),k=tt.x(),X=tt.y(),I=this.getWidth()-V.x(),lt=this.getHeight()-V.y();V.move({x:-k,y:-X}),tt.move({x:I,y:lt})}const w=this.findOne(".top-left").getAbsolutePosition();O=w.x,L=w.y;const nt=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),rt=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:O,y:L,width:nt,height:rt,rotation:m.Konva.getAngle(this.rotation())},R)}_handleMouseUp(R){this._removeEvents(R)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(R){var O;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const L=this.getNode();T--,this._fire("transformend",{evt:R,target:L}),(O=this.getLayer())===null||O===void 0||O.batchDraw(),L&&this._nodes.forEach(F=>{var j;F._fire("transformend",{evt:R,target:F}),(j=F.getLayer())===null||j===void 0||j.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(R,O){const L=this._getNodeRect(),F=1;if(o.Util._inRange(R.width,-this.padding()*2-F,F)){this.update();return}if(o.Util._inRange(R.height,-this.padding()*2-F,F)){this.update();return}const j=new o.Transform;if(j.rotate(m.Konva.getAngle(this.rotation())),this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("left")>=0){const z=j.point({x:-this.padding()*2,y:0});R.x+=z.x,R.y+=z.y,R.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y}else if(this._movingAnchorName&&R.width<0&&this._movingAnchorName.indexOf("right")>=0){const z=j.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,R.width+=this.padding()*2}if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("top")>=0){const z=j.point({x:0,y:-this.padding()*2});R.x+=z.x,R.y+=z.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,R.height+=this.padding()*2}else if(this._movingAnchorName&&R.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const z=j.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=z.x,this._anchorDragOffset.y-=z.y,R.height+=this.padding()*2}if(this.boundBoxFunc()){const z=this.boundBoxFunc()(L,R);z?R=z:o.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const J=1e7,K=new o.Transform;K.translate(L.x,L.y),K.rotate(L.rotation),K.scale(L.width/J,L.height/J);const Z=new o.Transform,y=R.width/J,A=R.height/J;this.flipEnabled()===!1?(Z.translate(R.x,R.y),Z.rotate(R.rotation),Z.translate(R.width<0?R.width:0,R.height<0?R.height:0),Z.scale(Math.abs(y),Math.abs(A))):(Z.translate(R.x,R.y),Z.rotate(R.rotation),Z.scale(y,A));const B=Z.multiply(K.invert());this._nodes.forEach(z=>{var q;const at=z.getParent().getAbsoluteTransform(),w=z.getTransform().copy();w.translate(z.offsetX(),z.offsetY());const nt=new o.Transform;nt.multiply(at.copy().invert()).multiply(B).multiply(at).multiply(w);const rt=nt.decompose();z.setAttrs(rt),(q=z.getLayer())===null||q===void 0||q.batchDraw()}),this.rotation(o.Util._getRotation(R.rotation)),this._nodes.forEach(z=>{this._fire("transform",{evt:O,target:z}),z._fire("transform",{evt:O,target:z})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(R,O){this.findOne(R).setAttrs(O)}update(){var R;const O=this._getNodeRect();this.rotation(o.Util._getRotation(O.rotation));const L=O.width,F=O.height,j=this.enabledAnchors(),J=this.resizeEnabled(),K=this.padding(),Z=this.anchorSize(),y=this.find("._anchor");y.forEach(B=>{B.setAttrs({width:Z,height:Z,offsetX:Z/2,offsetY:Z/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:Z/2+K,offsetY:Z/2+K,visible:J&&j.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:L/2,y:0,offsetY:Z/2+K,visible:J&&j.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:L,y:0,offsetX:Z/2-K,offsetY:Z/2+K,visible:J&&j.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:F/2,offsetX:Z/2+K,visible:J&&j.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:L,y:F/2,offsetX:Z/2-K,visible:J&&j.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:F,offsetX:Z/2+K,offsetY:Z/2-K,visible:J&&j.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:L/2,y:F,offsetY:Z/2-K,visible:J&&j.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:L,y:F,offsetX:Z/2-K,offsetY:Z/2-K,visible:J&&j.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:L/2,y:-this.rotateAnchorOffset()*o.Util._sign(F)-K,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:L,height:F,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0});const A=this.anchorStyleFunc();A&&y.forEach(B=>{A(B)}),(R=this.getLayer())===null||R===void 0||R.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const R=this.findOne("."+this._movingAnchorName);R&&R.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),S.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return H.Node.prototype.toObject.call(this)}clone(R){return H.Node.prototype.clone.call(this,R)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ti.Transformer=G,G.isTransforming=()=>T>0;function Y(x){return x instanceof Array||o.Util.warn("enabledAnchors value should be an array"),x instanceof Array&&x.forEach(function(R){N.indexOf(R)===-1&&o.Util.warn("Unknown anchor name: "+R+". Available names are: "+N.join(", "))}),x||[]}return G.prototype.className="Transformer",(0,d._registerNode)(G),r.Factory.addGetterSetter(G,"enabledAnchors",N,Y),r.Factory.addGetterSetter(G,"flipEnabled",!0,(0,f.getBooleanValidator)()),r.Factory.addGetterSetter(G,"resizeEnabled",!0),r.Factory.addGetterSetter(G,"anchorSize",10,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"rotateEnabled",!0),r.Factory.addGetterSetter(G,"rotateLineVisible",!0),r.Factory.addGetterSetter(G,"rotationSnaps",[]),r.Factory.addGetterSetter(G,"rotateAnchorOffset",50,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"rotateAnchorCursor","crosshair"),r.Factory.addGetterSetter(G,"rotationSnapTolerance",5,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"borderEnabled",!0),r.Factory.addGetterSetter(G,"anchorStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(G,"anchorStrokeWidth",1,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"anchorFill","white"),r.Factory.addGetterSetter(G,"anchorCornerRadius",0,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"borderStroke","rgb(0, 161, 255)"),r.Factory.addGetterSetter(G,"borderStrokeWidth",1,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"borderDash"),r.Factory.addGetterSetter(G,"keepRatio",!0),r.Factory.addGetterSetter(G,"shiftBehavior","default"),r.Factory.addGetterSetter(G,"centeredScaling",!1),r.Factory.addGetterSetter(G,"ignoreStroke",!1),r.Factory.addGetterSetter(G,"padding",0,(0,f.getNumberValidator)()),r.Factory.addGetterSetter(G,"nodes"),r.Factory.addGetterSetter(G,"node"),r.Factory.addGetterSetter(G,"boundBoxFunc"),r.Factory.addGetterSetter(G,"anchorDragBoundFunc"),r.Factory.addGetterSetter(G,"anchorStyleFunc"),r.Factory.addGetterSetter(G,"shouldOverdrawWholeArea",!1),r.Factory.addGetterSetter(G,"useSingleNodeRotation",!0),r.Factory.backCompat(G,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"}),Ti}var Ni={},_h;function Vd(){if(_h)return Ni;_h=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.Wedge=void 0;const o=At(),r=ue(),H=Tt(),U=Rt(),C=Tt();let S=class extends r.Shape{_sceneFunc(f){f.beginPath(),f.arc(0,0,this.radius(),0,H.Konva.getAngle(this.angle()),this.clockwise()),f.lineTo(0,0),f.closePath(),f.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(f){this.radius(f/2)}setHeight(f){this.radius(f/2)}};return Ni.Wedge=S,S.prototype.className="Wedge",S.prototype._centroid=!0,S.prototype._attrsAffectingSize=["radius"],(0,C._registerNode)(S),o.Factory.addGetterSetter(S,"radius",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"angle",0,(0,U.getNumberValidator)()),o.Factory.addGetterSetter(S,"clockwise",!1),o.Factory.backCompat(S,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Ni}var xi={},Sh;function Ld(){if(Sh)return xi;Sh=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.Blur=void 0;const o=At(),r=Qt(),H=Rt();function U(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const C=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],S=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function m(d,p){const v=d.data,E=d.width,g=d.height;let c,u,b,N,D,h,s,_,T,G,Y,x,R,O,L,F,j,J,K,Z;const y=p+p+1,A=E-1,B=g-1,z=p+1,q=z*(z+1)/2,at=new U,w=C[p],nt=S[p];let rt=null,tt=at,V=null,k=null;for(let X=1;X<y;X++)tt=tt.next=new U,X===z&&(rt=tt);tt.next=at,b=u=0;for(let X=0;X<g;X++){x=R=O=L=N=D=h=s=0,_=z*(F=v[u]),T=z*(j=v[u+1]),G=z*(J=v[u+2]),Y=z*(K=v[u+3]),N+=q*F,D+=q*j,h+=q*J,s+=q*K,tt=at;for(let I=0;I<z;I++)tt.r=F,tt.g=j,tt.b=J,tt.a=K,tt=tt.next;for(let I=1;I<z;I++)c=u+((A<I?A:I)<<2),N+=(tt.r=F=v[c])*(Z=z-I),D+=(tt.g=j=v[c+1])*Z,h+=(tt.b=J=v[c+2])*Z,s+=(tt.a=K=v[c+3])*Z,x+=F,R+=j,O+=J,L+=K,tt=tt.next;V=at,k=rt;for(let I=0;I<E;I++)v[u+3]=K=s*w>>nt,K!==0?(K=255/K,v[u]=(N*w>>nt)*K,v[u+1]=(D*w>>nt)*K,v[u+2]=(h*w>>nt)*K):v[u]=v[u+1]=v[u+2]=0,N-=_,D-=T,h-=G,s-=Y,_-=V.r,T-=V.g,G-=V.b,Y-=V.a,c=b+((c=I+p+1)<A?c:A)<<2,x+=V.r=v[c],R+=V.g=v[c+1],O+=V.b=v[c+2],L+=V.a=v[c+3],N+=x,D+=R,h+=O,s+=L,V=V.next,_+=F=k.r,T+=j=k.g,G+=J=k.b,Y+=K=k.a,x-=F,R-=j,O-=J,L-=K,k=k.next,u+=4;b+=E}for(let X=0;X<E;X++){R=O=L=x=D=h=s=N=0,u=X<<2,_=z*(F=v[u]),T=z*(j=v[u+1]),G=z*(J=v[u+2]),Y=z*(K=v[u+3]),N+=q*F,D+=q*j,h+=q*J,s+=q*K,tt=at;for(let lt=0;lt<z;lt++)tt.r=F,tt.g=j,tt.b=J,tt.a=K,tt=tt.next;let I=E;for(let lt=1;lt<=p;lt++)u=I+X<<2,N+=(tt.r=F=v[u])*(Z=z-lt),D+=(tt.g=j=v[u+1])*Z,h+=(tt.b=J=v[u+2])*Z,s+=(tt.a=K=v[u+3])*Z,x+=F,R+=j,O+=J,L+=K,tt=tt.next,lt<B&&(I+=E);u=X,V=at,k=rt;for(let lt=0;lt<g;lt++)c=u<<2,v[c+3]=K=s*w>>nt,K>0?(K=255/K,v[c]=(N*w>>nt)*K,v[c+1]=(D*w>>nt)*K,v[c+2]=(h*w>>nt)*K):v[c]=v[c+1]=v[c+2]=0,N-=_,D-=T,h-=G,s-=Y,_-=V.r,T-=V.g,G-=V.b,Y-=V.a,c=X+((c=lt+z)<B?c:B)*E<<2,N+=x+=V.r=v[c],D+=R+=V.g=v[c+1],h+=O+=V.b=v[c+2],s+=L+=V.a=v[c+3],V=V.next,_+=F=k.r,T+=j=k.g,G+=J=k.b,Y+=K=k.a,x-=F,R-=j,O-=J,L-=K,k=k.next,u+=E}}const f=function(p){const v=Math.round(this.blurRadius());v>0&&m(p,v)};return xi.Blur=f,o.Factory.addGetterSetter(r.Node,"blurRadius",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),xi}var Ai={},bh;function qd(){if(bh)return Ai;bh=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.Brighten=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=this.brightness()*255,m=C.data,f=m.length;for(let d=0;d<f;d+=4)m[d]+=S,m[d+1]+=S,m[d+2]+=S};return Ai.Brighten=U,o.Factory.addGetterSetter(r.Node,"brightness",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Ai}var Ri={},Ch;function Pd(){if(Ch)return Ri;Ch=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.Contrast=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=Math.pow((this.contrast()+100)/100,2),m=C.data,f=m.length;let d=150,p=150,v=150;for(let E=0;E<f;E+=4)d=m[E],p=m[E+1],v=m[E+2],d/=255,d-=.5,d*=S,d+=.5,d*=255,p/=255,p-=.5,p*=S,p+=.5,p*=255,v/=255,v-=.5,v*=S,v+=.5,v*=255,d=d<0?0:d>255?255:d,p=p<0?0:p>255?255:p,v=v<0?0:v>255?255:v,m[E]=d,m[E+1]=p,m[E+2]=v};return Ri.Contrast=U,o.Factory.addGetterSetter(r.Node,"contrast",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Ri}var Mi={},Eh;function Yd(){if(Eh)return Mi;Eh=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.Emboss=void 0;const o=At(),r=Qt(),H=wt(),U=Rt(),C=function(S){const m=this.embossStrength()*10,f=this.embossWhiteLevel()*255,d=this.embossDirection(),p=this.embossBlend(),v=S.data,E=S.width,g=S.height,c=E*4;let u=0,b=0,N=g;switch(d){case"top-left":u=-1,b=-1;break;case"top":u=-1,b=0;break;case"top-right":u=-1,b=1;break;case"right":u=0,b=1;break;case"bottom-right":u=1,b=1;break;case"bottom":u=1,b=0;break;case"bottom-left":u=1,b=-1;break;case"left":u=0,b=-1;break;default:H.Util.error("Unknown emboss direction: "+d)}do{const D=(N-1)*c;let h=u;N+h<1&&(h=0),N+h>g&&(h=0);const s=(N-1+h)*E*4;let _=E;do{const T=D+(_-1)*4;let G=b;_+G<1&&(G=0),_+G>E&&(G=0);const Y=s+(_-1+G)*4,x=v[T]-v[Y],R=v[T+1]-v[Y+1],O=v[T+2]-v[Y+2];let L=x;const F=L>0?L:-L,j=R>0?R:-R,J=O>0?O:-O;if(j>F&&(L=R),J>F&&(L=O),L*=m,p){const K=v[T]+L,Z=v[T+1]+L,y=v[T+2]+L;v[T]=K>255?255:K<0?0:K,v[T+1]=Z>255?255:Z<0?0:Z,v[T+2]=y>255?255:y<0?0:y}else{let K=f-L;K<0?K=0:K>255&&(K=255),v[T]=v[T+1]=v[T+2]=K}}while(--_)}while(--N)};return Mi.Emboss=C,o.Factory.addGetterSetter(r.Node,"embossStrength",.5,(0,U.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"embossWhiteLevel",.5,(0,U.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"embossDirection","top-left",void 0,o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"embossBlend",!1,void 0,o.Factory.afterSetFilter),Mi}var Oi={},Th;function Fd(){if(Th)return Oi;Th=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Enhance=void 0;const o=At(),r=Qt(),H=Rt();function U(S,m,f,d,p){const v=f-m,E=p-d;if(v===0)return d+E/2;if(E===0)return d;let g=(S-m)/v;return g=E*g+d,g}const C=function(S){const m=S.data,f=m.length;let d=m[0],p=d,v,E=m[1],g=E,c,u=m[2],b=u,N;const D=this.enhance();if(D===0)return;for(let x=0;x<f;x+=4)v=m[x+0],v<d?d=v:v>p&&(p=v),c=m[x+1],c<E?E=c:c>g&&(g=c),N=m[x+2],N<u?u=N:N>b&&(b=N);p===d&&(p=255,d=0),g===E&&(g=255,E=0),b===u&&(b=255,u=0);let h,s,_,T,G,Y;if(D>0)h=p+D*(255-p),s=d-D*(d-0),_=g+D*(255-g),T=E-D*(E-0),G=b+D*(255-b),Y=u-D*(u-0);else{const x=(p+d)*.5;h=p+D*(p-x),s=d+D*(d-x);const R=(g+E)*.5;_=g+D*(g-R),T=E+D*(E-R);const O=(b+u)*.5;G=b+D*(b-O),Y=u+D*(u-O)}for(let x=0;x<f;x+=4)m[x+0]=U(m[x+0],d,p,s,h),m[x+1]=U(m[x+1],E,g,T,_),m[x+2]=U(m[x+2],u,b,Y,G)};return Oi.Enhance=C,o.Factory.addGetterSetter(r.Node,"enhance",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Oi}var Di={},Nh;function Kd(){if(Nh)return Di;Nh=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Grayscale=void 0;const o=function(r){const H=r.data,U=H.length;for(let C=0;C<U;C+=4){const S=.34*H[C]+.5*H[C+1]+.16*H[C+2];H[C]=S,H[C+1]=S,H[C+2]=S}};return Di.Grayscale=o,Di}var Gi={},xh;function wd(){if(xh)return Gi;xh=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.HSL=void 0;const o=At(),r=Qt(),H=Rt();o.Factory.addGetterSetter(r.Node,"hue",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"saturation",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"luminance",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter);const U=function(C){const S=C.data,m=S.length,f=1,d=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,v=this.luminance()*127,E=f*d*Math.cos(p*Math.PI/180),g=f*d*Math.sin(p*Math.PI/180),c=.299*f+.701*E+.167*g,u=.587*f-.587*E+.33*g,b=.114*f-.114*E-.497*g,N=.299*f-.299*E-.328*g,D=.587*f+.413*E+.035*g,h=.114*f-.114*E+.293*g,s=.299*f-.3*E+1.25*g,_=.587*f-.586*E-1.05*g,T=.114*f+.886*E-.2*g;let G,Y,x,R;for(let O=0;O<m;O+=4)G=S[O+0],Y=S[O+1],x=S[O+2],R=S[O+3],S[O+0]=c*G+u*Y+b*x+v,S[O+1]=N*G+D*Y+h*x+v,S[O+2]=s*G+_*Y+T*x+v,S[O+3]=R};return Gi.HSL=U,Gi}var Ui={},Ah;function jd(){if(Ah)return Ui;Ah=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.HSV=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=C.data,m=S.length,f=Math.pow(2,this.value()),d=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,v=f*d*Math.cos(p*Math.PI/180),E=f*d*Math.sin(p*Math.PI/180),g=.299*f+.701*v+.167*E,c=.587*f-.587*v+.33*E,u=.114*f-.114*v-.497*E,b=.299*f-.299*v-.328*E,N=.587*f+.413*v+.035*E,D=.114*f-.114*v+.293*E,h=.299*f-.3*v+1.25*E,s=.587*f-.586*v-1.05*E,_=.114*f+.886*v-.2*E;for(let T=0;T<m;T+=4){const G=S[T+0],Y=S[T+1],x=S[T+2],R=S[T+3];S[T+0]=g*G+c*Y+u*x,S[T+1]=b*G+N*Y+D*x,S[T+2]=h*G+s*Y+_*x,S[T+3]=R}};return Ui.HSV=U,o.Factory.addGetterSetter(r.Node,"hue",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"saturation",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"value",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Ui}var zi={},Rh;function Xd(){if(Rh)return zi;Rh=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.Invert=void 0;const o=function(r){const H=r.data,U=H.length;for(let C=0;C<U;C+=4)H[C]=255-H[C],H[C+1]=255-H[C+1],H[C+2]=255-H[C+2]};return zi.Invert=o,zi}var Bi={},Mh;function Qd(){if(Mh)return Bi;Mh=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.Kaleidoscope=void 0;const o=At(),r=Qt(),H=wt(),U=Rt(),C=function(f,d,p){const v=f.data,E=d.data,g=f.width,c=f.height,u=p.polarCenterX||g/2,b=p.polarCenterY||c/2;let N=Math.sqrt(u*u+b*b),D=g-u,h=c-b;const s=Math.sqrt(D*D+h*h);N=s>N?s:N;const _=c,T=g,G=360/T*Math.PI/180;for(let Y=0;Y<T;Y+=1){const x=Math.sin(Y*G),R=Math.cos(Y*G);for(let O=0;O<_;O+=1){D=Math.floor(u+N*O/_*R),h=Math.floor(b+N*O/_*x);let L=(h*g+D)*4;const F=v[L+0],j=v[L+1],J=v[L+2],K=v[L+3];L=(Y+O*g)*4,E[L+0]=F,E[L+1]=j,E[L+2]=J,E[L+3]=K}}},S=function(f,d,p){const v=f.data,E=d.data,g=f.width,c=f.height,u=p.polarCenterX||g/2,b=p.polarCenterY||c/2;let N=Math.sqrt(u*u+b*b),D=g-u,h=c-b;const s=Math.sqrt(D*D+h*h);N=s>N?s:N;const _=c,T=g,G=0;let Y,x;for(D=0;D<g;D+=1)for(h=0;h<c;h+=1){const R=D-u,O=h-b,L=Math.sqrt(R*R+O*O)*_/N;let F=(Math.atan2(O,R)*180/Math.PI+360+G)%360;F=F*T/360,Y=Math.floor(F),x=Math.floor(L);let j=(x*g+Y)*4;const J=v[j+0],K=v[j+1],Z=v[j+2],y=v[j+3];j=(h*g+D)*4,E[j+0]=J,E[j+1]=K,E[j+2]=Z,E[j+3]=y}},m=function(f){const d=f.width,p=f.height;let v,E,g,c,u,b,N,D,h,s,_=Math.round(this.kaleidoscopePower());const T=Math.round(this.kaleidoscopeAngle()),G=Math.floor(d*(T%360)/360);if(_<1)return;const Y=H.Util.createCanvasElement();Y.width=d,Y.height=p;const x=Y.getContext("2d").getImageData(0,0,d,p);H.Util.releaseCanvas(Y),C(f,x,{polarCenterX:d/2,polarCenterY:p/2});let R=d/Math.pow(2,_);for(;R<=8;)R=R*2,_-=1;R=Math.ceil(R);let O=R,L=0,F=O,j=1;for(G+R>d&&(L=O,F=0,j=-1),E=0;E<p;E+=1)for(v=L;v!==F;v+=j)g=Math.round(v+G)%d,h=(d*E+g)*4,u=x.data[h+0],b=x.data[h+1],N=x.data[h+2],D=x.data[h+3],s=(d*E+v)*4,x.data[s+0]=u,x.data[s+1]=b,x.data[s+2]=N,x.data[s+3]=D;for(E=0;E<p;E+=1)for(O=Math.floor(R),c=0;c<_;c+=1){for(v=0;v<O+1;v+=1)h=(d*E+v)*4,u=x.data[h+0],b=x.data[h+1],N=x.data[h+2],D=x.data[h+3],s=(d*E+O*2-v-1)*4,x.data[s+0]=u,x.data[s+1]=b,x.data[s+2]=N,x.data[s+3]=D;O*=2}S(x,f,{})};return Bi.Kaleidoscope=m,o.Factory.addGetterSetter(r.Node,"kaleidoscopePower",2,(0,U.getNumberValidator)(),o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"kaleidoscopeAngle",0,(0,U.getNumberValidator)(),o.Factory.afterSetFilter),Bi}var Hi={},Oh;function Zd(){if(Oh)return Hi;Oh=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.Mask=void 0;const o=At(),r=Qt(),H=Rt();function U(g,c,u){let b=(u*g.width+c)*4;const N=[];return N.push(g.data[b++],g.data[b++],g.data[b++],g.data[b++]),N}function C(g,c){return Math.sqrt(Math.pow(g[0]-c[0],2)+Math.pow(g[1]-c[1],2)+Math.pow(g[2]-c[2],2))}function S(g){const c=[0,0,0];for(let u=0;u<g.length;u++)c[0]+=g[u][0],c[1]+=g[u][1],c[2]+=g[u][2];return c[0]/=g.length,c[1]/=g.length,c[2]/=g.length,c}function m(g,c){const u=U(g,0,0),b=U(g,g.width-1,0),N=U(g,0,g.height-1),D=U(g,g.width-1,g.height-1),h=c||10;if(C(u,b)<h&&C(b,D)<h&&C(D,N)<h&&C(N,u)<h){const s=S([b,u,D,N]),_=[];for(let T=0;T<g.width*g.height;T++){const G=C(s,[g.data[T*4],g.data[T*4+1],g.data[T*4+2]]);_[T]=G<h?0:255}return _}}function f(g,c){for(let u=0;u<g.width*g.height;u++)g.data[4*u+3]=c[u]}function d(g,c,u){const b=[1,1,1,1,0,1,1,1,1],N=Math.round(Math.sqrt(b.length)),D=Math.floor(N/2),h=[];for(let s=0;s<u;s++)for(let _=0;_<c;_++){const T=s*c+_;let G=0;for(let Y=0;Y<N;Y++)for(let x=0;x<N;x++){const R=s+Y-D,O=_+x-D;if(R>=0&&R<u&&O>=0&&O<c){const L=R*c+O,F=b[Y*N+x];G+=g[L]*F}}h[T]=G===2040?255:0}return h}function p(g,c,u){const b=[1,1,1,1,1,1,1,1,1],N=Math.round(Math.sqrt(b.length)),D=Math.floor(N/2),h=[];for(let s=0;s<u;s++)for(let _=0;_<c;_++){const T=s*c+_;let G=0;for(let Y=0;Y<N;Y++)for(let x=0;x<N;x++){const R=s+Y-D,O=_+x-D;if(R>=0&&R<u&&O>=0&&O<c){const L=R*c+O,F=b[Y*N+x];G+=g[L]*F}}h[T]=G>=1020?255:0}return h}function v(g,c,u){const b=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],N=Math.round(Math.sqrt(b.length)),D=Math.floor(N/2),h=[];for(let s=0;s<u;s++)for(let _=0;_<c;_++){const T=s*c+_;let G=0;for(let Y=0;Y<N;Y++)for(let x=0;x<N;x++){const R=s+Y-D,O=_+x-D;if(R>=0&&R<u&&O>=0&&O<c){const L=R*c+O,F=b[Y*N+x];G+=g[L]*F}}h[T]=G}return h}const E=function(g){const c=this.threshold();let u=m(g,c);return u&&(u=d(u,g.width,g.height),u=p(u,g.width,g.height),u=v(u,g.width,g.height),f(g,u)),g};return Hi.Mask=E,o.Factory.addGetterSetter(r.Node,"threshold",0,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Hi}var Vi={},Dh;function Jd(){if(Dh)return Vi;Dh=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Noise=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=this.noise()*255,m=C.data,f=m.length,d=S/2;for(let p=0;p<f;p+=4)m[p+0]+=d-2*d*Math.random(),m[p+1]+=d-2*d*Math.random(),m[p+2]+=d-2*d*Math.random()};return Vi.Noise=U,o.Factory.addGetterSetter(r.Node,"noise",.2,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),Vi}var Li={},Gh;function kd(){if(Gh)return Li;Gh=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.Pixelate=void 0;const o=At(),r=wt(),H=Qt(),U=Rt(),C=function(S){let m=Math.ceil(this.pixelSize()),f=S.width,d=S.height,p=Math.ceil(f/m),v=Math.ceil(d/m),E=S.data;if(m<=0){r.Util.error("pixelSize value can not be <= 0");return}for(let g=0;g<p;g+=1)for(let c=0;c<v;c+=1){let u=0,b=0,N=0,D=0;const h=g*m,s=h+m,_=c*m,T=_+m;let G=0;for(let Y=h;Y<s;Y+=1)if(!(Y>=f))for(let x=_;x<T;x+=1){if(x>=d)continue;const R=(f*x+Y)*4;u+=E[R+0],b+=E[R+1],N+=E[R+2],D+=E[R+3],G+=1}u=u/G,b=b/G,N=N/G,D=D/G;for(let Y=h;Y<s;Y+=1)if(!(Y>=f))for(let x=_;x<T;x+=1){if(x>=d)continue;const R=(f*x+Y)*4;E[R+0]=u,E[R+1]=b,E[R+2]=N,E[R+3]=D}}};return Li.Pixelate=C,o.Factory.addGetterSetter(H.Node,"pixelSize",8,(0,U.getNumberValidator)(),o.Factory.afterSetFilter),Li}var qi={},Uh;function Wd(){if(Uh)return qi;Uh=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.Posterize=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=Math.round(this.levels()*254)+1,m=C.data,f=m.length,d=255/S;for(let p=0;p<f;p+=1)m[p]=Math.floor(m[p]/d)*d};return qi.Posterize=U,o.Factory.addGetterSetter(r.Node,"levels",.5,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),qi}var Pi={},zh;function Id(){if(zh)return Pi;zh=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.RGB=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=C.data,m=S.length,f=this.red(),d=this.green(),p=this.blue();for(let v=0;v<m;v+=4){const E=(.34*S[v]+.5*S[v+1]+.16*S[v+2])/255;S[v]=E*f,S[v+1]=E*d,S[v+2]=E*p,S[v+3]=S[v+3]}};return Pi.RGB=U,o.Factory.addGetterSetter(r.Node,"red",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),o.Factory.addGetterSetter(r.Node,"green",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),o.Factory.addGetterSetter(r.Node,"blue",0,H.RGBComponent,o.Factory.afterSetFilter),Pi}var Yi={},Bh;function $d(){if(Bh)return Yi;Bh=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.RGBA=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=C.data,m=S.length,f=this.red(),d=this.green(),p=this.blue(),v=this.alpha();for(let E=0;E<m;E+=4){const g=1-v;S[E]=f*v+S[E]*g,S[E+1]=d*v+S[E+1]*g,S[E+2]=p*v+S[E+2]*g}};return Yi.RGBA=U,o.Factory.addGetterSetter(r.Node,"red",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),o.Factory.addGetterSetter(r.Node,"green",0,function(C){return this._filterUpToDate=!1,C>255?255:C<0?0:Math.round(C)}),o.Factory.addGetterSetter(r.Node,"blue",0,H.RGBComponent,o.Factory.afterSetFilter),o.Factory.addGetterSetter(r.Node,"alpha",1,function(C){return this._filterUpToDate=!1,C>1?1:C<0?0:C}),Yi}var Fi={},Hh;function t1(){if(Hh)return Fi;Hh=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.Sepia=void 0;const o=function(r){const H=r.data,U=H.length;for(let C=0;C<U;C+=4){const S=H[C+0],m=H[C+1],f=H[C+2];H[C+0]=Math.min(255,S*.393+m*.769+f*.189),H[C+1]=Math.min(255,S*.349+m*.686+f*.168),H[C+2]=Math.min(255,S*.272+m*.534+f*.131)}};return Fi.Sepia=o,Fi}var Ki={},Vh;function e1(){if(Vh)return Ki;Vh=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Solarize=void 0;const o=function(r){const H=r.data,U=r.width,C=r.height,S=U*4;let m=C;do{const f=(m-1)*S;let d=U;do{const p=f+(d-1)*4;let v=H[p],E=H[p+1],g=H[p+2];v>127&&(v=255-v),E>127&&(E=255-E),g>127&&(g=255-g),H[p]=v,H[p+1]=E,H[p+2]=g}while(--d)}while(--m)};return Ki.Solarize=o,Ki}var wi={},Lh;function a1(){if(Lh)return wi;Lh=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.Threshold=void 0;const o=At(),r=Qt(),H=Rt(),U=function(C){const S=this.threshold()*255,m=C.data,f=m.length;for(let d=0;d<f;d+=1)m[d]=m[d]<S?0:255};return wi.Threshold=U,o.Factory.addGetterSetter(r.Node,"threshold",.5,(0,H.getNumberValidator)(),o.Factory.afterSetFilter),wi}var qh;function n1(){if(qh)return ii;qh=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.Konva=void 0;const o=Kr(),r=Td(),H=xd(),U=Ad(),C=Rd(),S=Md(),m=Od(),f=e0(),d=Qr(),p=a0(),v=Dd(),E=Gd(),g=Ud(),c=zd(),u=n0(),b=Bd(),N=Hd(),D=Vd(),h=Ld(),s=qd(),_=Pd(),T=Yd(),G=Fd(),Y=Kd(),x=wd(),R=jd(),O=Xd(),L=Qd(),F=Zd(),j=Jd(),J=kd(),K=Wd(),Z=Id(),y=$d(),A=t1(),B=e1(),z=a1();return ii.Konva=o.Konva.Util._assign(o.Konva,{Arc:r.Arc,Arrow:H.Arrow,Circle:U.Circle,Ellipse:C.Ellipse,Image:S.Image,Label:m.Label,Tag:m.Tag,Line:f.Line,Path:d.Path,Rect:p.Rect,RegularPolygon:v.RegularPolygon,Ring:E.Ring,Sprite:g.Sprite,Star:c.Star,Text:u.Text,TextPath:b.TextPath,Transformer:N.Transformer,Wedge:D.Wedge,Filters:{Blur:h.Blur,Brighten:s.Brighten,Contrast:_.Contrast,Emboss:T.Emboss,Enhance:G.Enhance,Grayscale:Y.Grayscale,HSL:x.HSL,HSV:R.HSV,Invert:O.Invert,Kaleidoscope:L.Kaleidoscope,Mask:F.Mask,Noise:j.Noise,Pixelate:J.Pixelate,Posterize:K.Posterize,RGB:Z.RGB,RGBA:y.RGBA,Sepia:A.Sepia,Solarize:B.Solarize,Threshold:z.Threshold}}),ii}var i1=Pl.exports,Ph;function l1(){if(Ph)return Pl.exports;Ph=1,Object.defineProperty(i1,"__esModule",{value:!0});const o=n1();return Pl.exports=o.Konva,Pl.exports}l1();var ql={exports:{}},Yh;function s1(){return Yh||(Yh=1,function(o,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Konva=void 0;var H=Kr();Object.defineProperty(r,"Konva",{enumerable:!0,get:function(){return H.Konva}});const U=Kr();o.exports=U.Konva}(ql,ql.exports)),ql.exports}var r1=s1();const Yl=Wh(r1);var Br={exports:{}},Hr={exports:{}},Vr={exports:{}},Lr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh;function o1(){return Fh||(Fh=1,function(o){function r(Z,y){var A=Z.length;Z.push(y);t:for(;0<A;){var B=A-1>>>1,z=Z[B];if(0<C(z,y))Z[B]=y,Z[A]=z,A=B;else break t}}function H(Z){return Z.length===0?null:Z[0]}function U(Z){if(Z.length===0)return null;var y=Z[0],A=Z.pop();if(A!==y){Z[0]=A;t:for(var B=0,z=Z.length,q=z>>>1;B<q;){var at=2*(B+1)-1,w=Z[at],nt=at+1,rt=Z[nt];if(0>C(w,A))nt<z&&0>C(rt,w)?(Z[B]=rt,Z[nt]=A,B=nt):(Z[B]=w,Z[at]=A,B=at);else if(nt<z&&0>C(rt,A))Z[B]=rt,Z[nt]=A,B=nt;else break t}}return y}function C(Z,y){var A=Z.sortIndex-y.sortIndex;return A!==0?A:Z.id-y.id}if(o.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var S=performance;o.unstable_now=function(){return S.now()}}else{var m=Date,f=m.now();o.unstable_now=function(){return m.now()-f}}var d=[],p=[],v=1,E=null,g=3,c=!1,u=!1,b=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,s=typeof setImmediate<"u"?setImmediate:null;function _(Z){for(var y=H(p);y!==null;){if(y.callback===null)U(p);else if(y.startTime<=Z)U(p),y.sortIndex=y.expirationTime,r(d,y);else break;y=H(p)}}function T(Z){if(b=!1,_(Z),!u)if(H(d)!==null)u=!0,G||(G=!0,F());else{var y=H(p);y!==null&&K(T,y.startTime-Z)}}var G=!1,Y=-1,x=5,R=-1;function O(){return N?!0:!(o.unstable_now()-R<x)}function L(){if(N=!1,G){var Z=o.unstable_now();R=Z;var y=!0;try{t:{u=!1,b&&(b=!1,h(Y),Y=-1),c=!0;var A=g;try{e:{for(_(Z),E=H(d);E!==null&&!(E.expirationTime>Z&&O());){var B=E.callback;if(typeof B=="function"){E.callback=null,g=E.priorityLevel;var z=B(E.expirationTime<=Z);if(Z=o.unstable_now(),typeof z=="function"){E.callback=z,_(Z),y=!0;break e}E===H(d)&&U(d),_(Z)}else U(d);E=H(d)}if(E!==null)y=!0;else{var q=H(p);q!==null&&K(T,q.startTime-Z),y=!1}}break t}finally{E=null,g=A,c=!1}y=void 0}}finally{y?F():G=!1}}}var F;if(typeof s=="function")F=function(){s(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,J=j.port2;j.port1.onmessage=L,F=function(){J.postMessage(null)}}else F=function(){D(L,0)};function K(Z,y){Y=D(function(){Z(o.unstable_now())},y)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Z){Z.callback=null},o.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<Z?Math.floor(1e3/Z):5},o.unstable_getCurrentPriorityLevel=function(){return g},o.unstable_next=function(Z){switch(g){case 1:case 2:case 3:var y=3;break;default:y=g}var A=g;g=y;try{return Z()}finally{g=A}},o.unstable_requestPaint=function(){N=!0},o.unstable_runWithPriority=function(Z,y){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var A=g;g=Z;try{return y()}finally{g=A}},o.unstable_scheduleCallback=function(Z,y,A){var B=o.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,Z){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=A+z,Z={id:v++,callback:y,priorityLevel:Z,startTime:A,expirationTime:z,sortIndex:-1},A>B?(Z.sortIndex=A,r(p,Z),H(d)===null&&Z===H(p)&&(b?(h(Y),Y=-1):b=!0,K(T,A-B))):(Z.sortIndex=z,r(d,Z),u||c||(u=!0,G||(G=!0,F()))),Z},o.unstable_shouldYield=O,o.unstable_wrapCallback=function(Z){var y=g;return function(){var A=g;g=y;try{return Z.apply(this,arguments)}finally{g=A}}}}(Lr)),Lr}var Kh;function i0(){return Kh||(Kh=1,Vr.exports=o1()),Vr.exports}/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wh;function u1(){return wh||(wh=1,function(o){o.exports=function(r){function H(t,e,a,n){return new U0(t,e,a,n)}function U(){}function C(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)e+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(t){var e=t,a=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(a=e.return),t=e.return;while(t)}return e.tag===3?a:null}function m(t){if(S(t)!==t)throw Error(C(188))}function f(t){var e=t.alternate;if(!e){if(e=S(t),e===null)throw Error(C(188));return e!==t?null:t}for(var a=t,n=e;;){var i=a.return;if(i===null)break;var l=i.alternate;if(l===null){if(n=i.return,n!==null){a=n;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===a)return m(i),t;if(l===n)return m(i),e;l=l.sibling}throw Error(C(188))}if(a.return!==n.return)a=i,n=l;else{for(var M=!1,P=i.child;P;){if(P===a){M=!0,a=i,n=l;break}if(P===n){M=!0,n=i,a=l;break}P=P.sibling}if(!M){for(P=l.child;P;){if(P===a){M=!0,a=l,n=i;break}if(P===n){M=!0,n=l,a=i;break}P=P.sibling}if(!M)throw Error(C(189))}}if(a.alternate!==n)throw Error(C(190))}if(a.tag!==3)throw Error(C(188));return a.stateNode.current===a?t:e}function d(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=d(t),e!==null)return e;t=t.sibling}return null}function p(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(t.tag!==4&&(e=p(t),e!==null))return e;t=t.sibling}return null}function v(t){return t===null||typeof t!="object"?null:(t=ac&&t[ac]||t["@@iterator"],typeof t=="function"?t:null)}function E(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===q0?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case an:return"Fragment";case Zs:return"Profiler";case tc:return"StrictMode";case ks:return"Suspense";case Ws:return"SuspenseList";case $s:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case en:return"Portal";case Ca:return(t.displayName||"Context")+".Provider";case ec:return(t._context.displayName||"Context")+".Consumer";case Js:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Is:return e=t.displayName||null,e!==null?e:E(t.type)||"Memo";case Ea:e=t._payload,t=t._init;try{return E(t(e))}catch{}}return null}function g(t){return{current:t}}function c(t){0>sn||(t.current=ir[sn],ir[sn]=null,sn--)}function u(t,e){sn++,ir[sn]=t.current,t.current=e}function b(t){return t>>>=0,t===0?32:31-(nd(t)/id|0)|0}function N(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function D(t,e,a){var n=t.pendingLanes;if(n===0)return 0;var i=0,l=t.suspendedLanes,M=t.pingedLanes;t=t.warmLanes;var P=n&134217727;return P!==0?(n=P&~l,n!==0?i=N(n):(M&=P,M!==0?i=N(M):a||(a=P&~t,a!==0&&(i=N(a))))):(P=n&~l,P!==0?i=N(P):M!==0?i=N(M):a||(a=n&~t,a!==0&&(i=N(a)))),i===0?0:e!==0&&e!==i&&(e&l)===0&&(l=i&-i,a=e&-e,l>=a||l===32&&(a&4194048)!==0)?e:i}function h(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function s(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _(){var t=vl;return vl<<=1,(vl&4194048)===0&&(vl=256),t}function T(){var t=_l;return _l<<=1,(_l&62914560)===0&&(_l=4194304),t}function G(t){for(var e=[],a=0;31>a;a++)e.push(t);return e}function Y(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function x(t,e,a,n,i,l){var M=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var P=t.entanglements,$=t.expirationTimes,it=t.hiddenUpdates;for(a=M&~a;0<a;){var ot=31-Ue(a),ct=1<<ot;P[ot]=0,$[ot]=-1;var ft=it[ot];if(ft!==null)for(it[ot]=null,ot=0;ot<ft.length;ot++){var St=ft[ot];St!==null&&(St.lane&=-536870913)}a&=~ct}n!==0&&R(t,n,0),l!==0&&i===0&&t.tag!==0&&(t.suspendedLanes|=l&~(M&~e))}function R(t,e,a){t.pendingLanes|=e,t.suspendedLanes&=~e;var n=31-Ue(e);t.entangledLanes|=e,t.entanglements[n]=t.entanglements[n]|1073741824|a&4194090}function O(t,e){var a=t.entangledLanes|=e;for(t=t.entanglements;a;){var n=31-Ue(a),i=1<<n;i&e|t[n]&e&&(t[n]|=e),a&=~i}}function L(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function F(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function j(t){if(typeof ud=="function"&&cd(t),ze&&typeof ze.setStrictMode=="function")try{ze.setStrictMode(Qn,t)}catch{}}function J(t){if(rr===void 0)try{throw Error()}catch(a){var e=a.stack.trim().match(/\n( *(at )?)/);rr=e&&e[1]||"",Ac=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+rr+t+Ac}function K(t,e){if(!t||or)return"";or=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(e){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(St){var ft=St}Reflect.construct(t,[],ct)}else{try{ct.call()}catch(St){ft=St}t.call(ct.prototype)}}else{try{throw Error()}catch(St){ft=St}(ct=t())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(St){if(St&&ft&&typeof St.stack=="string")return[St.stack,ft.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var l=n.DetermineComponentFrameRoot(),M=l[0],P=l[1];if(M&&P){var $=M.split(`
`),it=P.split(`
`);for(i=n=0;n<$.length&&!$[n].includes("DetermineComponentFrameRoot");)n++;for(;i<it.length&&!it[i].includes("DetermineComponentFrameRoot");)i++;if(n===$.length||i===it.length)for(n=$.length-1,i=it.length-1;1<=n&&0<=i&&$[n]!==it[i];)i--;for(;1<=n&&0<=i;n--,i--)if($[n]!==it[i]){if(n!==1||i!==1)do if(n--,i--,0>i||$[n]!==it[i]){var ot=`
`+$[n].replace(" at new "," at ");return t.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",t.displayName)),ot}while(1<=n&&0<=i);break}}}finally{or=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?J(a):""}function Z(t){switch(t.tag){case 26:case 27:case 5:return J(t.type);case 16:return J("Lazy");case 13:return J("Suspense");case 19:return J("SuspenseList");case 0:case 15:return K(t.type,!1);case 11:return K(t.type.render,!1);case 1:return K(t.type,!0);case 31:return J("Activity");default:return""}}function y(t){try{var e="";do e+=Z(t),t=t.return;while(t);return e}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function A(t,e){if(typeof t=="object"&&t!==null){var a=Rc.get(t);return a!==void 0?a:(e={value:t,source:e,stack:y(e)},Rc.set(t,e),e)}return{value:t,source:e,stack:y(e)}}function B(t,e){on[un++]=Cl,on[un++]=bl,bl=t,Cl=e}function z(t,e,a){Le[qe++]=la,Le[qe++]=sa,Le[qe++]=Ya,Ya=t;var n=la;t=sa;var i=32-Ue(n)-1;n&=~(1<<i),a+=1;var l=32-Ue(e)+i;if(30<l){var M=i-i%5;l=(n&(1<<M)-1).toString(32),n>>=M,i-=M,la=1<<32-Ue(e)+i|a<<i|n,sa=l+t}else la=1<<l|a<<i|n,sa=t}function q(t){t.return!==null&&(B(t,1),z(t,1,0))}function at(t){for(;t===bl;)bl=on[--un],on[un]=null,Cl=on[--un],on[un]=null;for(;t===Ya;)Ya=Le[--qe],Le[qe]=null,sa=Le[--qe],Le[qe]=null,la=Le[--qe],Le[qe]=null}function w(t,e){u(Na,e),u(Zn,t),u(de,null),t=F0(e),c(de),u(de,t)}function nt(){c(de),c(Zn),c(Na)}function rt(t){t.memoizedState!==null&&u(El,t);var e=de.current,a=K0(e,t.type);e!==a&&(u(Zn,t),u(de,a))}function tt(t){Zn.current===t&&(c(de),c(Zn)),El.current===t&&(c(El),na?Pa._currentValue=nn:Pa._currentValue2=nn)}function V(t){var e=Error(C(418,""));throw ht(A(e,t)),ur}function k(t,e){if(!Ve)throw Error(C(175));Yf(t.stateNode,t.type,t.memoizedProps,e,t)||V(t)}function X(t){for(_e=t.return;_e;)switch(_e.tag){case 5:case 13:We=!1;return;case 27:case 3:We=!0;return;default:_e=_e.return}}function I(t){if(!Ve||t!==_e)return!1;if(!zt)return X(t),zt=!0,!1;var e=t.tag;if(te?e!==3&&e!==27&&(e!==5||mc(t.type)&&!yl(t.type,t.memoizedProps))&&ee&&V(t):e!==3&&(e!==5||mc(t.type)&&!yl(t.type,t.memoizedProps))&&ee&&V(t),X(t),e===13){if(!Ve)throw Error(C(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(C(317));ee=wf(t)}else ee=te&&e===27?Uf(t.type,ee):_e?gc(t.stateNode):null;return!0}function lt(){Ve&&(ee=_e=null,zt=!1)}function ut(){var t=Fa;return t!==null&&(Ee===null?Ee=t:Ee.push.apply(Ee,t),Fa=null),t}function ht(t){Fa===null?Fa=[t]:Fa.push(t)}function mt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}function dt(t,e,a){na?(u(Tl,e._currentValue),e._currentValue=a):(u(Tl,e._currentValue2),e._currentValue2=a)}function vt(t){var e=Tl.current;na?t._currentValue=e:t._currentValue2=e,c(Tl)}function Ct(t,e,a){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===a)break;t=t.return}}function Dt(t,e,a,n){var i=t.child;for(i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){var M=i.child;l=l.firstContext;t:for(;l!==null;){var P=l;l=i;for(var $=0;$<e.length;$++)if(P.context===e[$]){l.lanes|=a,P=l.alternate,P!==null&&(P.lanes|=a),Ct(l.return,a,t),n||(M=null);break t}l=P.next}}else if(i.tag===18){if(M=i.return,M===null)throw Error(C(341));M.lanes|=a,l=M.alternate,l!==null&&(l.lanes|=a),Ct(M,a,t),M=null}else M=i.child;if(M!==null)M.return=i;else for(M=i;M!==null;){if(M===t){M=null;break}if(i=M.sibling,i!==null){i.return=M.return,M=i;break}M=M.return}i=M}}function me(t,e,a,n){t=null;for(var i=e,l=!1;i!==null;){if(!l){if((i.flags&524288)!==0)l=!0;else if((i.flags&262144)!==0)break}if(i.tag===10){var M=i.alternate;if(M===null)throw Error(C(387));if(M=M.memoizedProps,M!==null){var P=i.type;Be(i.pendingProps.value,M.value)||(t!==null?t.push(P):t=[P])}}else if(i===El.current){if(M=i.alternate,M===null)throw Error(C(387));M.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(t!==null?t.push(Pa):t=[Pa])}i=i.return}t!==null&&Dt(e,t,a,n),e.flags|=262144}function It(t){for(t=t.firstContext;t!==null;){var e=t.context;if(!Be(na?e._currentValue:e._currentValue2,t.memoizedValue))return!0;t=t.next}return!1}function xe(t){Ka=t,ra=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function _t(t){return Ae(Ka,t)}function pe(t,e){return Ka===null&&xe(t),Ae(t,e)}function Ae(t,e){var a=na?e._currentValue:e._currentValue2;if(e={context:e,memoizedValue:a,next:null},ra===null){if(t===null)throw Error(C(308));ra=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else ra=ra.next=e;return a}function we(){return{controller:new hd,data:new Map,refCount:0}}function Zt(t){t.refCount--,t.refCount===0&&fd(dd,function(){t.controller.abort()})}function $t(t){t!==cn&&t.next===null&&(cn===null?Nl=cn=t:cn=cn.next=t),xl=!0,cr||(cr=!0,Ja())}function ie(t,e){if(!hr&&xl){hr=!0;do for(var a=!1,n=Nl;n!==null;){if(t!==0){var i=n.pendingLanes;if(i===0)var l=0;else{var M=n.suspendedLanes,P=n.pingedLanes;l=(1<<31-Ue(42|t)+1)-1,l&=i&~(M&~P),l=l&201326741?l&201326741|1:l?l|2:0}l!==0&&(a=!0,Mn(n,l))}else l=Ot,l=D(n,n===qt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==qa),(l&3)===0||h(n,l)||(a=!0,Mn(n,l));n=n.next}while(a);hr=!1}}function Re(){ce()}function ce(){xl=cr=!1;var t=0;hn!==0&&(I0()&&(t=hn),hn=0);for(var e=Qe(),a=null,n=Nl;n!==null;){var i=n.next,l=he(n,e);l===0?(n.next=null,a===null?Nl=i:a.next=i,i===null&&(cn=a)):(a=n,(t!==0||(l&3)!==0)&&(xl=!0)),n=i}ie(t)}function he(t,e){for(var a=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,l=t.pendingLanes&-62914561;0<l;){var M=31-Ue(l),P=1<<M,$=i[M];$===-1?((P&a)===0||(P&n)!==0)&&(i[M]=s(P,e)):$<=e&&(t.expiredLanes|=P),l&=~P}if(e=qt,a=Ot,a=D(t,t===e?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==qa),n=t.callbackNode,a===0||t===e&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&lr(n),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||h(t,a)){if(e=a&-a,e===t.callbackPriority)return e;switch(n!==null&&lr(n),F(a)){case 2:case 8:a=rd;break;case 32:a=sr;break;case 268435456:a=od;break;default:a=sr}return n=da.bind(null,t),a=Sl(a,n),t.callbackPriority=e,t.callbackNode=a,e}return n!==null&&n!==null&&lr(n),t.callbackPriority=2,t.callbackNode=null,2}function da(t,e){if(ge!==0&&ge!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Kn()&&t.callbackNode!==a)return null;var n=Ot;return n=D(t,t===qt?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==qa),n===0?null:(Ou(t,n,e),he(t,Qe()),t.callbackNode!=null&&t.callbackNode===a?da.bind(null,t):null)}function Mn(t,e){if(Kn())return null;Ou(t,e,!0)}function Ja(){lf?sf(function(){(Mt&6)!==0?Sl(xc,Re):ce()}):Sl(xc,Re)}function On(){return hn===0&&(hn=_()),hn}function Ql(t,e){if(Jn===null){var a=Jn=[];fr=0,fn=On(),dn={status:"pending",value:void 0,then:function(n){a.push(n)}}}return fr++,e.then(Jr,Jr),e}function Jr(){if(--fr===0&&Jn!==null){dn!==null&&(dn.status="fulfilled");var t=Jn;Jn=null,fn=0,dn=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function d0(t,e){var a=[],n={status:"pending",value:null,reason:null,then:function(i){a.push(i)}};return t.then(function(){n.status="fulfilled",n.value=e;for(var i=0;i<a.length;i++)(0,a[i])(e)},function(i){for(n.status="rejected",n.reason=i,i=0;i<a.length;i++)(0,a[i])(void 0)}),n}function Zl(){var t=wa.current;return t!==null?t:qt.pooledCache}function Qi(t,e){e===null?u(wa,wa.current):u(wa,e.pool)}function kr(){var t=Zl();return t===null?null:{parent:na?Ft._currentValue:Ft._currentValue2,pool:t}}function Zi(t,e){if(Be(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var a=Object.keys(t),n=Object.keys(e);if(a.length!==n.length)return!1;for(n=0;n<a.length;n++){var i=a[n];if(!gd.call(e,i)||!Be(t[i],e[i]))return!1}return!0}function Wr(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ji(){}function Ir(t,e,a){switch(a=t[a],a===void 0?t.push(e):a!==e&&(e.then(Ji,Ji),e=a),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,to(t),t;default:if(typeof e.status=="string")e.then(Ji,Ji);else{if(t=qt,t!==null&&100<t.shellSuspendCounter)throw Error(C(482));t=e,t.status="pending",t.then(function(n){if(e.status==="pending"){var i=e;i.status="fulfilled",i.value=n}},function(n){if(e.status==="pending"){var i=e;i.status="rejected",i.reason=n}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,to(t),t}throw gn=e,kn}}function $r(){if(gn===null)throw Error(C(459));var t=gn;return gn=null,t}function to(t){if(t===kn||t===Al)throw Error(C(483))}function ki(){for(var t=mn,e=gr=mn=0;e<t;){var a=Pe[e];Pe[e++]=null;var n=Pe[e];Pe[e++]=null;var i=Pe[e];Pe[e++]=null;var l=Pe[e];if(Pe[e++]=null,n!==null&&i!==null){var M=n.pending;M===null?i.next=i:(i.next=M.next,M.next=i),n.pending=i}l!==0&&eo(a,i,l)}}function Wi(t,e,a,n){Pe[mn++]=t,Pe[mn++]=e,Pe[mn++]=a,Pe[mn++]=n,gr|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function Jl(t,e,a,n){return Wi(t,e,a,n),Ii(t)}function ka(t,e){return Wi(t,null,null,e),Ii(t)}function eo(t,e,a){t.lanes|=a;var n=t.alternate;n!==null&&(n.lanes|=a);for(var i=!1,l=t.return;l!==null;)l.childLanes|=a,n=l.alternate,n!==null&&(n.childLanes|=a),l.tag===22&&(t=l.stateNode,t===null||t._visibility&1||(i=!0)),t=l,l=l.return;return t.tag===3?(l=t.stateNode,i&&e!==null&&(i=31-Ue(a),t=l.hiddenUpdates,n=t[i],n===null?t[i]=[e]:n.push(e),e.lane=a|536870912),l):null}function Ii(t){if(50<ai)throw ai=0,Nr=null,Error(C(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}function kl(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wl(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ga(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ma(t,e,a){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(Mt&2)!==0){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,e=Ii(t),eo(t,null,a),e}return Wi(t,n,e,a),Ii(t)}function Dn(t,e,a){if(e=e.updateQueue,e!==null&&(e=e.shared,(a&4194048)!==0)){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,O(t,a)}}function Il(t,e){var a=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,a===n)){var i=null,l=null;if(a=a.firstBaseUpdate,a!==null){do{var M={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};l===null?i=l=M:l=l.next=M,a=a.next}while(a!==null);l===null?i=l=e:l=l.next=e}else i=l=e;a={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:n.shared,callbacks:n.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=e:t.next=e,a.lastBaseUpdate=e}function Gn(){if(mr){var t=dn;if(t!==null)throw t}}function Un(t,e,a,n){mr=!1;var i=t.updateQueue;xa=!1;var l=i.firstBaseUpdate,M=i.lastBaseUpdate,P=i.shared.pending;if(P!==null){i.shared.pending=null;var $=P,it=$.next;$.next=null,M===null?l=it:M.next=it,M=$;var ot=t.alternate;ot!==null&&(ot=ot.updateQueue,P=ot.lastBaseUpdate,P!==M&&(P===null?ot.firstBaseUpdate=it:P.next=it,ot.lastBaseUpdate=$))}if(l!==null){var ct=i.baseState;M=0,ot=it=$=null,P=l;do{var ft=P.lane&-536870913,St=ft!==P.lane;if(St?(Ot&ft)===ft:(n&ft)===ft){ft!==0&&ft===fn&&(mr=!0),ot!==null&&(ot=ot.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});t:{var Ke=t,ni=P;ft=e;var Qa=a;switch(ni.tag){case 1:if(Ke=ni.payload,typeof Ke=="function"){ct=Ke.call(Qa,ct,ft);break t}ct=Ke;break t;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=ni.payload,ft=typeof Ke=="function"?Ke.call(Qa,ct,ft):Ke,ft==null)break t;ct=Qs({},ct,ft);break t;case 2:xa=!0}}ft=P.callback,ft!==null&&(t.flags|=64,St&&(t.flags|=8192),St=i.callbacks,St===null?i.callbacks=[ft]:St.push(ft))}else St={lane:ft,tag:P.tag,payload:P.payload,callback:P.callback,next:null},ot===null?(it=ot=St,$=ct):ot=ot.next=St,M|=ft;if(P=P.next,P===null){if(P=i.shared.pending,P===null)break;St=P,P=St.next,St.next=null,i.lastBaseUpdate=St,i.shared.pending=null}}while(!0);ot===null&&($=ct),i.baseState=$,i.firstBaseUpdate=it,i.lastBaseUpdate=ot,l===null&&(i.shared.lanes=0),Ma|=M,t.lanes=M,t.memoizedState=ct}}function ao(t,e){if(typeof t!="function")throw Error(C(191,t));t.call(e)}function no(t,e){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)ao(a[t],e)}function io(t,e){t=ua,u(Ml,t),u(pn,e),ua=t|e.baseLanes}function $l(){u(Ml,ua),u(pn,pn.current)}function ts(){ua=Ml.current,c(pn),c(Ml)}function jt(){throw Error(C(321))}function es(t,e){if(e===null)return!1;for(var a=0;a<e.length&&a<t.length;a++)if(!Be(t[a],e[a]))return!1;return!0}function as(t,e,a,n,i,l){return Aa=l,Et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pt.H=t===null||t.memoizedState===null?Oc:Dc,ja=!1,l=a(n,i),ja=!1,yn&&(l=so(e,a,n,i)),lo(t),l}function lo(t){pt.H=Gl;var e=Lt!==null&&Lt.next!==null;if(Aa=0,kt=Lt=Et=null,Ol=!1,Wn=0,vn=null,e)throw Error(C(300));t===null||se||(t=t.dependencies,t!==null&&It(t)&&(se=!0))}function so(t,e,a,n){Et=t;var i=0;do{if(yn&&(vn=null),Wn=0,yn=!1,25<=i)throw Error(C(301));if(i+=1,kt=Lt=null,t.updateQueue!=null){var l=t.updateQueue;l.lastEffect=null,l.events=null,l.stores=null,l.memoCache!=null&&(l.memoCache.index=0)}pt.H=pd,l=e(a,n)}while(yn);return l}function g0(){var t=pt.H,e=t.useState()[0];return e=typeof e.then=="function"?zn(e):e,t=t.useState()[0],(Lt!==null?Lt.memoizedState:null)!==t&&(Et.flags|=1024),e}function ns(){var t=Dl!==0;return Dl=0,t}function is(t,e,a){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a}function ls(t){if(Ol){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}Ol=!1}Aa=0,kt=Lt=Et=null,yn=!1,Wn=Dl=0,vn=null}function Se(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Et.memoizedState=kt=t:kt=kt.next=t,kt}function Jt(){if(Lt===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=kt===null?Et.memoizedState:kt.next;if(e!==null)kt=e,Lt=t;else{if(t===null)throw Et.alternate===null?Error(C(467)):Error(C(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},kt===null?Et.memoizedState=kt=t:kt=kt.next=t}return kt}function ss(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zn(t){var e=Wn;return Wn+=1,vn===null&&(vn=[]),t=Ir(vn,t,e),e=Et,(kt===null?e.memoizedState:kt.next)===null&&(e=e.alternate,pt.H=e===null||e.memoizedState===null?Oc:Dc),t}function $i(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return zn(t);if(t.$$typeof===Ca)return _t(t)}throw Error(C(438,String(t)))}function rs(t){var e=null,a=Et.updateQueue;if(a!==null&&(e=a.memoCache),e==null){var n=Et.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(e={data:n.data.map(function(i){return i.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),a===null&&(a=ss(),Et.updateQueue=a),a.memoCache=e,a=e.data[e.index],a===void 0)for(a=e.data[e.index]=Array(t),n=0;n<t;n++)a[n]=L0;return e.index++,a}function $e(t,e){return typeof e=="function"?e(t):e}function tl(t){var e=Jt();return os(e,Lt,t)}function os(t,e,a){var n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=a;var i=t.baseQueue,l=n.pending;if(l!==null){if(i!==null){var M=i.next;i.next=l.next,l.next=M}e.baseQueue=i=l,n.pending=null}if(l=t.baseState,i===null)t.memoizedState=l;else{e=i.next;var P=M=null,$=null,it=e,ot=!1;do{var ct=it.lane&-536870913;if(ct!==it.lane?(Ot&ct)===ct:(Aa&ct)===ct){var ft=it.revertLane;if(ft===0)$!==null&&($=$.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),ct===fn&&(ot=!0);else if((Aa&ft)===ft){it=it.next,ft===fn&&(ot=!0);continue}else ct={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},$===null?(P=$=ct,M=l):$=$.next=ct,Et.lanes|=ft,Ma|=ft;ct=it.action,ja&&a(l,ct),l=it.hasEagerState?it.eagerState:a(l,ct)}else ft={lane:ct,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},$===null?(P=$=ft,M=l):$=$.next=ft,Et.lanes|=ct,Ma|=ct;it=it.next}while(it!==null&&it!==e);if($===null?M=l:$.next=P,!Be(l,t.memoizedState)&&(se=!0,ot&&(a=dn,a!==null)))throw a;t.memoizedState=l,t.baseState=M,t.baseQueue=$,n.lastRenderedState=l}return i===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function us(t){var e=Jt(),a=e.queue;if(a===null)throw Error(C(311));a.lastRenderedReducer=t;var n=a.dispatch,i=a.pending,l=e.memoizedState;if(i!==null){a.pending=null;var M=i=i.next;do l=t(l,M.action),M=M.next;while(M!==i);Be(l,e.memoizedState)||(se=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),a.lastRenderedState=l}return[l,n]}function ro(t,e,a){var n=Et,i=Jt(),l=zt;if(l){if(a===void 0)throw Error(C(407));a=a()}else a=e();var M=!Be((Lt||i).memoizedState,a);M&&(i.memoizedState=a,se=!0),i=i.queue;var P=co.bind(null,n,i,t);if(Bn(2048,8,P,[t]),i.getSnapshot!==e||M||kt!==null&&kt.memoizedState.tag&1){if(n.flags|=2048,Wa(9,el(),uo.bind(null,n,i,a,e),null),qt===null)throw Error(C(349));l||(Aa&124)!==0||oo(n,e,a)}return a}function oo(t,e,a){t.flags|=16384,t={getSnapshot:e,value:a},e=Et.updateQueue,e===null?(e=ss(),Et.updateQueue=e,e.stores=[t]):(a=e.stores,a===null?e.stores=[t]:a.push(t))}function uo(t,e,a,n){e.value=a,e.getSnapshot=n,ho(e)&&fo(t)}function co(t,e,a){return a(function(){ho(e)&&fo(t)})}function ho(t){var e=t.getSnapshot;t=t.value;try{var a=e();return!Be(t,a)}catch{return!0}}function fo(t){var e=ka(t,2);e!==null&&De(e,t,2)}function cs(t){var e=Se();if(typeof t=="function"){var a=t;if(t=a(),ja){j(!0);try{a()}finally{j(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:t},e}function go(t,e,a,n){return t.baseState=a,os(t,Lt,typeof n=="function"?n:$e)}function m0(t,e,a,n,i){if(nl(t))throw Error(C(485));if(t=e.action,t!==null){var l={payload:i,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){l.listeners.push(M)}};pt.T!==null?a(!0):l.isTransition=!1,n(l),a=e.pending,a===null?(l.next=e.pending=l,mo(e,l)):(l.next=a.next,e.pending=a.next=l)}}function mo(t,e){var a=e.action,n=e.payload,i=t.state;if(e.isTransition){var l=pt.T,M={};pt.T=M;try{var P=a(i,n),$=pt.S;$!==null&&$(M,P),po(t,e,P)}catch(it){hs(t,e,it)}finally{pt.T=l}}else try{l=a(i,n),po(t,e,l)}catch(it){hs(t,e,it)}}function po(t,e,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(n){yo(t,e,n)},function(n){return hs(t,e,n)}):yo(t,e,a)}function yo(t,e,a){e.status="fulfilled",e.value=a,vo(e),t.state=a,e=t.pending,e!==null&&(a=e.next,a===e?t.pending=null:(a=a.next,e.next=a,mo(t,a)))}function hs(t,e,a){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do e.status="rejected",e.reason=a,vo(e),e=e.next;while(e!==n)}t.action=null}function vo(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function _o(t,e){return e}function So(t,e){if(zt){var a=qt.formState;if(a!==null){t:{var n=Et;if(zt){if(ee){var i=Df(ee,We);if(i){ee=gc(i),n=Gf(i);break t}}V(n)}n=!1}n&&(e=a[0])}}a=Se(),a.memoizedState=a.baseState=e,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},a.queue=n,a=Lo.bind(null,Et,n),n.dispatch=a,n=cs(!1);var l=ms.bind(null,Et,!1,n.queue);return n=Se(),i={state:e,dispatch:null,action:t,pending:null},n.queue=i,a=m0.bind(null,Et,i,l,a),i.dispatch=a,n.memoizedState=t,[e,a,!1]}function bo(t){var e=Jt();return Co(e,Lt,t)}function Co(t,e,a){if(e=os(t,e,_o)[0],t=tl($e)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var n=zn(e)}catch(M){throw M===kn?Al:M}else n=e;e=Jt();var i=e.queue,l=i.dispatch;return a!==e.memoizedState&&(Et.flags|=2048,Wa(9,el(),p0.bind(null,i,a),null)),[n,l,t]}function p0(t,e){t.action=e}function Eo(t){var e=Jt(),a=Lt;if(a!==null)return Co(e,a,t);Jt(),e=e.memoizedState,a=Jt();var n=a.queue.dispatch;return a.memoizedState=t,[e,n,!1]}function Wa(t,e,a,n){return t={tag:t,create:a,deps:n,inst:e,next:null},e=Et.updateQueue,e===null&&(e=ss(),Et.updateQueue=e),a=e.lastEffect,a===null?e.lastEffect=t.next=t:(n=a.next,a.next=t,t.next=n,e.lastEffect=t),t}function el(){return{destroy:void 0,resource:void 0}}function To(){return Jt().memoizedState}function al(t,e,a,n){var i=Se();n=n===void 0?null:n,Et.flags|=t,i.memoizedState=Wa(1|e,el(),a,n)}function Bn(t,e,a,n){var i=Jt();n=n===void 0?null:n;var l=i.memoizedState.inst;Lt!==null&&n!==null&&es(n,Lt.memoizedState.deps)?i.memoizedState=Wa(e,l,a,n):(Et.flags|=t,i.memoizedState=Wa(1|e,l,a,n))}function No(t,e){al(8390656,8,t,e)}function xo(t,e){Bn(2048,8,t,e)}function Ao(t,e){return Bn(4,2,t,e)}function Ro(t,e){return Bn(4,4,t,e)}function Mo(t,e){if(typeof e=="function"){t=t();var a=e(t);return function(){typeof a=="function"?a():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Oo(t,e,a){a=a!=null?a.concat([t]):null,Bn(4,4,Mo.bind(null,e,t),a)}function fs(){}function Do(t,e){var a=Jt();e=e===void 0?null:e;var n=a.memoizedState;return e!==null&&es(e,n[1])?n[0]:(a.memoizedState=[t,e],t)}function Go(t,e){var a=Jt();e=e===void 0?null:e;var n=a.memoizedState;if(e!==null&&es(e,n[1]))return n[0];if(n=t(),ja){j(!0);try{t()}finally{j(!1)}}return a.memoizedState=[n,e],n}function ds(t,e,a){return a===void 0||(Aa&1073741824)!==0?t.memoizedState=e:(t.memoizedState=a,t=Mu(),Et.lanes|=t,Ma|=t,a)}function Uo(t,e,a,n){return Be(a,e)?a:pn.current!==null?(t=ds(t,a,n),Be(t,e)||(se=!0),t):(Aa&42)===0?(se=!0,t.memoizedState=a):(t=Mu(),Et.lanes|=t,Ma|=t,e)}function zo(t,e,a,n,i){var l=ia();le(l!==0&&8>l?l:8);var M=pt.T,P={};pt.T=P,ms(t,!1,e,a);try{var $=i(),it=pt.S;if(it!==null&&it(P,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var ot=d0($,n);Hn(t,e,ot,Oe(t))}else Hn(t,e,n,Oe(t))}catch(ct){Hn(t,e,{then:function(){},status:"rejected",reason:ct},Oe())}finally{le(l),pt.T=M}}function Bo(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:nn,baseState:nn,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:nn},next:null};var a={};return e.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$e,lastRenderedState:a},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function gs(){return _t(Pa)}function Ho(){return Jt().memoizedState}function Vo(){return Jt().memoizedState}function y0(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var a=Oe();t=ga(a);var n=ma(e,t,a);n!==null&&(De(n,e,a),Dn(n,e,a)),e={cache:we()},t.payload=e;return}e=e.return}}function v0(t,e,a){var n=Oe();a={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},nl(t)?qo(e,a):(a=Jl(t,e,a,n),a!==null&&(De(a,t,n),Po(a,e,n)))}function Lo(t,e,a){var n=Oe();Hn(t,e,a,n)}function Hn(t,e,a,n){var i={lane:n,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(nl(t))qo(e,i);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var M=e.lastRenderedState,P=l(M,a);if(i.hasEagerState=!0,i.eagerState=P,Be(P,M))return Wi(t,e,i,0),qt===null&&ki(),!1}catch{}finally{}if(a=Jl(t,e,i,n),a!==null)return De(a,t,n),Po(a,e,n),!0}return!1}function ms(t,e,a,n){if(n={lane:2,revertLane:On(),action:n,hasEagerState:!1,eagerState:null,next:null},nl(t)){if(e)throw Error(C(479))}else e=Jl(t,a,n,2),e!==null&&De(e,t,2)}function nl(t){var e=t.alternate;return t===Et||e!==null&&e===Et}function qo(t,e){yn=Ol=!0;var a=t.pending;a===null?e.next=e:(e.next=a.next,a.next=e),t.pending=e}function Po(t,e,a){if((a&4194048)!==0){var n=e.lanes;n&=t.pendingLanes,a|=n,e.lanes=a,O(t,a)}}function il(t){var e=In;return In+=1,_n===null&&(_n=[]),Ir(_n,t,e)}function Vn(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ll(t,e){throw e.$$typeof===H0?Error(C(525)):(t=Object.prototype.toString.call(e),Error(C(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Yo(t){var e=t._init;return e(t._payload)}function Fo(t){function e(W,Q){if(t){var et=W.deletions;et===null?(W.deletions=[Q],W.flags|=16):et.push(Q)}}function a(W,Q){if(!t)return null;for(;Q!==null;)e(W,Q),Q=Q.sibling;return null}function n(W){for(var Q=new Map;W!==null;)W.key!==null?Q.set(W.key,W):Q.set(W.index,W),W=W.sibling;return Q}function i(W,Q){return W=aa(W,Q),W.index=0,W.sibling=null,W}function l(W,Q,et){return W.index=et,t?(et=W.alternate,et!==null?(et=et.index,et<Q?(W.flags|=67108866,Q):et):(W.flags|=67108866,Q)):(W.flags|=1048576,Q)}function M(W){return t&&W.alternate===null&&(W.flags|=67108866),W}function P(W,Q,et,st){return Q===null||Q.tag!==6?(Q=ws(et,W.mode,st),Q.return=W,Q):(Q=i(Q,et),Q.return=W,Q)}function $(W,Q,et,st){var gt=et.type;return gt===an?ot(W,Q,et.props.children,st,et.key):Q!==null&&(Q.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Ea&&Yo(gt)===Q.type)?(Q=i(Q,et.props),Vn(Q,et),Q.return=W,Q):(Q=gl(et.type,et.key,et.props,null,W.mode,st),Vn(Q,et),Q.return=W,Q)}function it(W,Q,et,st){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==et.containerInfo||Q.stateNode.implementation!==et.implementation?(Q=js(et,W.mode,st),Q.return=W,Q):(Q=i(Q,et.children||[]),Q.return=W,Q)}function ot(W,Q,et,st,gt){return Q===null||Q.tag!==7?(Q=La(et,W.mode,st,gt),Q.return=W,Q):(Q=i(Q,et),Q.return=W,Q)}function ct(W,Q,et){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=ws(""+Q,W.mode,et),Q.return=W,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ml:return et=gl(Q.type,Q.key,Q.props,null,W.mode,et),Vn(et,Q),et.return=W,et;case en:return Q=js(Q,W.mode,et),Q.return=W,Q;case Ea:var st=Q._init;return Q=st(Q._payload),ct(W,Q,et)}if(pl(Q)||v(Q))return Q=La(Q,W.mode,et,null),Q.return=W,Q;if(typeof Q.then=="function")return ct(W,il(Q),et);if(Q.$$typeof===Ca)return ct(W,pe(W,Q),et);ll(W,Q)}return null}function ft(W,Q,et,st){var gt=Q!==null?Q.key:null;if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return gt!==null?null:P(W,Q,""+et,st);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case ml:return et.key===gt?$(W,Q,et,st):null;case en:return et.key===gt?it(W,Q,et,st):null;case Ea:return gt=et._init,et=gt(et._payload),ft(W,Q,et,st)}if(pl(et)||v(et))return gt!==null?null:ot(W,Q,et,st,null);if(typeof et.then=="function")return ft(W,Q,il(et),st);if(et.$$typeof===Ca)return ft(W,Q,pe(W,et),st);ll(W,et)}return null}function St(W,Q,et,st,gt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return W=W.get(et)||null,P(Q,W,""+st,gt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case ml:return W=W.get(st.key===null?et:st.key)||null,$(Q,W,st,gt);case en:return W=W.get(st.key===null?et:st.key)||null,it(Q,W,st,gt);case Ea:var Pt=st._init;return st=Pt(st._payload),St(W,Q,et,st,gt)}if(pl(st)||v(st))return W=W.get(et)||null,ot(Q,W,st,gt,null);if(typeof st.then=="function")return St(W,Q,et,il(st),gt);if(st.$$typeof===Ca)return St(W,Q,et,pe(Q,st),gt);ll(Q,st)}return null}function Ke(W,Q,et,st){for(var gt=null,Pt=null,yt=Q,Gt=Q=0,oe=null;yt!==null&&Gt<et.length;Gt++){yt.index>Gt?(oe=yt,yt=null):oe=yt.sibling;var Ut=ft(W,yt,et[Gt],st);if(Ut===null){yt===null&&(yt=oe);break}t&&yt&&Ut.alternate===null&&e(W,yt),Q=l(Ut,Q,Gt),Pt===null?gt=Ut:Pt.sibling=Ut,Pt=Ut,yt=oe}if(Gt===et.length)return a(W,yt),zt&&B(W,Gt),gt;if(yt===null){for(;Gt<et.length;Gt++)yt=ct(W,et[Gt],st),yt!==null&&(Q=l(yt,Q,Gt),Pt===null?gt=yt:Pt.sibling=yt,Pt=yt);return zt&&B(W,Gt),gt}for(yt=n(yt);Gt<et.length;Gt++)oe=St(yt,W,Gt,et[Gt],st),oe!==null&&(t&&oe.alternate!==null&&yt.delete(oe.key===null?Gt:oe.key),Q=l(oe,Q,Gt),Pt===null?gt=oe:Pt.sibling=oe,Pt=oe);return t&&yt.forEach(function(Ga){return e(W,Ga)}),zt&&B(W,Gt),gt}function ni(W,Q,et,st){if(et==null)throw Error(C(151));for(var gt=null,Pt=null,yt=Q,Gt=Q=0,oe=null,Ut=et.next();yt!==null&&!Ut.done;Gt++,Ut=et.next()){yt.index>Gt?(oe=yt,yt=null):oe=yt.sibling;var Ga=ft(W,yt,Ut.value,st);if(Ga===null){yt===null&&(yt=oe);break}t&&yt&&Ga.alternate===null&&e(W,yt),Q=l(Ga,Q,Gt),Pt===null?gt=Ga:Pt.sibling=Ga,Pt=Ga,yt=oe}if(Ut.done)return a(W,yt),zt&&B(W,Gt),gt;if(yt===null){for(;!Ut.done;Gt++,Ut=et.next())Ut=ct(W,Ut.value,st),Ut!==null&&(Q=l(Ut,Q,Gt),Pt===null?gt=Ut:Pt.sibling=Ut,Pt=Ut);return zt&&B(W,Gt),gt}for(yt=n(yt);!Ut.done;Gt++,Ut=et.next())Ut=St(yt,W,Gt,Ut.value,st),Ut!==null&&(t&&Ut.alternate!==null&&yt.delete(Ut.key===null?Gt:Ut.key),Q=l(Ut,Q,Gt),Pt===null?gt=Ut:Pt.sibling=Ut,Pt=Ut);return t&&yt.forEach(function(_d){return e(W,_d)}),zt&&B(W,Gt),gt}function Qa(W,Q,et,st){if(typeof et=="object"&&et!==null&&et.type===an&&et.key===null&&(et=et.props.children),typeof et=="object"&&et!==null){switch(et.$$typeof){case ml:t:{for(var gt=et.key;Q!==null;){if(Q.key===gt){if(gt=et.type,gt===an){if(Q.tag===7){a(W,Q.sibling),st=i(Q,et.props.children),st.return=W,W=st;break t}}else if(Q.elementType===gt||typeof gt=="object"&&gt!==null&&gt.$$typeof===Ea&&Yo(gt)===Q.type){a(W,Q.sibling),st=i(Q,et.props),Vn(st,et),st.return=W,W=st;break t}a(W,Q);break}else e(W,Q);Q=Q.sibling}et.type===an?(st=La(et.props.children,W.mode,st,et.key),st.return=W,W=st):(st=gl(et.type,et.key,et.props,null,W.mode,st),Vn(st,et),st.return=W,W=st)}return M(W);case en:t:{for(gt=et.key;Q!==null;){if(Q.key===gt)if(Q.tag===4&&Q.stateNode.containerInfo===et.containerInfo&&Q.stateNode.implementation===et.implementation){a(W,Q.sibling),st=i(Q,et.children||[]),st.return=W,W=st;break t}else{a(W,Q);break}else e(W,Q);Q=Q.sibling}st=js(et,W.mode,st),st.return=W,W=st}return M(W);case Ea:return gt=et._init,et=gt(et._payload),Qa(W,Q,et,st)}if(pl(et))return Ke(W,Q,et,st);if(v(et)){if(gt=v(et),typeof gt!="function")throw Error(C(150));return et=gt.call(et),ni(W,Q,et,st)}if(typeof et.then=="function")return Qa(W,Q,il(et),st);if(et.$$typeof===Ca)return Qa(W,Q,pe(W,et),st);ll(W,et)}return typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint"?(et=""+et,Q!==null&&Q.tag===6?(a(W,Q.sibling),st=i(Q,et),st.return=W,W=st):(a(W,Q),st=ws(et,W.mode,st),st.return=W,W=st),M(W)):a(W,Q)}return function(W,Q,et,st){try{In=0;var gt=Qa(W,Q,et,st);return _n=null,gt}catch(yt){if(yt===kn||yt===Al)throw yt;var Pt=H(29,yt,null,W.mode);return Pt.lanes=st,Pt.return=W,Pt}finally{}}}function pa(t){var e=t.alternate;u(ae,ae.current&1),u(Ye,t),Ie===null&&(e===null||pn.current!==null||e.memoizedState!==null)&&(Ie=t)}function Ko(t){if(t.tag===22){if(u(ae,ae.current),u(Ye,t),Ie===null){var e=t.alternate;e!==null&&e.memoizedState!==null&&(Ie=t)}}else ya()}function ya(){u(ae,ae.current),u(Ye,Ye.current)}function ta(t){c(Ye),Ie===t&&(Ie=null),c(ae)}function sl(t){for(var e=t;e!==null;){if(e.tag===13){var a=e.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||er(a)||ar(a)))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function ps(t,e,a,n){e=t.memoizedState,a=a(n,e),a=a==null?e:Qs({},e,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}function wo(t,e,a,n,i,l,M){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,l,M):e.prototype&&e.prototype.isPureReactComponent?!Zi(a,n)||!Zi(i,l):!0}function jo(t,e,a,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(a,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(a,n),e.state!==t&&pr.enqueueReplaceState(e,e.state,null)}function Ba(t,e){var a=e;if("ref"in e){a={};for(var n in e)n!=="ref"&&(a[n]=e[n])}if(t=t.defaultProps){a===e&&(a=Qs({},a));for(var i in t)a[i]===void 0&&(a[i]=t[i])}return a}function rl(t,e){try{var a=t.onUncaughtError;a(e.value,{componentStack:e.stack})}catch(n){setTimeout(function(){throw n})}}function Xo(t,e,a){try{var n=t.onCaughtError;n(a.value,{componentStack:a.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(i){setTimeout(function(){throw i})}}function ys(t,e,a){return a=ga(a),a.tag=3,a.payload={element:null},a.callback=function(){rl(t,e)},a}function Qo(t){return t=ga(t),t.tag=3,t}function Zo(t,e,a,n){var i=a.type.getDerivedStateFromError;if(typeof i=="function"){var l=n.value;t.payload=function(){return i(l)},t.callback=function(){Xo(e,a,n)}}var M=a.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(t.callback=function(){Xo(e,a,n),typeof i!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var P=n.stack;this.componentDidCatch(n.value,{componentStack:P!==null?P:""})})}function _0(t,e,a,n,i){if(a.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(e=a.alternate,e!==null&&me(e,a,i,!0),a=Ye.current,a!==null){switch(a.tag){case 13:return Ie===null?Ps():a.alternate===null&&Kt===0&&(Kt=3),a.flags&=-257,a.flags|=65536,a.lanes=i,n===Rl?a.flags|=16384:(e=a.updateQueue,e===null?a.updateQueue=new Set([n]):e.add(n),Fs(t,n,i)),!1;case 22:return a.flags|=65536,n===Rl?a.flags|=16384:(e=a.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([n])},a.updateQueue=e):(a=e.retryQueue,a===null?e.retryQueue=new Set([n]):a.add(n)),Fs(t,n,i)),!1}throw Error(C(435,a.tag))}return Fs(t,n,i),Ps(),!1}if(zt)return e=Ye.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=i,n!==ur&&(t=Error(C(422),{cause:n}),ht(A(t,a)))):(n!==ur&&(e=Error(C(423),{cause:n}),ht(A(e,a))),t=t.current.alternate,t.flags|=65536,i&=-i,t.lanes|=i,n=A(n,a),i=ys(t.stateNode,n,i),Il(t,i),Kt!==4&&(Kt=2)),!1;var l=Error(C(520),{cause:n});if(l=A(l,a),ti===null?ti=[l]:ti.push(l),Kt!==4&&(Kt=2),e===null)return!0;n=A(n,a),a=e;do{switch(a.tag){case 3:return a.flags|=65536,t=i&-i,a.lanes|=t,t=ys(a.stateNode,n,t),Il(a,t),!1;case 1:if(e=a.type,l=a.stateNode,(a.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(Oa===null||!Oa.has(l))))return a.flags|=65536,i&=-i,a.lanes|=i,i=Qo(i),Zo(i,t,a,n),Il(a,i),!1}a=a.return}while(a!==null);return!1}function fe(t,e,a,n){e.child=t===null?Gc(e,null,a,n):Sn(e,t.child,a,n)}function Jo(t,e,a,n,i){a=a.render;var l=e.ref;if("ref"in n){var M={};for(var P in n)P!=="ref"&&(M[P]=n[P])}else M=n;return xe(e),n=as(t,e,a,M,l,i),P=ns(),t!==null&&!se?(is(t,e,i),ea(t,e,i)):(zt&&P&&q(e),e.flags|=1,fe(t,e,n,i),e.child)}function ko(t,e,a,n,i){if(t===null){var l=a.type;return typeof l=="function"&&!Ks(l)&&l.defaultProps===void 0&&a.compare===null?(e.tag=15,e.type=l,Wo(t,e,l,n,i)):(t=gl(a.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!Ts(t,i)){var M=l.memoizedProps;if(a=a.compare,a=a!==null?a:Zi,a(M,n)&&t.ref===e.ref)return ea(t,e,i)}return e.flags|=1,t=aa(l,n),t.ref=e.ref,t.return=e,e.child=t}function Wo(t,e,a,n,i){if(t!==null){var l=t.memoizedProps;if(Zi(l,n)&&t.ref===e.ref)if(se=!1,e.pendingProps=n=l,Ts(t,i))(t.flags&131072)!==0&&(se=!0);else return e.lanes=t.lanes,ea(t,e,i)}return vs(t,e,a,n,i)}function Io(t,e,a){var n=e.pendingProps,i=n.children,l=t!==null?t.memoizedState:null;if(n.mode==="hidden"){if((e.flags&128)!==0){if(n=l!==null?l.baseLanes|a:a,t!==null){for(i=e.child=t.child,l=0;i!==null;)l=l|i.lanes|i.childLanes,i=i.sibling;e.childLanes=l&~n}else e.childLanes=0,e.child=null;return $o(t,e,n,a)}if((a&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qi(e,l!==null?l.cachePool:null),l!==null?io(e,l):$l(),Ko(e);else return e.lanes=e.childLanes=536870912,$o(t,e,l!==null?l.baseLanes|a:a,a)}else l!==null?(Qi(e,l.cachePool),io(e,l),ya(),e.memoizedState=null):(t!==null&&Qi(e,null),$l(),ya());return fe(t,e,i,a),e.child}function $o(t,e,a,n){var i=Zl();return i=i===null?null:{parent:na?Ft._currentValue:Ft._currentValue2,pool:i},e.memoizedState={baseLanes:a,cachePool:i},t!==null&&Qi(e,null),$l(),Ko(e),t!==null&&me(t,e,n,!0),null}function ol(t,e){var a=e.ref;if(a===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(C(284));(t===null||t.ref!==a)&&(e.flags|=4194816)}}function vs(t,e,a,n,i){return xe(e),a=as(t,e,a,n,void 0,i),n=ns(),t!==null&&!se?(is(t,e,i),ea(t,e,i)):(zt&&n&&q(e),e.flags|=1,fe(t,e,a,i),e.child)}function tu(t,e,a,n,i,l){return xe(e),e.updateQueue=null,a=so(e,n,a,i),lo(t),n=ns(),t!==null&&!se?(is(t,e,l),ea(t,e,l)):(zt&&n&&q(e),e.flags|=1,fe(t,e,a,l),e.child)}function eu(t,e,a,n,i){if(xe(e),e.stateNode===null){var l=rn,M=a.contextType;typeof M=="object"&&M!==null&&(l=_t(M)),l=new a(n,l),e.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=pr,e.stateNode=l,l._reactInternals=e,l=e.stateNode,l.props=n,l.state=e.memoizedState,l.refs={},kl(e),M=a.contextType,l.context=typeof M=="object"&&M!==null?_t(M):rn,l.state=e.memoizedState,M=a.getDerivedStateFromProps,typeof M=="function"&&(ps(e,a,M,n),l.state=e.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(M=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),M!==l.state&&pr.enqueueReplaceState(l,l.state,null),Un(e,n,l,i),Gn(),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!0}else if(t===null){l=e.stateNode;var P=e.memoizedProps,$=Ba(a,P);l.props=$;var it=l.context,ot=a.contextType;M=rn,typeof ot=="object"&&ot!==null&&(M=_t(ot));var ct=a.getDerivedStateFromProps;ot=typeof ct=="function"||typeof l.getSnapshotBeforeUpdate=="function",P=e.pendingProps!==P,ot||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(P||it!==M)&&jo(e,l,n,M),xa=!1;var ft=e.memoizedState;l.state=ft,Un(e,n,l,i),Gn(),it=e.memoizedState,P||ft!==it||xa?(typeof ct=="function"&&(ps(e,a,ct,n),it=e.memoizedState),($=xa||wo(e,a,$,n,ft,it,M))?(ot||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=it),l.props=n,l.state=it,l.context=M,n=$):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{l=e.stateNode,Wl(t,e),M=e.memoizedProps,ot=Ba(a,M),l.props=ot,ct=e.pendingProps,ft=l.context,it=a.contextType,$=rn,typeof it=="object"&&it!==null&&($=_t(it)),P=a.getDerivedStateFromProps,(it=typeof P=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(M!==ct||ft!==$)&&jo(e,l,n,$),xa=!1,ft=e.memoizedState,l.state=ft,Un(e,n,l,i),Gn();var St=e.memoizedState;M!==ct||ft!==St||xa||t!==null&&t.dependencies!==null&&It(t.dependencies)?(typeof P=="function"&&(ps(e,a,P,n),St=e.memoizedState),(ot=xa||wo(e,a,ot,n,ft,St,$)||t!==null&&t.dependencies!==null&&It(t.dependencies))?(it||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,St,$),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,St,$)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||M===t.memoizedProps&&ft===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ft===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=St),l.props=n,l.state=St,l.context=$,n=ot):(typeof l.componentDidUpdate!="function"||M===t.memoizedProps&&ft===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||M===t.memoizedProps&&ft===t.memoizedState||(e.flags|=1024),n=!1)}return l=n,ol(t,e),n=(e.flags&128)!==0,l||n?(l=e.stateNode,a=n&&typeof a.getDerivedStateFromError!="function"?null:l.render(),e.flags|=1,t!==null&&n?(e.child=Sn(e,t.child,null,i),e.child=Sn(e,null,a,i)):fe(t,e,a,i),e.memoizedState=l.state,t=e.child):t=ea(t,e,i),t}function au(t,e,a,n){return lt(),e.flags|=256,fe(t,e,a,n),e.child}function _s(t){return{baseLanes:t,cachePool:kr()}}function Ss(t,e,a){return t=t!==null?t.childLanes&~a:0,e&&(t|=Fe),t}function nu(t,e,a){var n=e.pendingProps,i=!1,l=(e.flags&128)!==0,M;if((M=l)||(M=t!==null&&t.memoizedState===null?!1:(ae.current&2)!==0),M&&(i=!0,e.flags&=-129),M=(e.flags&32)!==0,e.flags&=-33,t===null){if(zt){if(i?pa(e):ya(),zt){var P=ee,$;($=P)&&(P=Pf(P,We),P!==null?(e.memoizedState={dehydrated:P,treeContext:Ya!==null?{id:la,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},$=H(18,null,null,0),$.stateNode=P,$.return=e,e.child=$,_e=e,ee=null,$=!0):$=!1),$||V(e)}if(P=e.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return ar(P)?e.lanes=32:e.lanes=536870912,null;ta(e)}return P=n.children,n=n.fallback,i?(ya(),i=e.mode,P=ul({mode:"hidden",children:P},i),n=La(n,i,a,null),P.return=e,n.return=e,P.sibling=n,e.child=P,i=e.child,i.memoizedState=_s(a),i.childLanes=Ss(t,M,a),e.memoizedState=yr,n):(pa(e),bs(e,P))}if($=t.memoizedState,$!==null&&(P=$.dehydrated,P!==null)){if(l)e.flags&256?(pa(e),e.flags&=-257,e=Cs(t,e,a)):e.memoizedState!==null?(ya(),e.child=t.child,e.flags|=128,e=null):(ya(),i=n.fallback,P=e.mode,n=ul({mode:"visible",children:n.children},P),i=La(i,P,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,Sn(e,t.child,null,a),n=e.child,n.memoizedState=_s(a),n.childLanes=Ss(t,M,a),e.memoizedState=yr,e=i);else if(pa(e),ar(P))M=Mf(P).digest,n=Error(C(419)),n.stack="",n.digest=M,ht({value:n,source:null,stack:null}),e=Cs(t,e,a);else if(se||me(t,e,a,!1),M=(a&t.childLanes)!==0,se||M){if(M=qt,M!==null&&(n=a&-a,n=(n&42)!==0?1:L(n),n=(n&(M.suspendedLanes|a))!==0?0:n,n!==0&&n!==$.retryLane))throw $.retryLane=n,ka(t,n),De(M,t,n),zc;er(P)||Ps(),e=Cs(t,e,a)}else er(P)?(e.flags|=192,e.child=t.child,e=null):(t=$.treeContext,Ve&&(ee=Hf(P),_e=e,zt=!0,Fa=null,We=!1,t!==null&&(Le[qe++]=la,Le[qe++]=sa,Le[qe++]=Ya,la=t.id,sa=t.overflow,Ya=e)),e=bs(e,n.children),e.flags|=4096);return e}return i?(ya(),i=n.fallback,P=e.mode,$=t.child,l=$.sibling,n=aa($,{mode:"hidden",children:n.children}),n.subtreeFlags=$.subtreeFlags&65011712,l!==null?i=aa(l,i):(i=La(i,P,a,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,P=t.child.memoizedState,P===null?P=_s(a):($=P.cachePool,$!==null?(l=na?Ft._currentValue:Ft._currentValue2,$=$.parent!==l?{parent:l,pool:l}:$):$=kr(),P={baseLanes:P.baseLanes|a,cachePool:$}),i.memoizedState=P,i.childLanes=Ss(t,M,a),e.memoizedState=yr,n):(pa(e),a=t.child,t=a.sibling,a=aa(a,{mode:"visible",children:n.children}),a.return=e,a.sibling=null,t!==null&&(M=e.deletions,M===null?(e.deletions=[t],e.flags|=16):M.push(t)),e.child=a,e.memoizedState=null,a)}function bs(t,e){return e=ul({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function ul(t,e){return t=H(22,t,null,e),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Cs(t,e,a){return Sn(e,t.child,null,a),t=bs(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function iu(t,e,a){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Ct(t.return,e,a)}function Es(t,e,a,n,i){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:a,tailMode:i}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=a,l.tailMode=i)}function lu(t,e,a){var n=e.pendingProps,i=n.revealOrder,l=n.tail;if(fe(t,e,n.children,a),n=ae.current,(n&2)!==0)n=n&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&iu(t,a,e);else if(t.tag===19)iu(t,a,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}switch(u(ae,n),i){case"forwards":for(a=e.child,i=null;a!==null;)t=a.alternate,t!==null&&sl(t)===null&&(i=a),a=a.sibling;a=i,a===null?(i=e.child,e.child=null):(i=a.sibling,a.sibling=null),Es(e,!1,i,a,l);break;case"backwards":for(a=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&sl(t)===null){e.child=i;break}t=i.sibling,i.sibling=a,a=i,i=t}Es(e,!0,a,null,l);break;case"together":Es(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e,a){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,(a&e.childLanes)===0)if(t!==null){if(me(t,e,a,!1),(a&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(C(153));if(e.child!==null){for(t=e.child,a=aa(t,t.pendingProps),e.child=a,a.return=e;t.sibling!==null;)t=t.sibling,a=a.sibling=aa(t,t.pendingProps),a.return=e;a.sibling=null}return e.child}function Ts(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&It(t)))}function S0(t,e,a){switch(e.tag){case 3:w(e,e.stateNode.containerInfo),dt(e,Ft,t.memoizedState.cache),lt();break;case 27:case 5:rt(e);break;case 4:w(e,e.stateNode.containerInfo);break;case 10:dt(e,e.type,e.memoizedProps.value);break;case 13:var n=e.memoizedState;if(n!==null)return n.dehydrated!==null?(pa(e),e.flags|=128,null):(a&e.child.childLanes)!==0?nu(t,e,a):(pa(e),t=ea(t,e,a),t!==null?t.sibling:null);pa(e);break;case 19:var i=(t.flags&128)!==0;if(n=(a&e.childLanes)!==0,n||(me(t,e,a,!1),n=(a&e.childLanes)!==0),i){if(n)return lu(t,e,a);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),u(ae,ae.current),n)break;return null;case 22:case 23:return e.lanes=0,Io(t,e,a);case 24:dt(e,Ft,t.memoizedState.cache)}return ea(t,e,a)}function su(t,e,a){if(t!==null)if(t.memoizedProps!==e.pendingProps)se=!0;else{if(!Ts(t,a)&&(e.flags&128)===0)return se=!1,S0(t,e,a);se=(t.flags&131072)!==0}else se=!1,zt&&(e.flags&1048576)!==0&&z(e,Cl,e.index);switch(e.lanes=0,e.tag){case 16:t:{t=e.pendingProps;var n=e.elementType,i=n._init;if(n=i(n._payload),e.type=n,typeof n=="function")Ks(n)?(t=Ba(n,t),e.tag=1,e=eu(null,e,n,t,a)):(e.tag=0,e=vs(null,e,n,t,a));else{if(n!=null){if(i=n.$$typeof,i===Js){e.tag=11,e=Jo(null,e,n,t,a);break t}else if(i===Is){e.tag=14,e=ko(null,e,n,t,a);break t}}throw e=E(n)||n,Error(C(306,e,""))}}return e;case 0:return vs(t,e,e.type,e.pendingProps,a);case 1:return n=e.type,i=Ba(n,e.pendingProps),eu(t,e,n,i,a);case 3:t:{if(w(e,e.stateNode.containerInfo),t===null)throw Error(C(387));var l=e.pendingProps;i=e.memoizedState,n=i.element,Wl(t,e),Un(e,l,null,a);var M=e.memoizedState;if(l=M.cache,dt(e,Ft,l),l!==i.cache&&Dt(e,[Ft],a,!0),Gn(),l=M.element,Ve&&i.isDehydrated)if(i={element:l,isDehydrated:!1,cache:M.cache},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){e=au(t,e,l,a);break t}else if(l!==n){n=A(Error(C(424)),e),ht(n),e=au(t,e,l,a);break t}else for(Ve&&(ee=Bf(e.stateNode.containerInfo),_e=e,zt=!0,Fa=null,We=!0),a=Gc(e,null,l,a),e.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(lt(),l===n){e=ea(t,e,a);break t}fe(t,e,l,a)}e=e.child}return e;case 26:if(Xe)return ol(t,e),t===null?(a=yc(e.type,null,e.pendingProps,null))?e.memoizedState=a:zt||(e.stateNode=If(e.type,e.pendingProps,Na.current,e)):e.memoizedState=yc(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:if(te)return rt(e),t===null&&te&&zt&&(n=e.stateNode=Ec(e.type,e.pendingProps,Na.current,de.current,!1),_e=e,We=!0,ee=Vf(e.type,n,ee)),fe(t,e,e.pendingProps.children,a),ol(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&zt&&(Jf(e.type,e.pendingProps,de.current),(i=n=ee)&&(n=Lf(n,e.type,e.pendingProps,We),n!==null?(e.stateNode=n,_e=e,ee=zf(n),We=!1,i=!0):i=!1),i||V(e)),rt(e),i=e.type,l=e.pendingProps,M=t!==null?t.memoizedProps:null,n=l.children,yl(i,l)?n=null:M!==null&&yl(i,M)&&(e.flags|=32),e.memoizedState!==null&&(i=as(t,e,g0,null,null,a),na?Pa._currentValue=i:Pa._currentValue2=i),ol(t,e),fe(t,e,n,a),e.child;case 6:return t===null&&zt&&(kf(e.pendingProps,de.current),(t=a=ee)&&(a=qf(a,e.pendingProps,We),a!==null?(e.stateNode=a,_e=e,ee=null,t=!0):t=!1),t||V(e)),null;case 13:return nu(t,e,a);case 4:return w(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Sn(e,null,n,a):fe(t,e,n,a),e.child;case 11:return Jo(t,e,e.type,e.pendingProps,a);case 7:return fe(t,e,e.pendingProps,a),e.child;case 8:return fe(t,e,e.pendingProps.children,a),e.child;case 12:return fe(t,e,e.pendingProps.children,a),e.child;case 10:return n=e.pendingProps,dt(e,e.type,n.value),fe(t,e,n.children,a),e.child;case 9:return i=e.type._context,n=e.pendingProps.children,xe(e),i=_t(i),n=n(i),e.flags|=1,fe(t,e,n,a),e.child;case 14:return ko(t,e,e.type,e.pendingProps,a);case 15:return Wo(t,e,e.type,e.pendingProps,a);case 19:return lu(t,e,a);case 31:return n=e.pendingProps,a=e.mode,n={mode:n.mode,children:n.children},t===null?(a=ul(n,a),a.ref=e.ref,e.child=a,a.return=e,e=a):(a=aa(t.child,n),a.ref=e.ref,e.child=a,a.return=e,e=a),e;case 22:return Io(t,e,a);case 24:return xe(e),n=_t(Ft),t===null?(i=Zl(),i===null&&(i=qt,l=we(),i.pooledCache=l,l.refCount++,l!==null&&(i.pooledCacheLanes|=a),i=l),e.memoizedState={parent:n,cache:i},kl(e),dt(e,Ft,i)):((t.lanes&a)!==0&&(Wl(t,e),Un(e,null,null,a),Gn()),i=t.memoizedState,l=e.memoizedState,i.parent!==n?(i={parent:n,cache:n},e.memoizedState=i,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=i),dt(e,Ft,n)):(n=l.cache,dt(e,Ft,n),n!==i.cache&&Dt(e,[Ft],a,!0))),fe(t,e,e.pendingProps.children,a),e.child;case 29:throw e.pendingProps}throw Error(C(156,e.tag))}function Me(t){t.flags|=4}function ru(t,e){if(t!==null&&t.child===e.child)return!1;if((e.flags&16)!==0)return!0;for(t=e.child;t!==null;){if((t.flags&13878)!==0||(t.subtreeFlags&13878)!==0)return!0;t=t.sibling}return!1}function Ns(t,e,a,n){if(ye)for(a=e.child;a!==null;){if(a.tag===5||a.tag===6)tr(t,a.stateNode);else if(!(a.tag===4||te&&a.tag===27)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===e)break;for(;a.sibling===null;){if(a.return===null||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}else if(Ta)for(var i=e.child;i!==null;){if(i.tag===5){var l=i.stateNode;a&&n&&(l=fc(l,i.type,i.memoizedProps)),tr(t,l)}else if(i.tag===6)l=i.stateNode,a&&n&&(l=dc(l,i.memoizedProps)),tr(t,l);else if(i.tag!==4){if(i.tag===22&&i.memoizedState!==null)l=i.child,l!==null&&(l.return=i),Ns(t,i,!0,!0);else if(i.child!==null){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ou(t,e,a,n){var i=!1;if(Ta)for(var l=e.child;l!==null;){if(l.tag===5){var M=l.stateNode;a&&n&&(M=fc(M,l.type,l.memoizedProps)),cc(t,M)}else if(l.tag===6)M=l.stateNode,a&&n&&(M=dc(M,l.memoizedProps)),cc(t,M);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)i=l.child,i!==null&&(i.return=l),ou(t,l,!0,!0),i=!0;else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===e)break;for(;l.sibling===null;){if(l.return===null||l.return===e)return i;l=l.return}l.sibling.return=l.return,l=l.sibling}return i}function uu(t,e){if(Ta&&ru(t,e)){t=e.stateNode;var a=t.containerInfo,n=uc();ou(n,e,!1,!1),t.pendingChildren=n,Me(e),Rf(a,n)}}function xs(t,e,a,n){if(ye)t.memoizedProps!==n&&Me(e);else if(Ta){var i=t.stateNode,l=t.memoizedProps;if((t=ru(t,e))||l!==n){var M=de.current;l=Af(i,a,l,n,!t,null),l===i?e.stateNode=i:(ic(l,a,n,M)&&Me(e),e.stateNode=l,t?Ns(l,e,!1,!1):Me(e))}else e.stateNode=i}}function As(t,e,a){if(tf(e,a)){if(t.flags|=16777216,!sc(e,a))if(zu())t.flags|=8192;else throw gn=Rl,dr}else t.flags&=-16777217}function cu(t,e){if(td(e)){if(t.flags|=16777216,!Cc(e))if(zu())t.flags|=8192;else throw gn=Rl,dr}else t.flags&=-16777217}function cl(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?T():536870912,t.lanes|=e,En|=e)}function Ln(t,e){if(!zt)switch(t.tailMode){case"hidden":e=t.tail;for(var a=null;e!==null;)e.alternate!==null&&(a=e),e=e.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,a=0,n=0;if(e)for(var i=t.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags&65011712,n|=i.flags&65011712,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)a|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=a,e}function b0(t,e,a){var n=e.pendingProps;switch(at(e),e.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(e),null;case 1:return Yt(e),null;case 3:return a=e.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),vt(Ft),nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(I(e)?Me(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,ut())),uu(t,e),Yt(e),null;case 26:if(Xe){a=e.type;var i=e.memoizedState;return t===null?(Me(e),i!==null?(Yt(e),cu(e,i)):(Yt(e),As(e,a,n))):i?i!==t.memoizedState?(Me(e),Yt(e),cu(e,i)):(Yt(e),e.flags&=-16777217):(ye?t.memoizedProps!==n&&Me(e):xs(t,e,a,n),Yt(e),As(e,a,n)),null}case 27:if(te){if(tt(e),a=Na.current,i=e.type,t!==null&&e.stateNode!=null)ye?t.memoizedProps!==n&&Me(e):xs(t,e,i,n);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Yt(e),null}t=de.current,I(e)?k(e,t):(t=Ec(i,n,a,t,!0),e.stateNode=t,Me(e))}return Yt(e),null}case 5:if(tt(e),a=e.type,t!==null&&e.stateNode!=null)xs(t,e,a,n);else{if(!n){if(e.stateNode===null)throw Error(C(166));return Yt(e),null}t=de.current,I(e)?k(e,t):(i=X0(a,n,Na.current,t,e),Ns(i,e,!1,!1),e.stateNode=i,ic(i,a,n,t)&&Me(e))}return Yt(e),As(e,e.type,e.pendingProps),null;case 6:if(t&&e.stateNode!=null)a=t.memoizedProps,ye?a!==n&&Me(e):Ta&&(a!==n?(e.stateNode=lc(n,Na.current,de.current,e),Me(e)):e.stateNode=t.stateNode);else{if(typeof n!="string"&&e.stateNode===null)throw Error(C(166));if(t=Na.current,a=de.current,I(e)){if(!Ve)throw Error(C(176));if(t=e.stateNode,a=e.memoizedProps,n=null,i=_e,i!==null)switch(i.tag){case 27:case 5:n=i.memoizedProps}Ff(t,a,e,n)||V(e)}else e.stateNode=lc(n,t,a,e)}return Yt(e),null;case 13:if(n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(i=I(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(C(318));if(!Ve)throw Error(C(344));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(C(317));Kf(i,e)}else lt(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;Yt(e),i=!1}else i=ut(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),i=!0;if(!i)return e.flags&256?(ta(e),e):(ta(e),null)}if(ta(e),(e.flags&128)!==0)return e.lanes=a,e;if(a=n!==null,t=t!==null&&t.memoizedState!==null,a){n=e.child,i=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(i=n.alternate.memoizedState.cachePool.pool);var l=null;n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),l!==i&&(n.flags|=2048)}return a!==t&&a&&(e.child.flags|=8192),cl(e,e.updateQueue),Yt(e),null;case 4:return nt(),uu(t,e),t===null&&k0(e.stateNode.containerInfo),Yt(e),null;case 10:return vt(e.type),Yt(e),null;case 19:if(c(ae),i=e.memoizedState,i===null)return Yt(e),null;if(n=(e.flags&128)!==0,l=i.rendering,l===null)if(n)Ln(i,!1);else{if(Kt!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(l=sl(t),l!==null){for(e.flags|=128,Ln(i,!1),t=l.updateQueue,e.updateQueue=t,cl(e,t),e.subtreeFlags=0,t=a,a=e.child;a!==null;)Zu(a,t),a=a.sibling;return u(ae,ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Qe()>ei&&(e.flags|=128,n=!0,Ln(i,!1),e.lanes=4194304)}else{if(!n)if(t=sl(l),t!==null){if(e.flags|=128,n=!0,t=t.updateQueue,e.updateQueue=t,cl(e,t),Ln(i,!0),i.tail===null&&i.tailMode==="hidden"&&!l.alternate&&!zt)return Yt(e),null}else 2*Qe()-i.renderingStartTime>ei&&a!==536870912&&(e.flags|=128,n=!0,Ln(i,!1),e.lanes=4194304);i.isBackwards?(l.sibling=e.child,e.child=l):(t=i.last,t!==null?t.sibling=l:e.child=l,i.last=l)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Qe(),e.sibling=null,t=ae.current,u(ae,n?t&1|2:t&1),e):(Yt(e),null);case 22:case 23:return ta(e),ts(),n=e.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(e.flags|=8192):n&&(e.flags|=8192),n?(a&536870912)!==0&&(e.flags&128)===0&&(Yt(e),e.subtreeFlags&6&&(e.flags|=8192)):Yt(e),a=e.updateQueue,a!==null&&cl(e,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),n=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),n!==a&&(e.flags|=2048),t!==null&&c(wa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),e.memoizedState.cache!==a&&(e.flags|=2048),vt(Ft),Yt(e),null;case 25:return null;case 30:return null}throw Error(C(156,e.tag))}function C0(t,e){switch(at(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return vt(Ft),nt(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return tt(e),null;case 13:if(ta(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(C(340));lt()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return c(ae),null;case 4:return nt(),null;case 10:return vt(e.type),null;case 22:case 23:return ta(e),ts(),t!==null&&c(wa),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return vt(Ft),null;case 25:return null;default:return null}}function hu(t,e){switch(at(e),e.tag){case 3:vt(Ft),nt();break;case 26:case 27:case 5:tt(e);break;case 4:nt();break;case 13:ta(e);break;case 19:c(ae);break;case 10:vt(e.type);break;case 22:case 23:ta(e),ts(),t!==null&&c(wa);break;case 24:vt(Ft)}}function qn(t,e){try{var a=e.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&t)===t){n=void 0;var l=a.create,M=a.inst;n=l(),M.destroy=n}a=a.next}while(a!==i)}}catch(P){Ht(e,e.return,P)}}function va(t,e,a){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var l=i.next;n=l;do{if((n.tag&t)===t){var M=n.inst,P=M.destroy;if(P!==void 0){M.destroy=void 0,i=e;var $=a,it=P;try{it()}catch(ot){Ht(i,$,ot)}}}n=n.next}while(n!==l)}}catch(ot){Ht(e,e.return,ot)}}function fu(t){var e=t.updateQueue;if(e!==null){var a=t.stateNode;try{no(e,a)}catch(n){Ht(t,t.return,n)}}}function du(t,e,a){a.props=Ba(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(n){Ht(t,e,n)}}function Pn(t,e){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var n=wn(t.stateNode);break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof a=="function"?t.refCleanup=a(n):a.current=n}}catch(i){Ht(t,e,i)}}function Je(t,e){var a=t.ref,n=t.refCleanup;if(a!==null)if(typeof n=="function")try{n()}catch(i){Ht(t,e,i)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(i){Ht(t,e,i)}else a.current=null}function gu(t){var e=t.type,a=t.memoizedProps,n=t.stateNode;try{pf(n,e,a,t)}catch(i){Ht(t,t.return,i)}}function Rs(t,e,a){try{yf(t.stateNode,t.type,a,e,t)}catch(n){Ht(t,t.return,n)}}function mu(t){return t.tag===5||t.tag===3||(Xe?t.tag===26:!1)||(te?t.tag===27&&ln(t.type):!1)||t.tag===4}function Ms(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||mu(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(te&&t.tag===27&&ln(t.type)||t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Os(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?_f(a,t,e):gf(a,t);else if(n!==4&&(te&&n===27&&ln(t.type)&&(a=t.stateNode,e=null),t=t.child,t!==null))for(Os(t,e,a),t=t.sibling;t!==null;)Os(t,e,a),t=t.sibling}function hl(t,e,a){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?vf(a,t,e):df(a,t);else if(n!==4&&(te&&n===27&&ln(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(hl(t,e,a),t=t.sibling;t!==null;)hl(t,e,a),t=t.sibling}function pu(t,e,a){t=t.containerInfo;try{hc(t,a)}catch(n){Ht(e,e.return,n)}}function yu(t){var e=t.stateNode,a=t.memoizedProps;try{ad(t.type,a,e,t)}catch(n){Ht(t,t.return,n)}}function E0(t,e){for(w0(t.containerInfo),re=e;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;var a=t.alternate;switch(e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&a!==null){e=void 0;var n=t,i=a.memoizedProps;a=a.memoizedState;var l=n.stateNode;try{var M=Ba(n.type,i,n.elementType===n.type);e=l.getSnapshotBeforeUpdate(M,a),l.__reactInternalSnapshotBeforeUpdate=e}catch(P){Ht(n,n.return,P)}}break;case 3:(e&1024)!==0&&ye&&xf(t.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(C(163))}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}}function vu(t,e,a){var n=a.flags;switch(a.tag){case 0:case 11:case 15:_a(t,a),n&4&&qn(5,a);break;case 1:if(_a(t,a),n&4)if(t=a.stateNode,e===null)try{t.componentDidMount()}catch(M){Ht(a,a.return,M)}else{var i=Ba(a.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(i,e,t.__reactInternalSnapshotBeforeUpdate)}catch(M){Ht(a,a.return,M)}}n&64&&fu(a),n&512&&Pn(a,a.return);break;case 3:if(_a(t,a),n&64&&(t=a.updateQueue,t!==null)){if(e=null,a.child!==null)switch(a.child.tag){case 27:case 5:e=wn(a.child.stateNode);break;case 1:e=a.child.stateNode}try{no(t,e)}catch(M){Ht(a,a.return,M)}}break;case 27:te&&e===null&&n&4&&yu(a);case 26:case 5:_a(t,a),e===null&&n&4&&gu(a),n&512&&Pn(a,a.return);break;case 12:_a(t,a);break;case 13:_a(t,a),n&4&&Su(t,a),n&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=O0.bind(null,a),Of(t,a))));break;case 22:if(n=a.memoizedState!==null||oa,!n){e=e!==null&&e.memoizedState!==null||Xt,i=oa;var l=Xt;oa=n,(Xt=e)&&!l?Sa(t,a,(a.subtreeFlags&8772)!==0):_a(t,a),oa=i,Xt=l}break;case 30:break;default:_a(t,a)}}function _u(t){var e=t.alternate;e!==null&&(t.alternate=null,_u(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&$0(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function je(t,e,a){for(a=a.child;a!==null;)Ds(t,e,a),a=a.sibling}function Ds(t,e,a){if(ze&&typeof ze.onCommitFiberUnmount=="function")try{ze.onCommitFiberUnmount(Qn,a)}catch{}switch(a.tag){case 26:if(Xe){Xt||Je(a,e),je(t,e,a),a.memoizedState?_c(a.memoizedState):a.stateNode&&bc(a.stateNode);break}case 27:if(te){Xt||Je(a,e);var n=Wt,i=Ce;ln(a.type)&&(Wt=a.stateNode,Ce=!1),je(t,e,a),Tc(a.stateNode),Wt=n,Ce=i;break}case 5:Xt||Je(a,e);case 6:if(ye){if(n=Wt,i=Ce,Wt=null,je(t,e,a),Wt=n,Ce=i,Wt!==null)if(Ce)try{bf(Wt,a.stateNode)}catch(l){Ht(a,e,l)}else try{Sf(Wt,a.stateNode)}catch(l){Ht(a,e,l)}}else je(t,e,a);break;case 18:ye&&Wt!==null&&(Ce?Zf(Wt,a.stateNode):Qf(Wt,a.stateNode));break;case 4:ye?(n=Wt,i=Ce,Wt=a.stateNode.containerInfo,Ce=!0,je(t,e,a),Wt=n,Ce=i):(Ta&&pu(a.stateNode,a,uc()),je(t,e,a));break;case 0:case 11:case 14:case 15:Xt||va(2,a,e),Xt||va(4,a,e),je(t,e,a);break;case 1:Xt||(Je(a,e),n=a.stateNode,typeof n.componentWillUnmount=="function"&&du(a,e,n)),je(t,e,a);break;case 21:je(t,e,a);break;case 22:Xt=(n=Xt)||a.memoizedState!==null,je(t,e,a),Xt=n;break;default:je(t,e,a)}}function Su(t,e){if(Ve&&e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Xf(t)}catch(a){Ht(e,e.return,a)}}function T0(t){switch(t.tag){case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new Bc),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new Bc),e;default:throw Error(C(435,t.tag))}}function Gs(t,e){var a=T0(t);e.forEach(function(n){var i=D0.bind(null,t,n);a.has(n)||(a.add(n),n.then(i,i))})}function ve(t,e){var a=e.deletions;if(a!==null)for(var n=0;n<a.length;n++){var i=a[n],l=t,M=e;if(ye){var P=M;t:for(;P!==null;){switch(P.tag){case 27:if(te){if(ln(P.type)){Wt=P.stateNode,Ce=!1;break t}break}case 5:Wt=P.stateNode,Ce=!1;break t;case 3:case 4:Wt=P.stateNode.containerInfo,Ce=!0;break t}P=P.return}if(Wt===null)throw Error(C(160));Ds(l,M,i),Wt=null,Ce=!1}else Ds(l,M,i);l=i.alternate,l!==null&&(l.return=null),i.return=null}if(e.subtreeFlags&13878)for(e=e.child;e!==null;)bu(e,t),e=e.sibling}function bu(t,e){var a=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ve(e,t),be(t),n&4&&(va(3,t,t.return),qn(3,t),va(5,t,t.return));break;case 1:ve(e,t),be(t),n&512&&(Xt||a===null||Je(a,a.return)),n&64&&oa&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?n:a.concat(n))));break;case 26:if(Xe){var i=Ze;if(ve(e,t),be(t),n&512&&(Xt||a===null||Je(a,a.return)),n&4){n=a!==null?a.memoizedState:null;var l=t.memoizedState;a===null?l===null?t.stateNode===null?t.stateNode=Wf(i,t.type,t.memoizedProps,t):Sc(i,t.type,t.stateNode):t.stateNode=vc(i,l,t.memoizedProps):n!==l?(n===null?a.stateNode!==null&&bc(a.stateNode):_c(n),l===null?Sc(i,t.type,t.stateNode):vc(i,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Rs(t,t.memoizedProps,a.memoizedProps)}break}case 27:if(te){ve(e,t),be(t),n&512&&(Xt||a===null||Je(a,a.return)),a!==null&&n&4&&Rs(t,t.memoizedProps,a.memoizedProps);break}case 5:if(ve(e,t),be(t),n&512&&(Xt||a===null||Je(a,a.return)),ye){if(t.flags&32){i=t.stateNode;try{oc(i)}catch(ot){Ht(t,t.return,ot)}}n&4&&t.stateNode!=null&&(i=t.memoizedProps,Rs(t,i,a!==null?a.memoizedProps:i)),n&1024&&(vr=!0)}break;case 6:if(ve(e,t),be(t),n&4&&ye){if(t.stateNode===null)throw Error(C(162));n=t.memoizedProps,a=a!==null?a.memoizedProps:n,i=t.stateNode;try{mf(i,a,n)}catch(ot){Ht(t,t.return,ot)}}break;case 3:if(Xe?($f(),i=Ze,Ze=nr(e.containerInfo),ve(e,t),Ze=i):ve(e,t),be(t),n&4){if(ye&&Ve&&a!==null&&a.memoizedState.isDehydrated)try{jf(e.containerInfo)}catch(ot){Ht(t,t.return,ot)}if(Ta){n=e.containerInfo,a=e.pendingChildren;try{hc(n,a)}catch(ot){Ht(t,t.return,ot)}}}vr&&(vr=!1,Cu(t));break;case 4:Xe?(a=Ze,Ze=nr(t.stateNode.containerInfo),ve(e,t),be(t),Ze=a):(ve(e,t),be(t)),n&4&&Ta&&pu(t.stateNode,t,t.stateNode.pendingChildren);break;case 12:ve(e,t),be(t);break;case 13:ve(e,t),be(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Cr=Qe()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Gs(t,n)));break;case 22:i=t.memoizedState!==null;var M=a!==null&&a.memoizedState!==null,P=oa,$=Xt;if(oa=P||i,Xt=$||M,ve(e,t),Xt=$,oa=P,be(t),n&8192&&(e=t.stateNode,e._visibility=i?e._visibility&-2:e._visibility|1,i&&(a===null||M||oa||Xt||Ha(t)),ye)){t:if(a=null,ye)for(e=t;;){if(e.tag===5||Xe&&e.tag===26){if(a===null){M=a=e;try{l=M.stateNode,i?Cf(l):Tf(M.stateNode,M.memoizedProps)}catch(ot){Ht(M,M.return,ot)}}}else if(e.tag===6){if(a===null){M=e;try{var it=M.stateNode;i?Ef(it):Nf(it,M.memoizedProps)}catch(ot){Ht(M,M.return,ot)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;a===e&&(a=null),e=e.return}a===e&&(a=null),e.sibling.return=e.return,e=e.sibling}}n&4&&(n=t.updateQueue,n!==null&&(a=n.retryQueue,a!==null&&(n.retryQueue=null,Gs(t,a))));break;case 19:ve(e,t),be(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,Gs(t,n)));break;case 30:break;case 21:break;default:ve(e,t),be(t)}}function be(t){var e=t.flags;if(e&2){try{if(ye){for(var a,n=t.return;n!==null;){if(mu(n)){a=n;break}n=n.return}if(a==null)throw Error(C(160));switch(a.tag){case 27:if(te){var i=a.stateNode,l=Ms(t);hl(t,l,i);break}case 5:var M=a.stateNode;a.flags&32&&(oc(M),a.flags&=-33);var P=Ms(t);hl(t,P,M);break;case 3:case 4:var $=a.stateNode.containerInfo,it=Ms(t);Os(t,it,$);break;default:throw Error(C(161))}}}catch(ot){Ht(t,t.return,ot)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Cu(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;Cu(e),e.tag===5&&e.flags&1024&&nf(e.stateNode),t=t.sibling}}function _a(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)vu(t,e.alternate,e),e=e.sibling}function Ha(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:va(4,e,e.return),Ha(e);break;case 1:Je(e,e.return);var a=e.stateNode;typeof a.componentWillUnmount=="function"&&du(e,e.return,a),Ha(e);break;case 27:te&&Tc(e.stateNode);case 26:case 5:Je(e,e.return),Ha(e);break;case 22:e.memoizedState===null&&Ha(e);break;case 30:Ha(e);break;default:Ha(e)}t=t.sibling}}function Sa(t,e,a){for(a=a&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var n=e.alternate,i=t,l=e,M=l.flags;switch(l.tag){case 0:case 11:case 15:Sa(i,l,a),qn(4,l);break;case 1:if(Sa(i,l,a),n=l,i=n.stateNode,typeof i.componentDidMount=="function")try{i.componentDidMount()}catch(it){Ht(n,n.return,it)}if(n=l,i=n.updateQueue,i!==null){var P=n.stateNode;try{var $=i.shared.hiddenCallbacks;if($!==null)for(i.shared.hiddenCallbacks=null,i=0;i<$.length;i++)ao($[i],P)}catch(it){Ht(n,n.return,it)}}a&&M&64&&fu(l),Pn(l,l.return);break;case 27:te&&yu(l);case 26:case 5:Sa(i,l,a),a&&n===null&&M&4&&gu(l),Pn(l,l.return);break;case 12:Sa(i,l,a);break;case 13:Sa(i,l,a),a&&M&4&&Su(i,l);break;case 22:l.memoizedState===null&&Sa(i,l,a),Pn(l,l.return);break;case 30:break;default:Sa(i,l,a)}e=e.sibling}}function Us(t,e){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Zt(a))}function zs(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Zt(t))}function ke(t,e,a,n){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Eu(t,e,a,n),e=e.sibling}function Eu(t,e,a,n){var i=e.flags;switch(e.tag){case 0:case 11:case 15:ke(t,e,a,n),i&2048&&qn(9,e);break;case 1:ke(t,e,a,n);break;case 3:ke(t,e,a,n),i&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Zt(t)));break;case 12:if(i&2048){ke(t,e,a,n),t=e.stateNode;try{var l=e.memoizedProps,M=l.id,P=l.onPostCommit;typeof P=="function"&&P(M,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch($){Ht(e,e.return,$)}}else ke(t,e,a,n);break;case 13:ke(t,e,a,n);break;case 23:break;case 22:l=e.stateNode,M=e.alternate,e.memoizedState!==null?l._visibility&2?ke(t,e,a,n):Yn(t,e):l._visibility&2?ke(t,e,a,n):(l._visibility|=2,Ia(t,e,a,n,(e.subtreeFlags&10256)!==0)),i&2048&&Us(M,e);break;case 24:ke(t,e,a,n),i&2048&&zs(e.alternate,e);break;default:ke(t,e,a,n)}}function Ia(t,e,a,n,i){for(i=i&&(e.subtreeFlags&10256)!==0,e=e.child;e!==null;){var l=t,M=e,P=a,$=n,it=M.flags;switch(M.tag){case 0:case 11:case 15:Ia(l,M,P,$,i),qn(8,M);break;case 23:break;case 22:var ot=M.stateNode;M.memoizedState!==null?ot._visibility&2?Ia(l,M,P,$,i):Yn(l,M):(ot._visibility|=2,Ia(l,M,P,$,i)),i&&it&2048&&Us(M.alternate,M);break;case 24:Ia(l,M,P,$,i),i&&it&2048&&zs(M.alternate,M);break;default:Ia(l,M,P,$,i)}e=e.sibling}}function Yn(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var a=t,n=e,i=n.flags;switch(n.tag){case 22:Yn(a,n),i&2048&&Us(n.alternate,n);break;case 24:Yn(a,n),i&2048&&zs(n.alternate,n);break;default:Yn(a,n)}e=e.sibling}}function Va(t){if(t.subtreeFlags&bn)for(t=t.child;t!==null;)Tu(t),t=t.sibling}function Tu(t){switch(t.tag){case 26:Va(t),t.flags&bn&&(t.memoizedState!==null?ed(Ze,t.memoizedState,t.memoizedProps):rc(t.type,t.memoizedProps));break;case 5:Va(t),t.flags&bn&&rc(t.type,t.memoizedProps);break;case 3:case 4:if(Xe){var e=Ze;Ze=nr(t.stateNode.containerInfo),Va(t),Ze=e}else Va(t);break;case 22:t.memoizedState===null&&(e=t.alternate,e!==null&&e.memoizedState!==null?(e=bn,bn=16777216,Va(t),bn=e):Va(t));break;default:Va(t)}}function Nu(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function Fn(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];re=n,Au(n,t)}Nu(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xu(t),t=t.sibling}function xu(t){switch(t.tag){case 0:case 11:case 15:Fn(t),t.flags&2048&&va(9,t,t.return);break;case 3:Fn(t);break;case 12:Fn(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,fl(t)):Fn(t);break;default:Fn(t)}}function fl(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var a=0;a<e.length;a++){var n=e[a];re=n,Au(n,t)}Nu(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:va(8,e,e.return),fl(e);break;case 22:a=e.stateNode,a._visibility&2&&(a._visibility&=-3,fl(e));break;default:fl(e)}t=t.sibling}}function Au(t,e){for(;re!==null;){var a=re;switch(a.tag){case 0:case 11:case 15:va(8,a,e);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var n=a.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:Zt(a.memoizedState.cache)}if(n=a.child,n!==null)n.return=a,re=n;else t:for(a=t;re!==null;){n=re;var i=n.sibling,l=n.return;if(_u(n),n===a){re=null;break t}if(i!==null){i.return=l,re=i;break t}re=l}}}function Bs(t){var e=J0(t);if(e!=null){if(typeof e.memoizedProps["data-testname"]!="string")throw Error(C(364));return e}if(t=rf(t),t===null)throw Error(C(362));return t.stateNode.current}function Hs(t,e){var a=t.tag;switch(e.$$typeof){case Ul:if(t.type===e.value)return!0;break;case zl:t:{for(e=e.value,t=[t,0],a=0;a<t.length;){var n=t[a++],i=n.tag,l=t[a++],M=e[l];if(i!==5&&i!==26&&i!==27||!Xn(n)){for(;M!=null&&Hs(n,M);)l++,M=e[l];if(l===e.length){e=!0;break t}else for(n=n.child;n!==null;)t.push(n,l),n=n.sibling}}e=!1}return e;case Bl:if((a===5||a===26||a===27)&&cf(t.stateNode,e.value))return!0;break;case Vl:if((a===5||a===6||a===26||a===27)&&(t=uf(t),t!==null&&0<=t.indexOf(e.value)))return!0;break;case Hl:if((a===5||a===26||a===27)&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===e.value.toLowerCase()))return!0;break;default:throw Error(C(365))}return!1}function Vs(t){switch(t.$$typeof){case Ul:return"<"+(E(t.value)||"Unknown")+">";case zl:return":has("+(Vs(t)||"")+")";case Bl:return'[role="'+t.value+'"]';case Vl:return'"'+t.value+'"';case Hl:return'[data-testname="'+t.value+'"]';default:throw Error(C(365))}}function Ru(t,e){var a=[];t=[t,0];for(var n=0;n<t.length;){var i=t[n++],l=i.tag,M=t[n++],P=e[M];if(l!==5&&l!==26&&l!==27||!Xn(i)){for(;P!=null&&Hs(i,P);)M++,P=e[M];if(M===e.length)a.push(i);else for(i=i.child;i!==null;)t.push(i,M),i=i.sibling}}return a}function Ls(t,e){if(!jn)throw Error(C(363));t=Bs(t),t=Ru(t,e),e=[],t=Array.from(t);for(var a=0;a<t.length;){var n=t[a++],i=n.tag;if(i===5||i===26||i===27)Xn(n)||e.push(n.stateNode);else for(n=n.child;n!==null;)t.push(n),n=n.sibling}return e}function Oe(){if((Mt&2)!==0&&Ot!==0)return Ot&-Ot;if(pt.T!==null){var t=fn;return t!==0?t:On()}return W0()}function Mu(){Fe===0&&(Fe=(Ot&536870912)===0||zt?_():536870912);var t=Ye.current;return t!==null&&(t.flags|=32),Fe}function De(t,e,a){(t===qt&&(Vt===2||Vt===9)||t.cancelPendingCommit!==null)&&($a(t,0),ba(t,Ot,Fe,!1)),Y(t,a),((Mt&2)===0||t!==qt)&&(t===qt&&((Mt&2)===0&&(Xa|=a),Kt===4&&ba(t,Ot,Fe,!1)),$t(t))}function Ou(t,e,a){if((Mt&6)!==0)throw Error(C(327));var n=!a&&(e&124)===0&&(e&t.expiredLanes)===0||h(t,e),i=n?A0(t,e):Ys(t,e,!0),l=n;do{if(i===0){Cn&&!n&&ba(t,e,0,!1);break}else{if(a=t.current.alternate,l&&!N0(a)){i=Ys(t,e,!1),l=!1;continue}if(i===2){if(l=e,t.errorRecoveryDisabledLanes&l)var M=0;else M=t.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){e=M;t:{var P=t;i=ti;var $=Ve&&P.current.memoizedState.isDehydrated;if($&&($a(P,M).flags|=256),M=Ys(P,M,!1),M!==2){if(_r&&!$){P.errorRecoveryDisabledLanes|=l,Xa|=l,i=4;break t}l=Ee,Ee=i,l!==null&&(Ee===null?Ee=l:Ee.push.apply(Ee,l))}i=M}if(l=!1,i!==2)continue}}if(i===1){$a(t,0),ba(t,e,0,!0);break}t:{switch(n=t,l=i,l){case 0:case 1:throw Error(C(345));case 4:if((e&4194048)!==e)break;case 6:ba(n,e,Fe,!Ra);break t;case 2:Ee=null;break;case 3:case 5:break;default:throw Error(C(329))}if((e&62914560)===e&&(i=Cr+300-Qe(),10<i)){if(ba(n,e,Fe,!Ra),D(n,0,!0)!==0)break t;n.timeoutHandle=Q0(Du.bind(null,n,a,Ee,Ll,br,e,Fe,Xa,En,Ra,l,2,-0,0),i);break t}Du(n,a,Ee,Ll,br,e,Fe,Xa,En,Ra,l,0,-0,0)}}break}while(!0);$t(t)}function Du(t,e,a,n,i,l,M,P,$,it,ot,ct,ft,St){if(t.timeoutHandle=qa,ct=e.subtreeFlags,(ct&8192||(ct&16785408)===16785408)&&(ef(),Tu(e),ct=af(),ct!==null)){t.cancelPendingCommit=ct(Pu.bind(null,t,e,l,a,n,i,M,P,$,ot,1,ft,St)),ba(t,l,M,!it);return}Pu(t,e,l,a,n,i,M,P,$)}function N0(t){for(var e=t;;){var a=e.tag;if((a===0||a===11||a===15)&&e.flags&16384&&(a=e.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var n=0;n<a.length;n++){var i=a[n],l=i.getSnapshot;i=i.value;try{if(!Be(l(),i))return!1}catch{return!1}}if(a=e.child,e.subtreeFlags&16384&&a!==null)a.return=e,e=a;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ba(t,e,a,n){e&=~Sr,e&=~Xa,t.suspendedLanes|=e,t.pingedLanes&=~e,n&&(t.warmLanes|=e),n=t.expirationTimes;for(var i=e;0<i;){var l=31-Ue(i),M=1<<l;n[l]=-1,i&=~M}a!==0&&R(t,a,e)}function Gu(){return(Mt&6)===0?(ie(0),!1):!0}function qs(){if(xt!==null){if(Vt===0)var t=xt.return;else t=xt,ra=Ka=null,ls(t),_n=null,In=0,t=xt;for(;t!==null;)hu(t.alternate,t),t=t.return;xt=null}}function $a(t,e){var a=t.timeoutHandle;a!==qa&&(t.timeoutHandle=qa,Z0(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),qs(),qt=t,xt=a=aa(t.current,null),Ot=e,Vt=0,He=null,Ra=!1,Cn=h(t,e),_r=!1,En=Fe=Sr=Xa=Ma=Kt=0,Ee=ti=null,br=!1,(e&8)!==0&&(e|=e&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=e;0<n;){var i=31-Ue(n),l=1<<i;e|=t[i],n&=~l}return ua=e,ki(),a}function Uu(t,e){Et=null,pt.H=Gl,e===kn||e===Al?(e=$r(),Vt=3):e===dr?(e=$r(),Vt=4):Vt=e===zc?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,He=e,xt===null&&(Kt=1,rl(t,A(e,t.current)))}function zu(){var t=Ye.current;return t===null?!0:(Ot&4194048)===Ot?Ie===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?t===Ie:!1}function Bu(){var t=pt.H;return pt.H=Gl,t===null?Gl:t}function Hu(){var t=pt.A;return pt.A=yd,t}function Ps(){Kt=4,Ra||(Ot&4194048)!==Ot&&Ye.current!==null||(Cn=!0),(Ma&134217727)===0&&(Xa&134217727)===0||qt===null||ba(qt,Ot,Fe,!1)}function Ys(t,e,a){var n=Mt;Mt|=2;var i=Bu(),l=Hu();(qt!==t||Ot!==e)&&(Ll=null,$a(t,e)),e=!1;var M=Kt;t:do try{if(Vt!==0&&xt!==null){var P=xt,$=He;switch(Vt){case 8:qs(),M=6;break t;case 3:case 2:case 9:case 6:Ye.current===null&&(e=!0);var it=Vt;if(Vt=0,He=null,tn(t,P,$,it),a&&Cn){M=0;break t}break;default:it=Vt,Vt=0,He=null,tn(t,P,$,it)}}x0(),M=Kt;break}catch(ot){Uu(t,ot)}while(!0);return e&&t.shellSuspendCounter++,ra=Ka=null,Mt=n,pt.H=i,pt.A=l,xt===null&&(qt=null,Ot=0,ki()),M}function x0(){for(;xt!==null;)Vu(xt)}function A0(t,e){var a=Mt;Mt|=2;var n=Bu(),i=Hu();qt!==t||Ot!==e?(Ll=null,ei=Qe()+500,$a(t,e)):Cn=h(t,e);t:do try{if(Vt!==0&&xt!==null){e=xt;var l=He;e:switch(Vt){case 1:Vt=0,He=null,tn(t,e,l,1);break;case 2:case 9:if(Wr(l)){Vt=0,He=null,Lu(e);break}e=function(){Vt!==2&&Vt!==9||qt!==t||(Vt=7),$t(t)},l.then(e,e);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:Wr(l)?(Vt=0,He=null,Lu(e)):(Vt=0,He=null,tn(t,e,l,7));break;case 5:var M=null;switch(xt.tag){case 26:M=xt.memoizedState;case 5:case 27:var P=xt,$=P.type,it=P.pendingProps;if(M?Cc(M):sc($,it)){Vt=0,He=null;var ot=P.sibling;if(ot!==null)xt=ot;else{var ct=P.return;ct!==null?(xt=ct,dl(ct)):xt=null}break e}}Vt=0,He=null,tn(t,e,l,5);break;case 6:Vt=0,He=null,tn(t,e,l,6);break;case 8:qs(),Kt=6;break t;default:throw Error(C(462))}}R0();break}catch(ft){Uu(t,ft)}while(!0);return ra=Ka=null,pt.H=n,pt.A=i,Mt=a,xt!==null?0:(qt=null,Ot=0,ki(),Kt)}function R0(){for(;xt!==null&&!ld();)Vu(xt)}function Vu(t){var e=su(t.alternate,t,ua);t.memoizedProps=t.pendingProps,e===null?dl(t):xt=e}function Lu(t){var e=t,a=e.alternate;switch(e.tag){case 15:case 0:e=tu(a,e,e.pendingProps,e.type,void 0,Ot);break;case 11:e=tu(a,e,e.pendingProps,e.type.render,e.ref,Ot);break;case 5:ls(e);default:hu(a,e),e=xt=Zu(e,ua),e=su(a,e,ua)}t.memoizedProps=t.pendingProps,e===null?dl(t):xt=e}function tn(t,e,a,n){ra=Ka=null,ls(e),_n=null,In=0;var i=e.return;try{if(_0(t,i,e,a,Ot)){Kt=1,rl(t,A(a,t.current)),xt=null;return}}catch(l){if(i!==null)throw xt=i,l;Kt=1,rl(t,A(a,t.current)),xt=null;return}e.flags&32768?(zt||n===1?t=!0:Cn||(Ot&536870912)!==0?t=!1:(Ra=t=!0,(n===2||n===9||n===3||n===6)&&(n=Ye.current,n!==null&&n.tag===13&&(n.flags|=16384))),qu(e,t)):dl(e)}function dl(t){var e=t;do{if((e.flags&32768)!==0){qu(e,Ra);return}t=e.return;var a=b0(e.alternate,e,ua);if(a!==null){xt=a;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Kt===0&&(Kt=5)}function qu(t,e){do{var a=C0(t.alternate,t);if(a!==null){a.flags&=32767,xt=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!e&&(t=t.sibling,t!==null)){xt=t;return}xt=t=a}while(t!==null);Kt=6,xt=null}function Pu(t,e,a,n,i,l,M,P,$){t.cancelPendingCommit=null;do Kn();while(ge!==0);if((Mt&6)!==0)throw Error(C(327));if(e!==null){if(e===t.current)throw Error(C(177));if(l=e.lanes|e.childLanes,l|=gr,x(t,a,l,M,P,$),t===qt&&(xt=qt=null,Ot=0),Tn=e,Da=t,Nn=a,Er=l,Tr=i,Hc=n,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,G0(sr,function(){return ju(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||n){n=pt.T,pt.T=null,i=ia(),le(2),M=Mt,Mt|=4;try{E0(t,e,a)}finally{Mt=M,le(i),pt.T=n}}ge=1,Yu(),Fu(),Ku()}}function Yu(){if(ge===1){ge=0;var t=Da,e=Tn,a=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||a){a=pt.T,pt.T=null;var n=ia();le(2);var i=Mt;Mt|=4;try{bu(e,t),j0(t.containerInfo)}finally{Mt=i,le(n),pt.T=a}}t.current=e,ge=2}}function Fu(){if(ge===2){ge=0;var t=Da,e=Tn,a=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||a){a=pt.T,pt.T=null;var n=ia();le(2);var i=Mt;Mt|=4;try{vu(t,e.alternate,e)}finally{Mt=i,le(n),pt.T=a}}ge=3}}function Ku(){if(ge===4||ge===3){ge=0,sd();var t=Da,e=Tn,a=Nn,n=Hc;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?ge=5:(ge=0,Tn=Da=null,wu(t,t.pendingLanes));var i=t.pendingLanes;if(i===0&&(Oa=null),F(a),e=e.stateNode,ze&&typeof ze.onCommitFiberRoot=="function")try{ze.onCommitFiberRoot(Qn,e,void 0,(e.current.flags&128)===128)}catch{}if(n!==null){e=pt.T,i=ia(),le(2),pt.T=null;try{for(var l=t.onRecoverableError,M=0;M<n.length;M++){var P=n[M];l(P.value,{componentStack:P.stack})}}finally{pt.T=e,le(i)}}(Nn&3)!==0&&Kn(),$t(t),i=t.pendingLanes,(a&4194090)!==0&&(i&42)!==0?t===Nr?ai++:(ai=0,Nr=t):ai=0,ie(0)}}function wu(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Zt(e)))}function Kn(t){return Yu(),Fu(),Ku(),ju()}function ju(){if(ge!==5)return!1;var t=Da,e=Er;Er=0;var a=F(Nn),n=32>a?32:a;a=pt.T;var i=ia();try{le(n),pt.T=null,n=Tr,Tr=null;var l=Da,M=Nn;if(ge=0,Tn=Da=null,Nn=0,(Mt&6)!==0)throw Error(C(331));var P=Mt;if(Mt|=4,xu(l.current),Eu(l,l.current,M,n),Mt=P,ie(0,!1),ze&&typeof ze.onPostCommitFiberRoot=="function")try{ze.onPostCommitFiberRoot(Qn,l)}catch{}return!0}finally{le(i),pt.T=a,wu(t,e)}}function Xu(t,e,a){e=A(a,e),e=ys(t.stateNode,e,2),t=ma(t,e,2),t!==null&&(Y(t,2),$t(t))}function Ht(t,e,a){if(t.tag===3)Xu(t,t,a);else for(;e!==null;){if(e.tag===3){Xu(e,t,a);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oa===null||!Oa.has(n))){t=A(a,t),a=Qo(2),n=ma(e,a,2),n!==null&&(Zo(a,n,e,t),Y(n,2),$t(n));break}}e=e.return}}function Fs(t,e,a){var n=t.pingCache;if(n===null){n=t.pingCache=new vd;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(a)||(_r=!0,i.add(a),t=M0.bind(null,t,e,a),e.then(t,t))}function M0(t,e,a){var n=t.pingCache;n!==null&&n.delete(e),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,qt===t&&(Ot&a)===a&&(Kt===4||Kt===3&&(Ot&62914560)===Ot&&300>Qe()-Cr?(Mt&2)===0&&$a(t,0):Sr|=a,En===Ot&&(En=0)),$t(t)}function Qu(t,e){e===0&&(e=T()),t=ka(t,e),t!==null&&(Y(t,e),$t(t))}function O0(t){var e=t.memoizedState,a=0;e!==null&&(a=e.retryLane),Qu(t,a)}function D0(t,e){var a=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(a=i.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(C(314))}n!==null&&n.delete(e),Qu(t,a)}function G0(t,e){return Sl(t,e)}function U0(t,e,a,n){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ks(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aa(t,e){var a=t.alternate;return a===null?(a=H(t.tag,e,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=e,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,e=t.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Zu(t,e){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,e=a.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function gl(t,e,a,n,i,l){var M=0;if(n=t,typeof t=="function")Ks(t)&&(M=1);else if(typeof t=="string")M=Xe&&te?pc(t,a,de.current)?26:Nc(t)?27:5:Xe?pc(t,a,de.current)?26:5:te&&Nc(t)?27:5;else t:switch(t){case $s:return t=H(31,a,e,i),t.elementType=$s,t.lanes=l,t;case an:return La(a.children,i,l,e);case tc:M=8,i|=24;break;case Zs:return t=H(12,a,e,i|2),t.elementType=Zs,t.lanes=l,t;case ks:return t=H(13,a,e,i),t.elementType=ks,t.lanes=l,t;case Ws:return t=H(19,a,e,i),t.elementType=Ws,t.lanes=l,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case V0:case Ca:M=10;break t;case ec:M=9;break t;case Js:M=11;break t;case Is:M=14;break t;case Ea:M=16,n=null;break t}M=29,a=Error(C(130,t===null?"null":typeof t,"")),n=null}return e=H(M,a,e,i),e.elementType=t,e.type=n,e.lanes=l,e}function La(t,e,a,n){return t=H(7,t,n,e),t.lanes=a,t}function ws(t,e,a){return t=H(6,t,null,e),t.lanes=a,t}function js(t,e,a){return e=H(4,t.children!==null?t.children:[],t.key,e),e.lanes=a,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z0(t,e,a,n,i,l,M,P){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=qa,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=G(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=G(0),this.hiddenUpdates=G(null),this.identifierPrefix=n,this.onUncaughtError=i,this.onCaughtError=l,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function Ju(t,e,a,n,i,l,M,P,$,it,ot,ct){return t=new z0(t,e,a,M,P,$,it,ct),e=1,l===!0&&(e|=24),l=H(3,null,null,e),t.current=l,l.stateNode=t,e=we(),e.refCount++,t.pooledCache=e,e.refCount++,l.memoizedState={element:n,isDehydrated:a,cache:e},kl(l),t}function ku(t){return t?(t=rn,t):rn}function Wu(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(C(188)):(t=Object.keys(t).join(","),Error(C(268,t)));return t=f(e),t=t!==null?d(t):null,t===null?null:wn(t.stateNode)}function Iu(t,e,a,n,i,l){i=ku(i),n.context===null?n.context=i:n.pendingContext=i,n=ga(e),n.payload={element:a},l=l===void 0?null:l,l!==null&&(n.callback=l),a=ma(t,n,e),a!==null&&(De(a,t,e),Dn(a,t,e))}function $u(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<e?a:e}}function Xs(t,e){$u(t,e),(t=t.alternate)&&$u(t,e)}var Nt={},B0=Sd(),Ge=i0(),Qs=Object.assign,H0=Symbol.for("react.element"),ml=Symbol.for("react.transitional.element"),en=Symbol.for("react.portal"),an=Symbol.for("react.fragment"),tc=Symbol.for("react.strict_mode"),Zs=Symbol.for("react.profiler"),V0=Symbol.for("react.provider"),ec=Symbol.for("react.consumer"),Ca=Symbol.for("react.context"),Js=Symbol.for("react.forward_ref"),ks=Symbol.for("react.suspense"),Ws=Symbol.for("react.suspense_list"),Is=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),$s=Symbol.for("react.activity"),L0=Symbol.for("react.memo_cache_sentinel"),ac=Symbol.iterator,q0=Symbol.for("react.client.reference"),pl=Array.isArray,pt=B0.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P0=r.rendererVersion,Y0=r.rendererPackageName,nc=r.extraDevToolsConfig,wn=r.getPublicInstance,F0=r.getRootHostContext,K0=r.getChildHostContext,w0=r.prepareForCommit,j0=r.resetAfterCommit,X0=r.createInstance;r.cloneMutableInstance;var tr=r.appendInitialChild,ic=r.finalizeInitialChildren,yl=r.shouldSetTextContent,lc=r.createTextInstance;r.cloneMutableTextInstance;var Q0=r.scheduleTimeout,Z0=r.cancelTimeout,qa=r.noTimeout,na=r.isPrimaryRenderer;r.warnsIfNotActing;var ye=r.supportsMutation,Ta=r.supportsPersistence,Ve=r.supportsHydration,J0=r.getInstanceFromNode;r.beforeActiveInstanceBlur;var k0=r.preparePortalMount;r.prepareScopeUpdate,r.getInstanceFromScope;var le=r.setCurrentUpdatePriority,ia=r.getCurrentUpdatePriority,W0=r.resolveUpdatePriority;r.trackSchedulerEvent,r.resolveEventType,r.resolveEventTimeStamp;var I0=r.shouldAttemptEagerTransition,$0=r.detachDeletedInstance;r.requestPostPaintCallback;var tf=r.maySuspendCommit,sc=r.preloadInstance,ef=r.startSuspendingCommit,rc=r.suspendInstance;r.suspendOnActiveViewTransition;var af=r.waitForCommitToBeReady,nn=r.NotPendingTransition,Pa=r.HostTransitionContext,nf=r.resetFormInstance;r.bindToConsole;var lf=r.supportsMicrotasks,sf=r.scheduleMicrotask,jn=r.supportsTestSelectors,rf=r.findFiberRoot,of=r.getBoundingRect,uf=r.getTextContent,Xn=r.isHiddenSubtree,cf=r.matchAccessibilityRole,hf=r.setFocusIfFocusable,ff=r.setupIntersectionObserver,df=r.appendChild,gf=r.appendChildToContainer,mf=r.commitTextUpdate,pf=r.commitMount,yf=r.commitUpdate,vf=r.insertBefore,_f=r.insertInContainerBefore,Sf=r.removeChild,bf=r.removeChildFromContainer,oc=r.resetTextContent,Cf=r.hideInstance,Ef=r.hideTextInstance,Tf=r.unhideInstance,Nf=r.unhideTextInstance;r.cancelViewTransitionName,r.cancelRootViewTransitionName,r.restoreRootViewTransitionName,r.cloneRootViewTransitionContainer,r.removeRootViewTransitionClone,r.measureClonedInstance,r.hasInstanceChanged,r.hasInstanceAffectedParent,r.startViewTransition,r.startGestureTransition,r.stopGestureTransition,r.getCurrentGestureOffset,r.subscribeToGestureDirection,r.createViewTransitionInstance;var xf=r.clearContainer;r.createFragmentInstance,r.updateFragmentInstanceFiber,r.commitNewChildToFragmentInstance,r.deleteChildFromFragmentInstance;var Af=r.cloneInstance,uc=r.createContainerChildSet,cc=r.appendChildToContainerChildSet,Rf=r.finalizeContainerChildren,hc=r.replaceContainerChildren,fc=r.cloneHiddenInstance,dc=r.cloneHiddenTextInstance,er=r.isSuspenseInstancePending,ar=r.isSuspenseInstanceFallback,Mf=r.getSuspenseInstanceFallbackErrorDetails,Of=r.registerSuspenseInstanceRetry,Df=r.canHydrateFormStateMarker,Gf=r.isFormStateMarkerMatching,gc=r.getNextHydratableSibling,Uf=r.getNextHydratableSiblingAfterSingleton,zf=r.getFirstHydratableChild,Bf=r.getFirstHydratableChildWithinContainer,Hf=r.getFirstHydratableChildWithinSuspenseInstance,Vf=r.getFirstHydratableChildWithinSingleton,Lf=r.canHydrateInstance,qf=r.canHydrateTextInstance,Pf=r.canHydrateSuspenseInstance,Yf=r.hydrateInstance,Ff=r.hydrateTextInstance,Kf=r.hydrateSuspenseInstance,wf=r.getNextHydratableInstanceAfterSuspenseInstance,jf=r.commitHydratedContainer,Xf=r.commitHydratedSuspenseInstance,Qf=r.clearSuspenseBoundary,Zf=r.clearSuspenseBoundaryFromContainer,mc=r.shouldDeleteUnhydratedTailInstances;r.diffHydratedPropsForDevWarnings,r.diffHydratedTextForDevWarnings,r.describeHydratableInstanceForDevWarnings;var Jf=r.validateHydratableInstance,kf=r.validateHydratableTextInstance,Xe=r.supportsResources,pc=r.isHostHoistableType,nr=r.getHoistableRoot,yc=r.getResource,vc=r.acquireResource,_c=r.releaseResource,Wf=r.hydrateHoistable,Sc=r.mountHoistable,bc=r.unmountHoistable,If=r.createHoistableInstance,$f=r.prepareToCommitHoistables,td=r.mayResourceSuspendCommit,Cc=r.preloadResource,ed=r.suspendResource,te=r.supportsSingletons,Ec=r.resolveSingletonInstance,ad=r.acquireSingletonInstance,Tc=r.releaseSingletonInstance,Nc=r.isHostSingletonType,ln=r.isSingletonScope,ir=[],sn=-1,rn={},Ue=Math.clz32?Math.clz32:b,nd=Math.log,id=Math.LN2,vl=256,_l=4194304,Sl=Ge.unstable_scheduleCallback,lr=Ge.unstable_cancelCallback,ld=Ge.unstable_shouldYield,sd=Ge.unstable_requestPaint,Qe=Ge.unstable_now,xc=Ge.unstable_ImmediatePriority,rd=Ge.unstable_UserBlockingPriority,sr=Ge.unstable_NormalPriority,od=Ge.unstable_IdlePriority,ud=Ge.log,cd=Ge.unstable_setDisableYieldValue,Qn=null,ze=null,rr,Ac,or=!1,Rc=new WeakMap,on=[],un=0,bl=null,Cl=0,Le=[],qe=0,Ya=null,la=1,sa="",de=g(null),Zn=g(null),Na=g(null),El=g(null),_e=null,ee=null,zt=!1,Fa=null,We=!1,ur=Error(C(519)),Be=typeof Object.is=="function"?Object.is:mt,Tl=g(null),Ka=null,ra=null,hd=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(a,n){t.push(n)}};this.abort=function(){e.aborted=!0,t.forEach(function(a){return a()})}},fd=Ge.unstable_scheduleCallback,dd=Ge.unstable_NormalPriority,Ft={$$typeof:Ca,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Nl=null,cn=null,cr=!1,xl=!1,hr=!1,hn=0,Jn=null,fr=0,fn=0,dn=null,Mc=pt.S;pt.S=function(t,e){typeof e=="object"&&e!==null&&typeof e.then=="function"&&Ql(t,e),Mc!==null&&Mc(t,e)};var wa=g(null),gd=Object.prototype.hasOwnProperty,kn=Error(C(460)),dr=Error(C(474)),Al=Error(C(542)),Rl={then:function(){}},gn=null,Pe=[],mn=0,gr=0,xa=!1,mr=!1,pn=g(null),Ml=g(0),Aa=0,Et=null,Lt=null,kt=null,Ol=!1,yn=!1,ja=!1,Dl=0,Wn=0,vn=null,md=0,Gl={readContext:_t,use:$i,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt},Oc={readContext:_t,use:$i,useCallback:function(t,e){return Se().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:No,useImperativeHandle:function(t,e,a){a=a!=null?a.concat([t]):null,al(4194308,4,Mo.bind(null,e,t),a)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){al(4,2,t,e)},useMemo:function(t,e){var a=Se();e=e===void 0?null:e;var n=t();if(ja){j(!0);try{t()}finally{j(!1)}}return a.memoizedState=[n,e],n},useReducer:function(t,e,a){var n=Se();if(a!==void 0){var i=a(e);if(ja){j(!0);try{a(e)}finally{j(!1)}}}else i=e;return n.memoizedState=n.baseState=i,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},n.queue=t,t=t.dispatch=v0.bind(null,Et,t),[n.memoizedState,t]},useRef:function(t){var e=Se();return t={current:t},e.memoizedState=t},useState:function(t){t=cs(t);var e=t.queue,a=Lo.bind(null,Et,e);return e.dispatch=a,[t.memoizedState,a]},useDebugValue:fs,useDeferredValue:function(t,e){var a=Se();return ds(a,t,e)},useTransition:function(){var t=cs(!1);return t=zo.bind(null,Et,t.queue,!0,!1),Se().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,a){var n=Et,i=Se();if(zt){if(a===void 0)throw Error(C(407));a=a()}else{if(a=e(),qt===null)throw Error(C(349));(Ot&124)!==0||oo(n,e,a)}i.memoizedState=a;var l={value:a,getSnapshot:e};return i.queue=l,No(co.bind(null,n,l,t),[t]),n.flags|=2048,Wa(9,el(),uo.bind(null,n,l,a,e),null),a},useId:function(){var t=Se(),e=qt.identifierPrefix;if(zt){var a=sa,n=la;a=(n&~(1<<32-Ue(n)-1)).toString(32)+a,e=""+e+"R"+a,a=Dl++,0<a&&(e+="H"+a.toString(32)),e+=""}else a=md++,e=""+e+"r"+a.toString(32)+"";return t.memoizedState=e},useHostTransitionStatus:gs,useFormState:So,useActionState:So,useOptimistic:function(t){var e=Se();e.memoizedState=e.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=a,e=ms.bind(null,Et,!0,a),a.dispatch=e,[t,e]},useMemoCache:rs,useCacheRefresh:function(){return Se().memoizedState=y0.bind(null,Et)}},Dc={readContext:_t,use:$i,useCallback:Do,useContext:_t,useEffect:xo,useImperativeHandle:Oo,useInsertionEffect:Ao,useLayoutEffect:Ro,useMemo:Go,useReducer:tl,useRef:To,useState:function(){return tl($e)},useDebugValue:fs,useDeferredValue:function(t,e){var a=Jt();return Uo(a,Lt.memoizedState,t,e)},useTransition:function(){var t=tl($e)[0],e=Jt().memoizedState;return[typeof t=="boolean"?t:zn(t),e]},useSyncExternalStore:ro,useId:Ho,useHostTransitionStatus:gs,useFormState:bo,useActionState:bo,useOptimistic:function(t,e){var a=Jt();return go(a,Lt,t,e)},useMemoCache:rs,useCacheRefresh:Vo},pd={readContext:_t,use:$i,useCallback:Do,useContext:_t,useEffect:xo,useImperativeHandle:Oo,useInsertionEffect:Ao,useLayoutEffect:Ro,useMemo:Go,useReducer:us,useRef:To,useState:function(){return us($e)},useDebugValue:fs,useDeferredValue:function(t,e){var a=Jt();return Lt===null?ds(a,t,e):Uo(a,Lt.memoizedState,t,e)},useTransition:function(){var t=us($e)[0],e=Jt().memoizedState;return[typeof t=="boolean"?t:zn(t),e]},useSyncExternalStore:ro,useId:Ho,useHostTransitionStatus:gs,useFormState:Eo,useActionState:Eo,useOptimistic:function(t,e){var a=Jt();return Lt!==null?go(a,Lt,t,e):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rs,useCacheRefresh:Vo},_n=null,In=0,Sn=Fo(!0),Gc=Fo(!1),Ye=g(null),Ie=null,ae=g(0),pr={enqueueSetState:function(t,e,a){t=t._reactInternals;var n=Oe(),i=ga(n);i.payload=e,a!=null&&(i.callback=a),e=ma(t,i,n),e!==null&&(De(e,t,n),Dn(e,t,n))},enqueueReplaceState:function(t,e,a){t=t._reactInternals;var n=Oe(),i=ga(n);i.tag=1,i.payload=e,a!=null&&(i.callback=a),e=ma(t,i,n),e!==null&&(De(e,t,n),Dn(e,t,n))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var a=Oe(),n=ga(a);n.tag=2,e!=null&&(n.callback=e),e=ma(t,n,a),e!==null&&(De(e,t,a),Dn(e,t,a))}},Uc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},zc=Error(C(461)),se=!1,yr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},oa=!1,Xt=!1,vr=!1,Bc=typeof WeakSet=="function"?WeakSet:Set,re=null,Wt=null,Ce=!1,Ze=null,bn=8192,yd={getCacheForType:function(t){var e=_t(Ft),a=e.data.get(t);return a===void 0&&(a=t(),e.data.set(t,a)),a}},Ul=0,zl=1,Bl=2,Hl=3,Vl=4;if(typeof Symbol=="function"&&Symbol.for){var $n=Symbol.for;Ul=$n("selector.component"),zl=$n("selector.has_pseudo_class"),Bl=$n("selector.role"),Hl=$n("selector.test_id"),Vl=$n("selector.text")}var vd=typeof WeakMap=="function"?WeakMap:Map,Mt=0,qt=null,xt=null,Ot=0,Vt=0,He=null,Ra=!1,Cn=!1,_r=!1,ua=0,Kt=0,Ma=0,Xa=0,Sr=0,Fe=0,En=0,ti=null,Ee=null,br=!1,Cr=0,ei=1/0,Ll=null,Oa=null,ge=0,Da=null,Tn=null,Nn=0,Er=0,Tr=null,Hc=null,ai=0,Nr=null;return Nt.attemptContinuousHydration=function(t){if(t.tag===13){var e=ka(t,67108864);e!==null&&De(e,t,67108864),Xs(t,67108864)}},Nt.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var e=Oe();e=L(e);var a=ka(t,e);a!==null&&De(a,t,e),Xs(t,e)}},Nt.attemptSynchronousHydration=function(t){switch(t.tag){case 3:if(t=t.stateNode,t.current.memoizedState.isDehydrated){var e=N(t.pendingLanes);if(e!==0){for(t.pendingLanes|=2,t.entangledLanes|=2;e;){var a=1<<31-Ue(e);t.entanglements[1]|=a,e&=~a}$t(t),(Mt&6)===0&&(ei=Qe()+500,ie(0))}}break;case 13:e=ka(t,2),e!==null&&De(e,t,2),Gu(),Xs(t,2)}},Nt.batchedUpdates=function(t,e){return t(e)},Nt.createComponentSelector=function(t){return{$$typeof:Ul,value:t}},Nt.createContainer=function(t,e,a,n,i,l,M,P,$,it){return Ju(t,e,!1,null,a,n,l,M,P,$,it,null)},Nt.createHasPseudoClassSelector=function(t){return{$$typeof:zl,value:t}},Nt.createHydrationContainer=function(t,e,a,n,i,l,M,P,$,it,ot,ct,ft){return t=Ju(a,n,!0,t,i,l,P,$,it,ot,ct,ft),t.context=ku(null),a=t.current,n=Oe(),n=L(n),i=ga(n),i.callback=e??null,ma(a,i,n),e=n,t.current.lanes=e,Y(t,e),$t(t),t},Nt.createPortal=function(t,e,a){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:en,key:n==null?null:""+n,children:t,containerInfo:e,implementation:a}},Nt.createRoleSelector=function(t){return{$$typeof:Bl,value:t}},Nt.createTestNameSelector=function(t){return{$$typeof:Hl,value:t}},Nt.createTextSelector=function(t){return{$$typeof:Vl,value:t}},Nt.defaultOnCaughtError=function(t){console.error(t)},Nt.defaultOnRecoverableError=function(t){Uc(t)},Nt.defaultOnUncaughtError=function(t){Uc(t)},Nt.deferredUpdates=function(t){var e=pt.T,a=ia();try{return le(32),pt.T=null,t()}finally{le(a),pt.T=e}},Nt.discreteUpdates=function(t,e,a,n,i){var l=pt.T,M=ia();try{return le(2),pt.T=null,t(e,a,n,i)}finally{le(M),pt.T=l,Mt===0&&(ei=Qe()+500)}},Nt.findAllNodes=Ls,Nt.findBoundingRects=function(t,e){if(!jn)throw Error(C(363));e=Ls(t,e),t=[];for(var a=0;a<e.length;a++)t.push(of(e[a]));for(e=t.length-1;0<e;e--){a=t[e];for(var n=a.x,i=n+a.width,l=a.y,M=l+a.height,P=e-1;0<=P;P--)if(e!==P){var $=t[P],it=$.x,ot=it+$.width,ct=$.y,ft=ct+$.height;if(n>=it&&l>=ct&&i<=ot&&M<=ft){t.splice(e,1);break}else if(n!==it||a.width!==$.width||ft<l||ct>M){if(!(l!==ct||a.height!==$.height||ot<n||it>i)){it>n&&($.width+=it-n,$.x=n),ot<i&&($.width=i-it),t.splice(e,1);break}}else{ct>l&&($.height+=ct-l,$.y=l),ft<M&&($.height=M-ct),t.splice(e,1);break}}}return t},Nt.findHostInstance=Wu,Nt.findHostInstanceWithNoPortals=function(t){return t=f(t),t=t!==null?p(t):null,t===null?null:wn(t.stateNode)},Nt.findHostInstanceWithWarning=function(t){return Wu(t)},Nt.flushPassiveEffects=Kn,Nt.flushSyncFromReconciler=function(t){var e=Mt;Mt|=1;var a=pt.T,n=ia();try{if(le(2),pt.T=null,t)return t()}finally{le(n),pt.T=a,Mt=e,(Mt&6)===0&&ie(0)}},Nt.flushSyncWork=Gu,Nt.focusWithin=function(t,e){if(!jn)throw Error(C(363));for(t=Bs(t),e=Ru(t,e),e=Array.from(e),t=0;t<e.length;){var a=e[t++],n=a.tag;if(!Xn(a)){if((n===5||n===26||n===27)&&hf(a.stateNode))return!0;for(a=a.child;a!==null;)e.push(a),a=a.sibling}}return!1},Nt.getFindAllNodesFailureDescription=function(t,e){if(!jn)throw Error(C(363));var a=0,n=[];t=[Bs(t),0];for(var i=0;i<t.length;){var l=t[i++],M=l.tag,P=t[i++],$=e[P];if((M!==5&&M!==26&&M!==27||!Xn(l))&&(Hs(l,$)&&(n.push(Vs($)),P++,P>a&&(a=P)),P<e.length))for(l=l.child;l!==null;)t.push(l,P),l=l.sibling}if(a<e.length){for(t=[];a<e.length;a++)t.push(Vs(e[a]));return`findAllNodes was able to match part of the selector:
  `+(n.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},Nt.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 27:case 5:return wn(t.child.stateNode);default:return t.child.stateNode}},Nt.injectIntoDevTools=function(){var t={bundleType:0,version:P0,rendererPackageName:Y0,currentDispatcherRef:pt,reconcilerVersion:"19.1.0"};if(nc!==null&&(t.rendererConfig=nc),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")t=!1;else{var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)t=!0;else{try{Qn=e.inject(t),ze=e}catch{}t=!!e.checkDCE}}return t},Nt.isAlreadyRendering=function(){return(Mt&6)!==0},Nt.observeVisibleRects=function(t,e,a,n){if(!jn)throw Error(C(363));t=Ls(t,e);var i=ff(t,a,n).disconnect;return{disconnect:function(){i()}}},Nt.shouldError=function(){return null},Nt.shouldSuspend=function(){return!1},Nt.startHostTransition=function(t,e,a,n){if(t.tag!==5)throw Error(C(476));var i=Bo(t).queue;zo(t,i,e,nn,a===null?U:function(){var l=Bo(t).next.queue;return Hn(t,l,{},Oe()),a(n)})},Nt.updateContainer=function(t,e,a,n){var i=e.current,l=Oe();return Iu(i,l,t,e,a,n),l},Nt.updateContainerSync=function(t,e,a,n){return Iu(e.current,2,t,e,a,n),2},Nt},o.exports.default=o.exports,Object.defineProperty(o.exports,"__esModule",{value:!0})}(Hr)),Hr.exports}var jh;function c1(){return jh||(jh=1,Br.exports=u1()),Br.exports}var h1=c1();const f1=Wh(h1);var qr={exports:{}},fa={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function d1(){return Xh||(Xh=1,fa.ConcurrentRoot=1,fa.ContinuousEventPriority=8,fa.DefaultEventPriority=32,fa.DiscreteEventPriority=2,fa.IdleEventPriority=268435456,fa.LegacyRoot=0,fa.NoEventPriority=0),fa}var Qh;function g1(){return Qh||(Qh=1,qr.exports=d1()),qr.exports}var jl=g1(),m1=Tt();const Zh={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Jh=!1,kh=!1;const Fl=".react-konva-event",p1=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,y1=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,v1={};function Xl(o,r,H=v1){if(!Jh&&"zIndex"in r&&(console.warn(y1),Jh=!0),!kh&&r.draggable){var U=r.x!==void 0||r.y!==void 0,C=r.onDragEnd||r.onDragMove;U&&!C&&(console.warn(p1),kh=!0)}for(var S in H)if(!Zh[S]){var m=S.slice(0,2)==="on",f=H[S]!==r[S];if(m&&f){var d=S.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),o.off(d,H[S])}var p=!r.hasOwnProperty(S);p&&o.setAttr(S,void 0)}var v=r._useStrictMode,E={},g=!1;const c={};for(var S in r)if(!Zh[S]){var m=S.slice(0,2)==="on",u=H[S]!==r[S];if(m&&u){var d=S.substr(2).toLowerCase();d.substr(0,7)==="content"&&(d="content"+d.substr(7,1).toUpperCase()+d.substr(8)),r[S]&&(c[d]=r[S])}!m&&(r[S]!==H[S]||v&&r[S]!==o.getAttr(S))&&(g=!0,E[S]=r[S])}g&&(o.setAttrs(E),za(o));for(var d in c)o.off(d+Fl),o.on(d+Fl,c[d])}function za(o){if(!m1.Konva.autoDrawEnabled){var r=o.getLayer()||o.getStage();r&&r.batchDraw()}}var Pr=i0();const l0={},_1={};Yl.Node.prototype._applyProps=Xl;let s0=jl.DefaultEventPriority;function S1(o,r){if(typeof r=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${r}`);return}o.add(r),za(o)}function b1(o,r,H){let U=Yl[o];U||(console.error(`Konva has no node with the type ${o}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${o}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),U=Yl.Group);const C={},S={};for(var m in r)if(m!=="ref"){var f=m.slice(0,2)==="on";f?S[m]=r[m]:C[m]=r[m]}const d=new U(C);return Xl(d,S),d}function C1(o,r,H){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${o}"`)}function E1(o,r,H){return!1}function T1(o){return o}function N1(){return null}function x1(){return null}function A1(o,r,H,U){return _1}function R1(){}function M1(o){}function O1(o,r){return!1}function D1(){return l0}function G1(){return l0}const U1=setTimeout,z1=clearTimeout,B1=!0,H1=o=>{o()},V1=-1;function L1(o,r){return!1}const q1=!1,P1=!1,Y1=!0,F1=!1,K1=!1;function w1(o,r){r.parent===o?r.moveToTop():o.add(r),za(o)}function j1(o,r){r.parent===o?r.moveToTop():o.add(r),za(o)}function r0(o,r,H){r._remove(),o.add(r),r.setZIndex(H.getZIndex()),za(o)}function X1(o,r,H){r0(o,r,H)}function Q1(o,r){r.destroy(),r.off(Fl),za(o)}function Z1(o,r){r.destroy(),r.off(Fl),za(o)}function J1(o,r,H){console.error(`Text components are not yet supported in ReactKonva. You text is: "${H}"`)}function k1(o,r,H){}function W1(o,r,H,U){Xl(o,U,H)}function I1(o){o.hide(),za(o)}function $1(o){}function t2(o,r){(r.visible==null||r.visible)&&o.show()}function e2(o,r){}function a2(o){}function n2(){}function i2(){return jl.DefaultEventPriority}function l2(){}function s2(){return null}function r2(o){s0=o}function o2(){return s0}function u2(){return jl.DiscreteEventPriority}function c2(){return!1}function h2(){}function f2(){return!1}function d2(){return!0}function g2(){}function m2(){}function p2(){return null}const y2=null;function v2(){}const _2=Object.freeze(Object.defineProperty({__proto__:null,NotPendingTransition:y2,appendChild:w1,appendChildToContainer:j1,appendInitialChild:S1,cancelTimeout:z1,clearContainer:a2,commitMount:k1,commitTextUpdate:J1,commitUpdate:W1,createInstance:b1,createTextInstance:C1,detachDeletedInstance:n2,finalizeInitialChildren:E1,getChildHostContext:G1,getCurrentEventPriority:i2,getCurrentUpdatePriority:o2,getInstanceFromScope:s2,getPublicInstance:T1,getRootHostContext:D1,hideInstance:I1,hideTextInstance:$1,idlePriority:Pr.unstable_IdlePriority,insertBefore:r0,insertInContainerBefore:X1,isPrimaryRenderer:q1,maySuspendCommit:f2,noTimeout:V1,now:Pr.unstable_now,preloadInstance:d2,prepareForCommit:N1,preparePortalMount:x1,prepareScopeUpdate:l2,prepareUpdate:A1,removeChild:Q1,removeChildFromContainer:Z1,requestPostPaintCallback:h2,resetAfterCommit:R1,resetFormInstance:v2,resetTextContent:M1,resolveUpdatePriority:u2,run:Pr.unstable_runWithPriority,scheduleMicrotask:H1,scheduleTimeout:U1,setCurrentUpdatePriority:r2,shouldAttemptEagerTransition:c2,shouldDeprioritizeSubtree:O1,shouldSetTextContent:L1,startSuspendingCommit:g2,supportsHydration:K1,supportsMicrotasks:B1,supportsMutation:Y1,supportsPersistence:F1,suspendInstance:m2,unhideInstance:t2,unhideTextInstance:e2,waitForCommitToBeReady:p2,warnsIfNotActing:P1},Symbol.toStringTag,{value:"Module"}));function o0(o,r,H){if(!o)return;if(H(o)===!0)return o;let U=o.child;for(;U;){const C=o0(U,r,H);if(C)return C;U=U.sibling}}function u0(o){try{return Object.defineProperties(o,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return o}}const Zr=u0(bt.createContext(null));class c0 extends bt.Component{render(){return bt.createElement(Zr.Provider,{value:this._reactInternals},this.props.children)}}function S2(){const o=bt.useContext(Zr);if(o===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const r=bt.useId();return bt.useMemo(()=>{for(const H of[o,o?.alternate]){if(!H)continue;const U=o0(H,!1,C=>{let S=C.memoizedState;for(;S;){if(S.memoizedState===r)return!0;S=S.next}});if(U)return U}},[o,r])}const b2=Symbol.for("react.context"),C2=o=>o!==null&&typeof o=="object"&&"$$typeof"in o&&o.$$typeof===b2;function E2(){const o=S2(),[r]=bt.useState(()=>new Map);r.clear();let H=o;for(;H;){const U=H.type;C2(U)&&U!==Zr&&!r.has(U)&&r.set(U,bt.use(u0(U))),H=H.return}return r}function T2(){const o=E2();return bt.useMemo(()=>Array.from(o.keys()).reduce((r,H)=>U=>bt.createElement(r,null,bt.createElement(H.Provider,{...U,value:o.get(H)})),r=>bt.createElement(c0,{...r})),[o])}if(ne.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function N2(o){const r=ne.useRef({});return ne.useLayoutEffect(()=>{r.current=o}),ne.useLayoutEffect(()=>()=>{r.current={}},[]),r.current}const x2=()=>{const o=ne.useRef(0);return ne.useMemo(()=>{o.current++},[]),o.current>1},A2=o=>{const r=ne.useRef(null),H=ne.useRef(null),U=ne.useRef(null),C=N2(o),S=T2(),m=ne.useRef(!1),f=p=>{const{forwardedRef:v}=o;v&&(typeof v=="function"?v(p):v.current=p)},d=x2();return ne.useLayoutEffect(()=>m.current&&d?()=>{m.current=!1,f(null),Rn.updateContainer(null,U.current,null),H.current.destroy()}:(m.current=!0,H.current=new Yl.Stage({width:o.width,height:o.height,container:r.current}),f(H.current),U.current=Rn.createContainer(H.current,jl.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),Rn.updateContainer(ne.createElement(S,{},o.children),U.current,null,()=>{}),()=>{d||(f(null),Rn.updateContainer(null,U.current,null),H.current.destroy())}),[]),ne.useLayoutEffect(()=>{f(H.current),Xl(H.current,o,C),Rn.updateContainer(ne.createElement(S,{},o.children),U.current,null)}),ne.createElement("div",{ref:r,id:o.id,accessKey:o.accessKey,className:o.className,role:o.role,style:o.style,tabIndex:o.tabIndex,title:o.title})},Yr="Layer",h0="Group",f0="Rect",R2="Circle",M2="Line",O2="Image",D2="Text",G2="Arrow",Rn=f1(_2);Rn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:ne.version,rendererPackageName:"react-konva"});const U2=ne.forwardRef((o,r)=>ne.createElement(c0,{},ne.createElement(A2,{...o,forwardedRef:r})));function z2(){const o=bt.useRef(null),[r,H]=bt.useState({w:0,h:0});return bt.useEffect(()=>{const U=new ResizeObserver(()=>{const C=o.current;C&&H({w:C.clientWidth,h:C.clientHeight})});return o.current&&U.observe(o.current),()=>U.disconnect()},[]),[o,r]}const B2={backgroundColor:"#000",backgroundImage:"radial-gradient(rgba(255,255,255,0.10) 1px, transparent 1px)",backgroundSize:"20px 20px",backgroundPosition:"-10px -10px"},ji=()=>Math.random().toString(36).slice(2,9);function Xi(o){const r=o.getPointerPosition(),H=o.scaleX();return{x:(r.x-o.x())/H,y:(r.y-o.y())/H}}function H2(o){return JSON.parse(JSON.stringify(o))}function $2({goHome:o}){const[r,H]=z2(),U=bt.useRef(null),[C,S]=bt.useState({x:0,y:0}),[m,f]=bt.useState(1),d=bt.useRef(!1),[p,v]=bt.useState("select"),[E,g]=bt.useState("#ffffff"),[c,u]=bt.useState(4),[b,N]=bt.useState(!1),[D,h]=bt.useState([]),[s,_]=bt.useState([]),[T,G]=bt.useState([]),[Y,x]=bt.useState([]),[R,O]=bt.useState(null),L=bt.useRef(null),[F,j]=bt.useState(null),J=bt.useRef({strokes:D,notes:s,images:T,links:Y,stagePos:C,stageScale:m});bt.useEffect(()=>{J.current={strokes:D,notes:s,images:T,links:Y,stagePos:C,stageScale:m}},[D,s,T,Y,C,m]);const K=bt.useRef({stack:[],idx:-1}),Z=bt.useCallback(()=>{const X=H2(J.current),I=K.current;I.stack=I.stack.slice(0,I.idx+1).concat(X).slice(-100),I.idx=I.stack.length-1},[]),y=()=>{const X=K.current;if(X.idx<=0)return;X.idx-=1;const I=X.stack[X.idx];h(I.strokes),_(I.notes),G(I.images),x(I.links),S(I.stagePos),f(I.stageScale)},A=()=>{const X=K.current;if(X.idx>=X.stack.length-1)return;X.idx+=1;const I=X.stack[X.idx];h(I.strokes),_(I.notes),G(I.images),x(I.links),S(I.stagePos),f(I.stageScale)};bt.useEffect(()=>{Z()},[Z]);const B=X=>{X.evt.preventDefault();const I=U.current,lt=I.scaleX(),ut=Xi(I),ht=X.evt.deltaY>0?-1:1,mt=1.08,dt=ht>0?lt*mt:lt/mt;f(dt);const vt={x:X.evt.offsetX-ut.x*dt,y:X.evt.offsetY-ut.y*dt};S(vt)},z=X=>{const I=U.current,lt=X.target;if(lt===I){d.current=!0,I.container().style.cursor="grabbing";return}if(p==="draw"){const ut=ji(),ht=Xi(I),mt={id:ut,points:[ht.x,ht.y],color:E,size:c,erase:b};h(dt=>[...dt,mt]),j(ut)}else if(p==="text"){if(lt===I){const ut=Xi(I),ht=`n_${ji()}`;_(mt=>[...mt,{id:ht,x:ut.x,y:ut.y,w:240,h:120,text:"Note"}]),O(ht),Z()}}else if(p==="select"){const ut=lt?.attrs?.name||"";X.evt.shiftKey&&ut.startsWith("note:")?L.current=ut.split(":")[1]:O(ut?ut.split(":")[1]:null)}},q=X=>{const I=U.current;if(d.current){S(lt=>({x:lt.x+X.evt.movementX,y:lt.y+X.evt.movementY}));return}if(p==="draw"&&F){const lt=Xi(I);h(ut=>ut.map(ht=>ht.id===F?{...ht,points:[...ht.points,lt.x,lt.y]}:ht))}},at=X=>{const I=U.current;if(d.current){d.current=!1,I.container().style.cursor="default",Z();return}if(p==="draw"&&F){j(null),Z();return}const lt=L.current;if(lt){const ht=X.target?.attrs?.name||"";if(ht.startsWith("note:")){const dt=ht.split(":")[1];dt&&dt!==lt&&(x(vt=>[...vt,{id:ji(),from:lt,to:dt}]),Z())}L.current=null}},w=bt.useRef(null),[nt,rt]=bt.useState(null);bt.useEffect(()=>{if(!nt)return;const X=s.find(vt=>vt.id===nt);if(!X)return;const I=document.createElement("textarea");w.current=I;const lt=U.current,ut=lt.scaleX();I.value=X.text,I.style.position="absolute",I.style.left=`${lt.x()+X.x*ut+16}px`,I.style.top=`${lt.y()+X.y*ut+14}px`,I.style.width=`${(X.w-24)*ut}px`,I.style.height=`${(X.h-24)*ut}px`,I.style.background="rgba(0,0,0,0.9)",I.style.color="#e4e4e7",I.style.border="1px solid #3f3f46",I.style.outline="none",I.style.resize="none",I.style.padding=`${8*ut}px`,I.style.font=`${14*ut}px ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace`,I.style.zIndex=50,document.body.appendChild(I),I.focus();const ht=()=>{const vt=I.value;_(Ct=>Ct.map(Dt=>Dt.id===X.id?{...Dt,text:vt}:Dt)),document.body.removeChild(I),w.current=null,rt(null),Z()},mt=()=>ht(),dt=vt=>{(vt.metaKey||vt.ctrlKey)&&vt.key==="Enter"&&(vt.preventDefault(),ht())};return I.addEventListener("blur",mt),I.addEventListener("keydown",dt),()=>{try{I.removeEventListener("blur",mt),I.removeEventListener("keydown",dt),document.body.contains(I)&&document.body.removeChild(I)}catch{}}},[nt,C,m]),bt.useEffect(()=>{const X=r.current;if(!X)return;const I=ut=>{ut.preventDefault(),ut.stopPropagation()},lt=ut=>{ut.preventDefault();const ht=U.current,mt=Xi(ht),dt=Array.from(ut.dataTransfer.files||[]);let vt=!1;for(const Ct of dt)if(Ct.type.startsWith("image/")){const Dt=URL.createObjectURL(Ct),me=`img_${ji()}`;G(It=>[...It,{id:me,x:mt.x,y:mt.y,w:320,h:240,src:Dt}]),vt=!0}if(!vt){const Ct=ut.dataTransfer.getData("text/uri-list")||ut.dataTransfer.getData("text/plain");if(Ct&&/^https?:\/\/.+\.(png|jpg|jpeg|gif|webp|svg)/i.test(Ct)){const Dt=`img_${ji()}`;G(me=>[...me,{id:Dt,x:mt.x,y:mt.y,w:320,h:240,src:Ct}])}}Z()};return["dragenter","dragover"].forEach(ut=>X.addEventListener(ut,I)),X.addEventListener("drop",lt),()=>{["dragenter","dragover"].forEach(ut=>X.removeEventListener(ut,I)),X.removeEventListener("drop",lt)}},[r,Z]);const tt=()=>{window.confirm("Clear the canvas (strokes, notes, images, connectors)?")&&(h([]),_([]),G([]),x([]),Z())},V=X=>{const I=s.find(lt=>lt.id===X);return I?{x:I.x+I.w/2,y:I.y+I.h/2}:{x:0,y:0}},k=["#ffffff","#a1a1aa","#60a5fa","#818cf8","#22d3ee","#34d399","#f59e0b","#f43f5e"];return Bt.jsxs("div",{ref:r,className:"h-full relative",style:B2,children:[Bt.jsxs("div",{className:"absolute top-3 left-3 z-20 rounded-full border border-zinc-800 bg-black/70 backdrop-blur px-1 py-1 flex items-center gap-1",children:[Bt.jsx("button",{onClick:()=>o?.(),className:"h-8 px-3 rounded-full text-zinc-300 hover:text-zinc-100 hover:bg-white/5",title:"Back",children:""}),Bt.jsx("div",{className:"w-px h-6 bg-zinc-800/80 mx-1"}),["select","draw","text"].map(X=>Bt.jsx("button",{onClick:()=>v(X),className:["h-8 px-3 rounded-full text-sm",p===X?"bg-white text-black":"text-zinc-300 hover:text-zinc-100 hover:bg-white/5"].join(" "),children:X[0].toUpperCase()+X.slice(1)},X)),Bt.jsx("div",{className:"w-px h-6 bg-zinc-800/80 mx-1"}),Bt.jsx("button",{onClick:y,className:"h-8 px-3 rounded-full text-zinc-300 hover:text-zinc-100 hover:bg-white/5",children:"Undo"}),Bt.jsx("button",{onClick:A,className:"h-8 px-3 rounded-full text-zinc-300 hover:text-zinc-100 hover:bg-white/5",children:"Redo"}),Bt.jsx("button",{onClick:tt,className:"h-8 px-3 rounded-full text-zinc-300 hover:text-zinc-100 hover:bg-white/5",children:"Clear"})]}),p==="draw"&&Bt.jsxs("div",{className:"absolute top-14 left-3 z-20 rounded-full border border-zinc-800 bg-black/70 backdrop-blur px-3 py-2 flex items-center gap-2",children:[Bt.jsx("div",{className:"flex items-center gap-1",children:k.map(X=>Bt.jsx("button",{onClick:()=>{g(X),N(!1)},className:"w-5 h-5 rounded-full",style:{background:X,boxShadow:E===X&&!b?"0 0 0 2px #fff, inset 0 0 0 1px #000":"inset 0 0 0 1px rgba(0,0,0,0.45)"},title:X},X))}),Bt.jsx("div",{className:"w-px h-5 bg-zinc-800/80 mx-1"}),Bt.jsx("button",{onClick:()=>N(X=>!X),className:["h-7 px-3 rounded-full text-xs",b?"bg-white text-black":"text-zinc-300 hover:text-zinc-100 hover:bg-white/5"].join(" "),children:"Eraser"}),Bt.jsx("div",{className:"w-px h-5 bg-zinc-800/80 mx-1"}),Bt.jsx("label",{className:"text-xs text-zinc-400 mr-1",children:"Size"}),Bt.jsx("input",{type:"range",min:"1",max:"36",value:c,onChange:X=>u(Number(X.target.value)),className:"accent-white"})]}),Bt.jsxs(U2,{ref:U,width:H.w,height:H.h,x:C.x,y:C.y,scaleX:m,scaleY:m,onWheel:B,onMouseDown:z,onMouseMove:q,onMouseUp:at,style:{cursor:d.current?"grabbing":p==="draw"?"crosshair":"default"},children:[Bt.jsx(Yr,{listening:!0,children:Y.map(X=>{const I=V(X.from),lt=V(X.to);return Bt.jsx(G2,{points:[I.x,I.y,lt.x,lt.y],pointerLength:10,pointerWidth:10,stroke:"#71717a",fill:"#71717a",strokeWidth:2,tension:0},X.id)})}),Bt.jsx(Yr,{children:D.map(X=>Bt.jsx(M2,{points:X.points,stroke:X.color,strokeWidth:X.size,lineCap:"round",lineJoin:"round",globalCompositeOperation:X.erase?"destination-out":"source-over",tension:.4},X.id))}),Bt.jsxs(Yr,{children:[s.map(X=>Bt.jsxs(h0,{name:`note:${X.id}`,x:X.x,y:X.y,draggable:p==="select",onDragMove:I=>{const{x:lt,y:ut}=I.target.position();_(ht=>ht.map(mt=>mt.id===X.id?{...mt,x:lt,y:ut}:mt))},onDblClick:()=>rt(X.id),onClick:()=>O(X.id),children:[Bt.jsx(f0,{width:X.w,height:X.h,cornerRadius:12,fill:"#0b0b0b",stroke:R===X.id?"#ffffff":"#3f3f46",strokeWidth:R===X.id?1.5:1,shadowBlur:R===X.id?4:0}),Bt.jsx(D2,{x:12,y:10,width:X.w-24,height:X.h-20,text:X.text,fontSize:14,fontFamily:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace",fill:"#e4e4e7",lineHeight:1.35,wrap:"word",listening:!1}),Bt.jsx(R2,{x:X.w-10,y:X.h/2,radius:4,fill:"#71717a",opacity:.5,listening:!1})]},X.id)),T.map(X=>Bt.jsx(V2,{id:X.id,x:X.x,y:X.y,w:X.w,h:X.h,src:X.src,selected:R===X.id,draggable:p==="select",onDragMove:(I,lt)=>G(ut=>ut.map(ht=>ht.id===X.id?{...ht,x:I,y:lt}:ht)),onSelect:()=>O(X.id)},X.id))]})]})]})}function V2({id:o,x:r,y:H,w:U,h:C,src:S,selected:m,draggable:f,onDragMove:d,onSelect:p}){const[v,E]=bt.useState(null);return bt.useEffect(()=>{const g=new window.Image;g.crossOrigin="anonymous",g.src=S,g.onload=()=>E(g)},[S]),Bt.jsxs(h0,{name:`img:${o}`,x:r,y:H,draggable:f,onDragMove:g=>{const c=g.target.position();d?.(c.x,c.y)},onClick:p,children:[Bt.jsx(O2,{image:v,width:U,height:C}),Bt.jsx(f0,{width:U,height:C,stroke:m?"#ffffff":"#3f3f46",strokeWidth:m?1.5:1})]})}export{$2 as default};
